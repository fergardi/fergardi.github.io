{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACAA;AACA;AACE,SAJF;AAKA;;AACAC;AAA6C;AAAA,OAA7C;;AACAA;AACAA;AACAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRO,UAAMC,OAAM,GAAW,CAC5B;AAAEC,YAAI,EAAE,EAAR;AAAYC,kBAAU,EAAE,cAAxB;AAAwCC,iBAAS,EAAE;AAAnD,OAD4B,EAE5B;AAAEF,YAAI,EAAE,MAAR;AAAgBG,oBAAY,EAAE;AAAA,iBAAMC;AAAA;AAAA;AAAA;AAAA,kBAA6BC,IAA7B,CAAkC,WAAC;AAAA,mBAAIC,CAAC,CAACC,UAAN;AAAA,WAAnC,CAAN;AAAA;AAA9B,OAF4B,EAG5B;AAAEP,YAAI,EAAE,OAAR;AAAiBG,oBAAY,EAAE;AAAA,iBAAMK;AAAA;AAAA;AAAA;AAAA,kBAA+BH,IAA/B,CAAoC,WAAC;AAAA,mBAAIC,CAAC,CAACG,WAAN;AAAA,WAArC,CAAN;AAAA,SAA/B;AAA8FC,mBAAW,EAAE,CAACC,uDAAD;AAA3G,OAH4B,EAI5B;AAAEX,YAAI,EAAE,SAAR;AAAmBG,oBAAY,EAAE;AAAA,iBAAMC;AAAA;AAAA;AAAA;AAAA,kBAAmCC,IAAnC,CAAwC,WAAC;AAAA,mBAAIC,CAAC,CAACM,aAAN;AAAA,WAAzC,CAAN;AAAA,SAAjC;AAAsGF,mBAAW,EAAE,CAACC,uDAAD;AAAnH,OAJ4B,EAK5B;AAAEX,YAAI,EAAE,IAAR;AAAcC,kBAAU,EAAE;AAA1B,OAL4B,CAAvB;;UAmBMY;;;;;yBAAAA;AAAgB;;;cAAhBA;;;kBAVF,CACPC,kEAAqBf,OAArB,EAA6B;AAC3BgB,mCAAyB,EAAE,KADA;AAE3B;AACAC,6BAAmB,EAAE,QAHM;AAI3BC,yBAAe,EAAE,SAJU,CAIC;;AAJD,SAA7B,CADO,GAQCH;;;;4HAECD,mBAAgB;AAAAK;AAAAC,oBAFjBL,yDAEiB;AAAA;AAFL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBxBM;;AACEA;;AACFA;;;;UCQaC;AAEX,+BACUC,eADV,EAESC,cAFT,EAGUC,eAHV,EAIUC,MAJV,EAK+BC,UAL/B,EAK8C;AAAA;;AAJpC;AACD;AACC;AACA;AACqB;AAC1B;;;;iBAEL,oBAAQ;AAAA;;AACN;AACA,iBAAKD,MAAL,CAAYE,MAAZ,CAAmBC,SAAnB,CAA6B,UAACC,KAAD,EAAuB;AAClD,kBAAIA,KAAK,YAAYC,0DAAjB,IAAkCD,KAAK,CAACE,GAAN,KAAc,eAApD,EAAqE;AACnEC,4BAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,KAAK,CAACE,GAApC;AACD;;AACD,kBAAIF,KAAK,YAAYC,mDAAjB,IAA2BD,KAAK,CAACK,MAAjC,IAA2C,oEAAkB,KAAI,CAACR,UAAvB,CAA/C,EAAmF;AACjFS,0BAAU,CAAC,YAAK;AACd,sBAAMD,MAAM,GAAGE,QAAQ,CAACC,aAAT,CAAuB,MAAMR,KAAK,CAACK,MAAnC,CAAf;;AACA,sBAAI,CAACA,MAAL,EAAa;AACXI,0BAAM,CAACC,QAAP,CAAgB;AAAEC,yBAAG,EAAE,CAAP;AAAUC,8BAAQ,EAAE;AAApB,qBAAhB;AACD,mBAFD,MAEO;AACLP,0BAAM,CAACQ,cAAP,CAAsB;AAAED,8BAAQ,EAAE;AAAZ,qBAAtB;AACD;AACF,iBAPS,EAOP,IAPO,CAAV;AAQD;AACF,aAdD,EAFM,CAiBN;;AACA,iBAAKjB,eAAL,CAAqBmB,UAArB;AACA,iBAAKrB,eAAL,CAAqBsB,YAArB,CAAkC,CAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,qFAVgC,EAWhCA,0EAXgC,EAYhCA,yEAZgC,CAahC;AACA;AACA;AACA;AACA;AACA;AAlBgC,aAAlC;AAoBD;;;;;;;yBAjDUxB,eAAYD,klBAObA,sDAPa;AAOF;;;cAPVC;AAAYyB;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;ADZzB9B;;AAEAA;;AAIAA;;AAEEA;;AACFA;;;;AAP6BA;;AAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cEqB7B;;;AACO,eAAS+B,kBAAT,CAA2BC,IAA3B,EAA2C;AAChD,eAAO,IAAIC,2EAAJ,CAAwBD,IAAxB,CAAP;AACD,QAED;;;AACO,eAASE,sBAAT,CAA+BC,gBAA/B,EAAiE;AACtE,eAAO,YAAK;AACVA,0BAAgB,CAACC,cAAjB,CAAgC,IAAhC;AACA,iBAAOD,gBAAgB,CAACE,GAAjB,CAAqB,IAArB,EAA2BC,SAA3B,EAAP;AACD,SAHD;AAID;;UA4CYC;;;;;yBAAAA;AAAS;;;cAATA;AAASC,oBAHlBC,wDAGkB;;;mBATT,CACT;AAAEC,iBAAO,EAAEC,sEAAX;AAA8BC,kBAAQ,EAAED;AAAxC,SADS,EAET;AAAED,iBAAO,EAAEG,0EAAX;AAA6BD,kBAAQ,EAAEE;AAAvC,SAFS,EAGT;AAAEJ,iBAAO,EAAEK,0DAAX;AAA4BC,oBAAU,EAAEd,sBAAxC;AAA+De,cAAI,EAAE,CAACC,kEAAD,CAArE;AAAyFC,eAAK,EAAE;AAAhG,SAHS;AAIVrD,kBAjCQ,CACPsD,qEADO,EAEPC,iEAFO,EAGPC,0FAHO,EAIPC,+DAJO,EAKPC,4EAAgCC,2EAAhC,CALO,EAMPC,sEANO,EAOPC,4EAPO,EAQPC,8EARO,EASPV,0EAAwB;AACtBW,gBAAM,EAAE;AACNnB,mBAAO,EAAEQ,iEADH;AAENF,sBAAU,EAAEjB,kBAFN;AAGNkB,gBAAI,EAAE,CAACa,6DAAD;AAHA,WADc;AAMtBC,iBAAO,EAAE;AANa,SAAxB,CATO,EAiBPC,4DACE,CAACC,8DAAD,CADF,EAEE;AAAEC,yBAAe,EAAE,CAACT;AAApB,SAFF,CAjBO,EAqBPU,yFAAsC;AACpCC,cAAI,EAAE,aAD8B;AAEpCC,kBAAQ,EAAEZ;AAF0B,SAAtC,CArBO,EAyBPa,6EAzBO,EA0BPC,4DA1BO,EA2BPC,8DAAqB,kBAArB,CA3BO,CAiCR;;;;4HAKUjC,YAAS;AAAAkC,yBAxClBhC,wDAwCkB;AAxCN3C,oBAGZsD,qEAHY,EAIZC,iEAJY,EAKZC,0FALY,EAMZC,+DANY,EAMAC,6DANA,EAQZE,sEARY,EASZC,4EATY,EAUZC,8EAVY,EAUaV,iEAVb,EAUac,8CAVb,EAUaG,gFAVb,EAUaG,mEAVb,EA4BZC,4DA5BY,EA4BKC,qDA5BL;AAwCM;AAZD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5CPE;;;;;;;;;;AAAKA,gKAAiC,KAAjC,EAAiCC,gBAAjC,EAAiCD,4DAAjC,EAAiC,KAAjC,EAAiCA,iFAAjC;;;;;;AACLA;;;;;;;;;;AAAKA,+JAAgC,KAAhC,EAAgCE,eAAhC,EAAgCF,4DAAhC,EAAgC,KAAhC,EAAgCA,gFAAhC;;;;;;AACLA;;;;;;;;;;AAAKA,kKAAmC,KAAnC,EAAmCG,kBAAnC,EAAmCH,4DAAnC,EAAmC,KAAnC,EAAmCA,mFAAnC;;;;;;AACLA;;;;;;;;AAAKA,0KAA+C,KAA/C,EAA+CA,2FAA/C;;;;;;AAGLA;;;;;;;;;;;;AAAKA,iQAAgF,KAAhF,EAAgFI,kBAAhF,EAAgFJ,4DAAhF,EAAgF,KAAhF,EAAgFA,4FAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;;;;;;;AAZtIA;;AAAkGA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAChGA;;;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAiCA;;AAC/CA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;AACAA;;AAGAA;;AAAUA;;AAASA;;AACrBA;;;;;;AAfiFA,wFAAgB,SAAhB,EAAgBA,mJAAhB;;AAC1DA;;AAAAA;;AACkCA;;AAAAA,8JAAwB,KAAxB,EAAwBA,qFAAxB;;AAEzCA;;AAAAA;;AAE2DA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;AAE5BA;;AAAAA;;;;;;AAsCnCA;;;;;;;;;;AAAKA,gKAAiC,KAAjC,EAAiCK,gBAAjC,EAAiCL,4DAAjC,EAAiC,KAAjC,EAAiCA,iFAAjC;;;;;;AACLA;;;;;;;;;;AAAKA,+JAAgC,KAAhC,EAAgCM,eAAhC,EAAgCN,4DAAhC,EAAgC,KAAhC,EAAgCA,gFAAhC;;;;;;AACLA;;;;;;;;;;AAAKA,kKAAmC,KAAnC,EAAmCO,kBAAnC,EAAmCP,4DAAnC,EAAmC,KAAnC,EAAmCA,mFAAnC;;;;;;AACLA;;;;;;;;AAAKA,0KAA+C,KAA/C,EAA+CA,2FAA/C;;;;;;AAGLA;;;;;;;;;;;;AAAKA,iQAAgF,KAAhF,EAAgFQ,kBAAhF,EAAgFR,4DAAhF,EAAgF,KAAhF,EAAgFA,4FAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;AAZtIA;;AACEA;;;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAiCA;;AAC/CA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;AACAA;;AAGAA;;AAAUA;;AAASA;;AACrBA;;;;;;AAfyEA,yFAAgB,SAAhB,EAAgBS,yBAAhB;;AAClDT;;AAAAA;;AACkCA;;AAAAA,+JAAwB,KAAxB,EAAwBA,sFAAxB;;AAEzCA;;AAAAA;;AAE2DA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;AAE5BA;;AAAAA;;;;;;AAoCvCA;;;;;;;;;;AAAKA,gKAAiC,KAAjC,EAAiCU,gBAAjC,EAAiCV,4DAAjC,EAAiC,KAAjC,EAAiCA,iFAAjC;;;;;;AACLA;;;;;;;;;;AAAKA,+JAAgC,KAAhC,EAAgCW,eAAhC,EAAgCX,4DAAhC,EAAgC,KAAhC,EAAgCA,gFAAhC;;;;;;AACLA;;;;;;;;;;AAAKA,kKAAmC,KAAnC,EAAmCY,kBAAnC,EAAmCZ,4DAAnC,EAAmC,KAAnC,EAAmCA,mFAAnC;;;;;;AACLA;;;;;;;;AAAKA,0KAA+C,KAA/C,EAA+CA,2FAA/C;;;;;;AAGLA;;;;;;;;;;;;AAAKA,iQAAgF,KAAhF,EAAgFa,kBAAhF,EAAgFb,4DAAhF,EAAgF,KAAhF,EAAgFA,4FAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;AAZtIA;;AACEA;;;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAiCA;;AAC/CA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;AACAA;;AAGAA;;AAAUA;;AAASA;;AACrBA;;;;;;AAf0EA,yFAAgB,SAAhB,EAAgBc,yBAAhB;;AACnDd;;AAAAA;;AACkCA;;AAAAA,+JAAwB,KAAxB,EAAwBA,sFAAxB;;AAEzCA;;AAAAA;;AAE2DA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;AAE5BA;;AAAAA;;;;;;AAmCvCA;;;;;;;;;;AAAKA,gKAAiC,KAAjC,EAAiCe,gBAAjC,EAAiCf,4DAAjC,EAAiC,KAAjC,EAAiCA,iFAAjC;;;;;;AACLA;;;;;;;;;;AAAKA,+JAAgC,KAAhC,EAAgCgB,eAAhC,EAAgChB,4DAAhC,EAAgC,KAAhC,EAAgCA,gFAAhC;;;;;;AACLA;;;;;;;;;;AAAKA,kKAAmC,KAAnC,EAAmCiB,kBAAnC,EAAmCjB,4DAAnC,EAAmC,KAAnC,EAAmCA,mFAAnC;;;;;;AACLA;;;;;;;;AAAKA,0KAA+C,KAA/C,EAA+CA,2FAA/C;;;;;;AAGLA;;;;;;;;;;;;AAAKA,iQAAgF,KAAhF,EAAgFkB,kBAAhF,EAAgFlB,4DAAhF,EAAgF,KAAhF,EAAgFA,4FAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;;;AAZtIA;;AAAwDA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACtDA;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAA2BA;;AACzCA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;AACAA;;AAGAA;;;;AACEA;;;;AAAuGA;;AACzGA;;AACFA;;;;;;AAfyDA;;AAAAA,yJAAkB,KAAlB,EAAkBA,gFAAlB;;AAEzCA;;AAAAA;;AAE2DA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;AAE5BA;;AAAAA;;AAGpBA;;AAAAA;;AAC0CA;;AAAAA;;;;AC5I/E,UAAYmB,oBAAZ;;AAAA,iBAAYA,mBAAZ,EAA+B;AAC7BA;AACAA;AACAA;AACD,OAJD,EAAYA,oBAAmB,KAAnBA,oBAAmB,MAA/B;;AAMA,UAAMC,cAAc,GAAG,CAAvB;;UASaC,cAAa;AAQxB,+BACUC,gBADV,EAEUC,mBAFV,EAGUC,KAHV,EAIUC,MAJV,EAKUC,UALV,EAMUjG,cANV,EAOSC,eAPT,EAOyC;AAAA;;AAN/B;AACA;AACA;AACA;AACA;AACA;AACD;AAbT,qBAAc,KAAK8F,KAAL,CAAWG,cAAX,CAA0BC,gFAA1B,CAAd;AACA,+BAAuB,EAAvB;AACA,8BAAsB,EAAtB;AACA,+BAAuB,EAAvB;AACA,8BAAsB,EAAtB;AAUI;;AAhBoB;AAAA;AAAA,iBAkBxB,oBAAQ;AAAA;;AACN,kEAAc,CACZ,KAAKN,gBAAL,CAAsBO,UAAtB,oBAAkD,KAAKC,GAAvD,cAAqEC,YAArE,CAAkF;AAAEC,qBAAO,EAAE;AAAX,aAAlF,CADY,EAEZ,KAAKV,gBAAL,CAAsBO,UAAtB,UAA+C,aAAG;AAAA,qBAAII,GAAG,CAACC,KAAJ,CAAU,aAAV,EAAyB,IAAzB,EAA+B,IAA/B,CAAJ;AAAA,aAAlD,EAA4FH,YAA5F,CAAyG;AAAEC,qBAAO,EAAE;AAAX,aAAzG,CAFY,CAAd,EAICG,IAJD,CAIM,wEAAe,IAAf,CAJN,EAKCrG,SALD,CAKW,gBAAoB;AAAA;AAAA,kBAAlBsG,MAAkB;AAAA,kBAAVC,KAAU;;AAC7B,oBAAI,CAACC,aAAL,GAAqBF,MAAM,CAACG,MAAP,CAAc,eAAK;AAAA,uBAAIC,KAAK,CAACC,UAAN,KAAqBtB,oBAAmB,CAACuB,IAAzC,IAAiD,CAACF,KAAK,CAACC,UAA5D;AAAA,eAAnB,EAA2FE,IAA3F,CAAgG,UAACC,CAAD,EAAIC,CAAJ;AAAA,uBAAUD,CAAC,CAACD,IAAF,GAASE,CAAC,CAACF,IAArB;AAAA,eAAhG,CAArB;AACA,oBAAI,CAACG,YAAL,GAAoBV,MAAM,CAACG,MAAP,CAAc,eAAK;AAAA,uBAAIC,KAAK,CAACC,UAAN,KAAqBtB,oBAAmB,CAAC4B,MAA7C;AAAA,eAAnB,EAAwEJ,IAAxE,CAA6E,UAACC,CAAD,EAAIC,CAAJ;AAAA,uBAAUD,CAAC,CAACD,IAAF,GAASE,CAAC,CAACF,IAArB;AAAA,eAA7E,CAApB;AACA,oBAAI,CAACK,aAAL,GAAqBZ,MAAM,CAACG,MAAP,CAAc,eAAK;AAAA,uBAAIC,KAAK,CAACC,UAAN,KAAqBtB,oBAAmB,CAAC8B,OAA7C;AAAA,eAAnB,EAAyEN,IAAzE,CAA8E,UAACC,CAAD,EAAIC,CAAJ;AAAA,uBAAUD,CAAC,CAACD,IAAF,GAASE,CAAC,CAACF,IAArB;AAAA,eAA9E,CAArB;AACA,oBAAI,CAACO,YAAL,GAAoBb,KAAK,CAACM,IAAN,CAAW,UAACC,CAAD,EAAIC,CAAJ;AAAA,uBAAUD,CAAC,CAACO,IAAF,GAASN,CAAC,CAACM,IAArB;AAAA,eAAX,CAApB;AACD,aAVD;AAWD;AA9BuB;AAAA;AAAA,iBAgClB,qBAAYC,MAAZ,EAAoC;;;;;;4BACpCA,MAAM,CAACC,SAAP,KAAqBC,MAAM,CAACF,MAAM,CAACC,SAAP,CAAiBE,EAAlB,CAAN,KAAgC,CAAhC,IAAqCH,MAAM,CAACI,iBAAP,KAA6BJ,MAAM,CAACC,SAAzE,IAAsFD,MAAM,CAACC,SAAP,CAAiBI,IAAjB,CAAsBC,MAAtB,GAA+BtC,cAA1I;;;;;AACF,0BAAIgC,MAAM,CAACI,iBAAP,KAA6BJ,MAAM,CAACC,SAAxC,EAAmD;AACjD,kGAAgBD,MAAM,CAACC,SAAP,CAAiBI,IAAjC,EAAuCL,MAAM,CAACO,aAA9C,EAA6DP,MAAM,CAACQ,YAApE;AACD,uBAFD,MAEO;AACL,oGAAkBR,MAAM,CAACI,iBAAP,CAAyBC,IAA3C,EAAiDL,MAAM,CAACC,SAAP,CAAiBI,IAAlE,EAAwEL,MAAM,CAACO,aAA/E,EAA8FP,MAAM,CAACQ,YAArG;AACD;;;AACD,6BAAM,KAAKC,UAAL,EAAN;;;;;;;AAEA,2BAAKtC,mBAAL,CAAyBuC,OAAzB,CAAiC,sBAAjC;;;;;;;;;AAEH;AA3CuB;AAAA;AAAA,iBA6ClB,sBAAU;;;;;;;AACd,2BAAKrI,cAAL,CAAoBsI,YAApB;;AAEQC,6BAAO;AACb,2BAAK1B,aAAL,CAAmB2B,OAAnB,CAA2B,UAACC,YAAD,EAAeC,KAAf,EAAwB;AACjDH,4BAAI,CAACI,IAAL,CAAU;AAAEC,iCAAO,EAAEH,YAAY,CAACI,GAAxB;AAA6B3B,8BAAI,EAAE,OAAOwB,KAA1C;AAAiD1B,oCAAU,EAAEtB,oBAAmB,CAACuB;AAAjF,yBAAV;AACD,uBAFD;AAGA,2BAAKI,YAAL,CAAkBmB,OAAlB,CAA0B,UAACM,WAAD,EAAcJ,KAAd,EAAuB;AAC/CH,4BAAI,CAACI,IAAL,CAAU;AAAEC,iCAAO,EAAEE,WAAW,CAACD,GAAvB;AAA4B3B,8BAAI,EAAE,OAAOwB,KAAzC;AAAgD1B,oCAAU,EAAEtB,oBAAmB,CAAC4B;AAAhF,yBAAV;AACD,uBAFD;AAGA,2BAAKC,aAAL,CAAmBiB,OAAnB,CAA2B,UAACO,YAAD,EAAeL,KAAf,EAAwB;AACjDH,4BAAI,CAACI,IAAL,CAAU;AAAEC,iCAAO,EAAEG,YAAY,CAACF,GAAxB;AAA6B3B,8BAAI,EAAE,OAAOwB,KAA1C;AAAiD1B,oCAAU,EAAEtB,oBAAmB,CAAC8B;AAAjF,yBAAV;AACD,uBAFD;;AAGiB,6BAAM,KAAKvB,UAAL,CAAgB+C,UAAhB,CAA2B,KAAK3C,GAAhC,EAAqCkC,IAArC,CAAN;;;AAAXU;AACN,2BAAKnD,mBAAL,CAAyBoD,OAAzB,CAAiC,sBAAjC;;;;;;;AAEAC,6BAAO,CAACC,KAAR;AACA,2BAAKtD,mBAAL,CAAyBsD,KAAzB,CAA+B,oBAA/B;;;AAEF,2BAAKpJ,cAAL,CAAoBqJ,WAApB;;;;;;;;;AACD;AAjEuB;AAAA;AAAA,iBAmExB,2BAAkBC,IAAlB,EAA2B;AACzB,gBAAMC,SAAS,GAAG,KAAKvD,MAAL,CAAYwD,IAAZ,CAAiBC,gEAAjB,EAAmC;AACnDC,wBAAU,EAAE,mBADuC;AAEnD1B,kBAAI,EAAEsB;AAF6C,aAAnC,CAAlB;AAID;AAxEuB;AAAA;AAAA,iBA0ExB,2BAAkBvC,KAAlB,EAA4B;AAC1B,gBAAMwC,SAAS,GAAG,KAAKvD,MAAL,CAAYwD,IAAZ,CAAiBG,gEAAjB,EAAmC;AACnDD,wBAAU,EAAE,mBADuC;AAEnD1B,kBAAI,EAAEjB;AAF6C,aAAnC,CAAlB;AAID;AA/EuB;;AAAA;AAAA;;;yBAAbnB,gBAAarB;AAAA;;;cAAbqB;AAAarE;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AD/B1B4C;;AAEEA;;AACEA;;AACEA;;AACEA;;;;AACAA;;AAAgBA;;;;AAAqCA;;AACrDA;;AAAmBA;;;;AAA4CA;;AAC/DA;;AACEA;;AAAwBA;AAAA,qBAASqF,0BAA2B,WAA3B,CAAT;AAAgD,aAAhD;;AAAkDrF;;AAAUA;;AAAIA;;AAAWA;;AACnGA;;AAAeA;;AAA0BA;;AAAUA;;AAAaA;;AAAWA;;;;AAAoCA;;AAAWA;;AAC5HA;;AACFA;;AAEAA;;AACEA;;AAAkBA;;;;AAAqCA;;AACvDA;;AAAkHA;AAAA,qBAAsBqF,uBAAtB;AAAyC,aAAzC;;AAChHrF;;AAgBFA;;AACFA;;AACAA;;AACEA;;;;;;AACFA;;AACFA;;AACFA;;AAEAA;;AAEEA;;AACEA;;AAEEA;;AACEA;;AACEA;;;;AACAA;;AAAgBA;;;;AAAuCA;;AACvDA;;AAAmBA;;;;AAA8CA;;AACjEA;;AACEA;;AAAwBA;AAAA,qBAASqF,0BAA2B,aAA3B,CAAT;AAAkD,aAAlD;;AAAoDrF;;AAAUA;;AAAIA;;AAAWA;;AACrGA;;AAAeA;;AAA0BA;;AAAUA;;AAAQA;;AAAWA;;;;AAAsCA;;AAAWA;;AACzHA;;AACFA;;AAEAA;;AACEA;;AAAkBA;;;;AAAqCA;;AACvDA;;AAA6GA;AAAA,qBAAsBqF,uBAAtB;AAAyC,aAAzC;;AAC3GrF;;AAgBFA;;AACFA;;AACAA;;AACEA;;;;;;AACFA;;AACFA;;AAEFA;;AAEAA;;AAEEA;;AACEA;;AACEA;;;;AACAA;;AAAgBA;;;;AAAwCA;;AACxDA;;AAAmBA;;;;AAA+CA;;AAClEA;;AACEA;;AAAwBA;AAAA,qBAASqF,0BAA2B,cAA3B,CAAT;AAAmD,aAAnD;;AAAqDrF;;AAAUA;;AAAIA;;AAAWA;;AACtGA;;AAAeA;;AAA0BA;;AAAUA;;AAAQA;;AAAWA;;;;AAAuCA;;AAAWA;;AAC1HA;;AACFA;;AAEAA;;AACEA;;AAAkBA;;;;AAAqCA;;AACvDA;;AAA8GA;AAAA,qBAAsBqF,uBAAtB;AAAyC,aAAzC;;AAC5GrF;;AAgBFA;;AACFA;;AACAA;;AACEA;;;;;;AACFA;;AACFA;;AACFA;;AAEAA;;AAEEA;;AACEA;;AACEA;;;;AACAA;;AAAgBA;;;;AAAwCA;;AACxDA;;AAAmBA;;;;AAA+CA;;AAClEA;;AACEA;;AAAwBA;AAAA,qBAASqF,0BAA2B,cAA3B,CAAT;AAAmD,aAAnD;;AAAqDrF;;AAAUA;;AAAIA;;AAAWA;;AACtGA;;AAAeA;;AAA0BA;;AAAUA;;AAAIA;;AAAWA;;;;AAAgCA;;AAAWA;;AAC/GA;;AACFA;;AAEAA;;AACEA;;AAAkBA;;;;AAAqCA;;AACvDA;;AACEA;;AAkBFA;;AACFA;;AACAA;;AACEA;;;;;;AACFA;;AACFA;;AACFA;;AAEFA;;AACFA;;AAEFA;;;;AA1KuFA;;AAKtBA;;AAAAA;;AACzCA;;AAAAA;;AACGA;;AAAAA;;AAG0DA;;AAAAA;;AAK3DA;;AAAAA;;AAC2IA;;AAAAA;;AACnHA;;AAAAA;;AAmBvCA;;AAAAA;;AAY4DA;;AAAAA;;AAC3CA;;AAAAA;;AACGA;;AAAAA;;AAGqDA;;AAAAA;;AAKtDA;;AAAAA;;AACsIA;;AAAAA;;AACrHA;;AAAAA;;AAmBhCA;;AAAAA;;AAUyDA;;AAAAA;;AAC5CA;;AAAAA;;AACGA;;AAAAA;;AAGqDA;;AAAAA;;AAKtDA;;AAAAA;;AACuIA;;AAAAA;;AACtHA;;AAAAA;;AAmBhCA;;AAAAA;;AASyDA;;AAAAA;;AAC5CA;;AAAAA;;AACGA;;AAAAA;;AAGiDA;;AAAAA;;AAKlDA;;AAAAA;;AAEuBA;;AAAAA;;AAqBtCA;;AAAAA;;;;;;;qBCtID,CAAC,6EAAuB;AAAEsF,oBAAQ,EAAE,GAAZ;AAAiBC,iBAAK,EAAE;AAAxB,WAAvB,CAAD;;;AAGDlE,oBAAa,wDADzB,uEACyB,GAAbA,cAAa,CAAb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRDmE;;;;;;;;AAAKA,6JAAiC,KAAjC,EAAiCC,eAAjC,EAAiCD,2DAAjC;;;;;;AACLA;;;;;;;;AAAKA,4JAAgC,KAAhC,EAAgCE,cAAhC,EAAgCF,2DAAhC;;;;;;AACLA;;;;;;;;AAAKA,gKAAmC,KAAnC,EAAmCG,kBAAnC,EAAmCH,2DAAnC;;;;;;AACLA;;;;;;AAAKA;;;;;;AAGLA;;;;;;;;;;AAAKA,8PAAgF,KAAhF,EAAgFrF,kBAAhF,EAAgFqF,2DAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;;;;;;;AAsBtIA;;AAA0EA;;AAA0DA;;;;;;AAA8GA;;;;;;AAA9GA;;AAAAA;;;;;;AACpIA;;AAA0EA;;AAA0DA;;;;;;AAA8GA;;;;;;AAA9GA;;AAAAA;;;;;;AACpIA;;AAAgFA;;AAAgEA;;;;;;AAA0HA;;;;;;AAA1HA;;AAAAA;;;;;;;;UAc3II;AAKX,mCACkCpD,KADlC,EAEUwC,SAFV,EAGUa,WAHV,EAIUtE,mBAJV,EAKUC,KALV,EAMUE,UANV,EAOUjG,cAPV,EAOwC;AAAA;;AANN;AACxB;AACA;AACA;AACA;AACA;AACA;AAVV,sBAAkB,IAAlB;AACA,qBAAM,KAAK+F,KAAL,CAAWG,cAAX,CAA0BC,gFAA1B,CAAN;AAUK;;;;iBAEL,oBAAQ;AACN,iBAAKkE,IAAL,GAAY,KAAKD,WAAL,CAAiBE,KAAjB,CAAuB;AACjCC,sBAAQ,EAAE,CAAC,KAAKxD,KAAL,CAAWwD,QAAZ,EAAsB,CAACC,+DAAD,EAAsBA,2DAAe,CAAf,CAAtB,EAAyCA,2DAAe,KAAKzD,KAAL,CAAWwD,QAA1B,CAAzC,CAAtB;AADuB,aAAvB,CAAZ;AAGD;;;iBAED,iBAAK;AACH,iBAAKhB,SAAL,CAAekB,KAAf;AACD;;;iBAEK,mBAAO;;;;;;;2BACP,KAAKJ,IAAL,CAAUK;;;;;AACZ,2BAAK1K,cAAL,CAAoBsI,YAApB;;;AAEoB,6BAAM,KAAKrC,UAAL,CAAgB0E,YAAhB,CAA6B,KAAKtE,GAAlC,EAAuC,KAAKU,KAAL,CAAW8B,GAAlD,EAAuD,KAAKwB,IAAL,CAAUO,KAAV,CAAgBL,QAAvE,CAAN;;;AAAZM;AACN,2BAAK/E,mBAAL,CAAyBoD,OAAzB,CAAiC,yBAAjC,EAA4D2B,SAA5D;AACA,2BAAKJ,KAAL;;;;;;;AAEAtB,6BAAO,CAACC,KAAR;AACA,2BAAKtD,mBAAL,CAAyBsD,KAAzB,CAA+B,uBAA/B;;;AAEF,2BAAKpJ,cAAL,CAAoBqJ,WAApB;;;;;AAEA,2BAAKvD,mBAAL,CAAyBsD,KAAzB,CAA+B,uBAA/B;;;;;;;;;AAEH;;;;;;;yBAxCUe,mBAAgBJ,gEAMjBe,sEANiB,GAMFf;AAAA;;;cANdI;AAAgB5I;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AAvDzBoI;;AAAqBA;;;;AAAwCA;;AAC7DA;;AACEA;;;;;;AACAA;;AAAkBA;;;;AAA0CA;;AAC5DA;;AACEA;;AACEA;;;;AACEA;;AACFA;;AACAA;;AAAcA;;;;AAAiCA;;AAC/CA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;AACAA;;AAGAA;;AACEA;;AACFA;;AACFA;;AACFA;;AACFA;;AACAA;;AACEA;;AAAkBA;;;;AAA4CA;;AAC9DA;;AACEA;;AACEA;;AAAWA;;;;AAA4CA;;AACvDA;;;;AACAA;;AAAUA;;;;AAAwCA;;AAClDA;;AAAWA;;;;AAA2CA;;AACxDA;;AACFA;;AACFA;;AACAA;;AACEA;;AAAkBA;;;;AAAiDA;;AACnEA;;AACEA;;AACAA;;AACAA;;AACFA;;AACFA;;AACAA;;AACEA;;AAAmBA;AAAA,qBAASH,WAAT;AAAgB,aAAhB;;AAAkBG;;;;AAA0CA;;AAC/EA;;AAA4GA;AAAA,qBAASH,aAAT;AAAkB,aAAlB;;AAAoBG;;;;AAA2CA;;AAC7KA;;;;AA/CqBA;;AAAAA;;AAEhBA;;AAAAA;;AACeA;;AAAAA;;AAEDA;;AAAAA;;AACQA;;AAAAA;;AACEA;;AAAAA;;AAETA;;AAAAA;;AAE2DA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;AAE5BA;;AAAAA;;AAGpBA;;AAAAA;;AAOPA;;AAAAA;;AACZA;;AAAAA;;AAESA;;AAAAA;;AACSA;;AAAAA;;AACVA;;AAAAA;;AACCA;;AAAAA;;AAKGA;;AAAAA;;AAEoBA;;AAAAA;;AACAA;;AAAAA;;AACAA;;AAAAA;;AAIDA;;AAAAA;;AACKA;;AAAAA;;AAAsFA;;AAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnC1HA;;;;;;;;AAAKA,6JAAiC,KAAjC,EAAiCgB,eAAjC,EAAiChB,2DAAjC;;;;;;AACLA;;;;;;;;AAAKA,4JAAgC,KAAhC,EAAgCiB,cAAhC,EAAgCjB,2DAAhC;;;;;;AACLA;;;;;;;;AAAKA,+JAAmC,KAAnC,EAAmCkB,iBAAnC,EAAmClB,2DAAnC;;;;;;AACLA;;;;;;AAAKA;;;;;;AAGLA;;;;;;;;;;AAAKA,6PAAgF,KAAhF,EAAgFmB,iBAAhF,EAAgFnB,2DAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;;;UAoCjIoB;AAMX,mCACkC7B,IADlC,EAEUC,SAFV,EAGUa,WAHV,EAIUtE,mBAJV,EAKUC,KALV,EAMUE,UANV,EAOUjG,cAPV,EAOwC;AAAA;;AANN;AACxB;AACA;AACA;AACA;AACA;AACA;AAXV,sBAAkB,IAAlB;AACA,qBAAc,KAAK+F,KAAL,CAAWG,cAAX,CAA0BC,gFAA1B,CAAd;AACA,6BAAmB,KAAKJ,KAAL,CAAWG,cAAX,CAA0BC,oFAA1B,CAAnB;AAUK;;;;iBAEL,oBAAQ;AACN,iBAAKkE,IAAL,GAAY,KAAKD,WAAL,CAAiBE,KAAjB,CAAuB;AACjCC,sBAAQ,EAAE,CAAC,IAAD,EAAO,CAACC,+DAAD,EAAsBA,2DAAe,CAAf,CAAtB,EAAyCA,2DAAeY,IAAI,CAACC,KAAL,CAAW,KAAKC,WAAL,CAAiBf,QAAjB,GAA4B,KAAKjB,IAAL,CAAU5B,IAAjD,CAAf,CAAzC,CAAP;AADuB,aAAvB,CAAZ;AAGD;;;iBAED,iBAAK;AACH,iBAAK6B,SAAL,CAAekB,KAAf;AACD;;;iBAED,gBAAI;AACF,mBAAO,KAAKJ,IAAL,CAAUO,KAAV,CAAgBL,QAAhB,GAA2B,KAAKjB,IAAL,CAAU5B,IAA5C;AACD;;;iBAEK,mBAAO;;;;;;;4BACP,KAAK2C,IAAL,CAAUK,KAAV,IAAmB,KAAKhD,IAAL,MAAe,KAAK4D,WAAL,CAAiBf;;;;;AACrD,2BAAKvK,cAAL,CAAoBsI,YAApB;;;AAEoB,6BAAM,KAAKrC,UAAL,CAAgBsF,WAAhB,CAA4B,KAAKlF,GAAjC,EAAsC,KAAKiD,IAAL,CAAUxB,EAAhD,EAAoD,KAAKuC,IAAL,CAAUO,KAAV,CAAgBL,QAApE,CAAN;;;AAAZiB;AACN,2BAAK1F,mBAAL,CAAyBoD,OAAzB,CAAiC,yBAAjC,EAA4DsC,SAA5D;AACA,2BAAKf,KAAL;;;;;;;AAEAtB,6BAAO,CAACC,KAAR;AACA,2BAAKtD,mBAAL,CAAyBsD,KAAzB,CAA+B,uBAA/B;;;AAEF,2BAAKpJ,cAAL,CAAoBqJ,WAApB;;;;;AAEA,2BAAKvD,mBAAL,CAAyBsD,KAAzB,CAA+B,uBAA/B;;;;;;;;;AAEH;;;;;;;yBA7CU+B,mBAAgBpB,gEAOjBe,sEAPiB,GAOFf;AAAA;;;cAPdoB;AAAgB5J;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AArDzBoI;;AAAqBA;;;;AAAwCA;;AAC7DA;;AACEA;;;;;;AACAA;;AAAkBA;;;;AAA0CA;;AAC5DA;;AACEA;;AACEA;;AACEA;;AACFA;;AACAA;;AAAcA;;;;AAA2BA;;AACzCA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;AACAA;;AAGAA;;;;AACEA;;AACFA;;AACFA;;AACFA;;AACFA;;AACAA;;AACEA;;AAAkBA;;;;AAA4CA;;AAC9DA;;AACEA;;AACEA;;AAAWA;;;;AAA4CA;;AACvDA;;;;AACAA;;AAAUA;;;;AAAwCA;;AAClDA;;AAAWA;;;;AAA2CA;;AACxDA;;AACFA;;AACFA;;AACAA;;AACEA;;AAAkBA;;;;AAA0CA;;AAC5DA;;AACEA;;AAAmCA;;AAA0DA;;;;AAAkBA;;AACjHA;;AACFA;;AACAA;;AACEA;;AAAmBA;AAAA,qBAASH,WAAT;AAAgB,aAAhB;;AAAkBG;;;;AAA0CA;;AAC/EA;;AAAoEA;AAAA,qBAASH,aAAT;AAAkB,aAAlB;;AAAoBG;;;;AAA2CA;;AACrIA;;;;AA7CqBA;;AAAAA;;AAEhBA;;AAAAA;;AACeA;;AAAAA;;AAEDA;;AAAAA;;AAEUA;;AAAAA;;AAETA;;AAAAA;;AAE2DA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;AAE5BA;;AAAAA;;AAGpBA;;AAAAA;;AAOPA;;AAAAA;;AACZA;;AAAAA;;AAESA;;AAAAA;;AACSA;;AAAAA;;AACVA;;AAAAA;;AACCA;;AAAAA;;AAKGA;;AAAAA;;AAE6EA;;AAAAA;;AAI1DA;;AAAAA;;AACKA;;AAAAA;;AAA8CA;;AAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCjDjF0B;AAEX,2BACUC,YADV,EAEU1J,gBAFV,EAE4C;AAAA;;AADlC;AACA;AACN;;;;iBAEJ,qBAAyC;AAAA;;AAAA,gBAA/B2J,IAA+B,uEAAhB,EAAgB;AAAA,gBAAZC,MAAY;;AACvC,gBAAID,IAAI,IAAIC,MAAZ,EAAoB;AAClB,kBAAMC,KAAK,GAAG,CAACD,MAAM,CAACE,MAAP,IAAiB,EAAlB,EAAsBF,MAAM,CAACG,QAAP,IAAmB,EAAzC,EAA6CH,MAAM,CAACI,UAAP,IAAqB,EAAlE,EAAsEJ,MAAM,CAAChF,KAAP,IAAgB,EAAtF,EAA0FgF,MAAM,CAACK,SAAP,IAAoB,EAA9G,EAAkHL,MAAM,CAACM,MAAP,IAAiB,EAAnI,EAAuIN,MAAM,CAACO,SAAP,IAAoB,EAA3J,EAA+JP,MAAM,CAACQ,SAAP,IAAoB,EAAnL,EAAuLR,MAAM,CAACS,WAAP,IAAsB,EAA7M,EAAiNC,MAAjN,CAAwN,UAACnF,CAAD,EAAIC,CAAJ;AAAA,uBAAUD,CAAC,CAACoF,MAAF,CAASnF,CAAT,CAAV;AAAA,eAAxN,EAA+O,EAA/O,CAAd;AACAyE,mBAAK,CAACrD,OAAN,CAAc,UAACgE,IAAD;AAAA,uBAAeb,IAAI,GAAGA,IAAI,CAACc,OAAL,YAAiBD,IAAI,CAAC1E,EAAtB,8CAAyD,MAAI,CAAC9F,gBAAL,CAAsB0K,OAAtB,CAA8BF,IAAI,CAACvI,IAAnC,CAAzD,sBAA2GuI,IAAI,CAACG,KAAhH,SAAtB;AAAA,eAAd;AACD;;AACDhB,gBAAI,GAAG,CAACA,IAAI,IAAI,EAAT,EACNc,OADM,CACE,SADF,wCACyC,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,oBAA9B,CADzC,oDAEND,OAFM,CAEE,SAFF,wCAEyC,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,oBAA9B,CAFzC,oDAGND,OAHM,CAGE,eAHF,wCAG+C,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,0BAA9B,CAH/C,0DAIND,OAJM,CAIE,SAJF,wCAIyC,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,oBAA9B,CAJzC,oDAKND,OALM,CAKE,SALF,wCAKyC,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,oBAA9B,CALzC,oDAMND,OANM,CAME,QANF,wCAMwC,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,mBAA9B,CANxC,mDAOND,OAPM,CAOE,UAPF,wCAO0C,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,iBAA9B,CAP1C,iDAQND,OARM,CAQE,WARF,wCAQ2C,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,kBAA9B,CAR3C,kDASND,OATM,CASE,YATF,wCAS4C,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,mBAA9B,CAT5C,mDAUND,OAVM,CAUE,WAVF,wCAU2C,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,kBAA9B,CAV3C,kDAWND,OAXM,CAWE,eAXF,wCAW+C,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,sBAA9B,CAX/C,sDAYND,OAZM,CAYE,aAZF,wCAY6C,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,oBAA9B,CAZ7C,0DAaND,OAbM,CAaE,UAbF,wCAa0C,KAAKzK,gBAAL,CAAsB0K,OAAtB,CAA8B,iBAA9B,CAb1C,qDAAP;AAcA,mBAAO,KAAKhB,YAAL,CAAkBkB,uBAAlB,CAA0CjB,IAA1C,CAAP;AACD;;;;;;;yBA3BUF,WAAQoB;AAAA;;;;cAARpB;AAAQqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCFRC;;;;;;;iBAEX,mBAAUnB,MAAV,EAAqB;AACnB;AACA,mBAAOA,MAAM,IAAIA,MAAM,CAACoB,SAAxB;AACD;;;;;;;yBALUD;AAAa;;;;cAAbA;AAAaD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCAbG;AAEX;AAAA;AAAgB;;;;iBAEhB,mBAAUrC,KAAV,EAA6C;AAAA,gBAApBsC,QAAoB,uEAAD,CAAC;AAC3C,mBAAOtC,KAAK,KAAKuC,SAAV,IAAuBvC,KAAK,KAAK,IAAjC,GACHA,KAAK,CAACwC,cAAN,CAAqB,OAArB,EAA8B;AAC5BC,yBAAW,EAAE,IADe;AAE5BC,kCAAoB,EAAE,CAFM;AAG5BC,mCAAqB,EAAE3C,KAAK,GAAG,CAAR,KAAc,CAAd,GAAkBsC,QAAlB,GAA6B,CAHxB;AAI5BM,mCAAqB,EAAE5C,KAAK,GAAG,CAAR,KAAc,CAAd,GAAkBsC,QAAlB,GAA6B;AAJxB,aAA9B,CADG,GAOH,EAPJ;AAQD;;;;;;;yBAbUD;AAAQ;;;;cAARA;AAAQH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCARW;;;;;;;iBAEX,mBAAU7C,KAAV,EAA6C;AAAA,gBAApBsC,QAAoB,uEAAD,CAAC;AAC3C,gBAAIrF,MAAM,CAAC6F,KAAP,CAAa9C,KAAb,CAAJ,EAAyB,OAAO,IAAP;AACzB,gBAAIA,KAAK,GAAG,IAAZ,EAAkB,OAAOA,KAAK,CAAC+C,QAAN,EAAP;AAClB,gBAAMC,QAAQ,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,CAAjB;AACA,gBAAMC,GAAG,GAAGzC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAAC0C,GAAL,CAASlD,KAAT,IAAkBQ,IAAI,CAAC0C,GAAL,CAAS,IAAT,CAA7B,CAAZ;AACA,mBAAO,CAAClD,KAAK,GAAGQ,IAAI,CAAC2C,GAAL,CAAS,IAAT,EAAeF,GAAf,CAAT,EAA8BG,OAA9B,CAAsCd,QAAtC,IAAkDU,QAAQ,CAACC,GAAG,GAAG,CAAP,CAAjE;AACD;;;;;;;yBARUJ;AAAS;;;;cAATA;AAASX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCITmB;;;;;;;iBAIX,mBAAUC,SAAV,EAA0BC,GAA1B,EAAuCC,KAAvC,EAAoD;AAClD,mBAAO,KAAKC,MAAL,CAAY3H,IAAZ,CACL,qDAAI,cAAI,EAAG;AACT,qBAAO4H,UAAS,CAACJ,SAAS,CAACK,QAAV,EAAD,EAAuBC,IAAvB,EAA6BL,GAA7B,EAAkCC,KAAlC,CAAhB;AACD,aAFD,CADK,CAAP;AAKD;;;;;;;yBAVUH;AAAQ;;;;cAARA;AAAQnB;;AAEuB,0DAAzC,qDAAO,UAAC2B,KAAD;AAAA,eAAgBA,KAAK,CAACC,IAAN,CAAWC,KAA3B;AAAA,OAAP,CAAyC;;AAYrC,UAAML,UAAS,GAAG,SAAZA,UAAY,CAACM,IAAD,EAAYC,EAAZ,EAAqBV,GAArB,EAAkCC,KAAlC,EAA2D;AAClF,YAAMU,KAAK,GAAGC,mCAAM,CAACH,IAAD,CAApB;AACA,YAAMI,GAAG,GAAGD,mCAAM,CAACF,EAAD,CAAlB;AACA,YAAMI,OAAO,GAAGF,6CAAgBC,GAAG,CAACE,IAAJ,CAASJ,KAAT,CAAhB,EAAiCK,SAAjC,EAAhB;AACA,eAAOhB,GAAG,GACN/C,IAAI,CAACgE,GAAL,CAASjB,GAAT,EAAc/C,IAAI,CAACC,KAAL,CAAW4D,OAAO,GAAGb,KAArB,CAAd,CADM,GAENhD,IAAI,CAACC,KAAL,CAAW4D,OAAO,GAAGb,KAArB,CAFJ;AAGD,OAPM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCfMiB;AAEX,6BACUC,UADV,EACgC;AAAA;;AAAtB;AACL;;;;iBAEL,uBAAcC,SAAd,EAAiCC,SAAjC,EAAoDvL,IAApD,EAAkEwL,QAAlE,EAAoFC,SAApF,EAAqG;AACnG,mBAAO,KAAKJ,UAAL,CAAgBK,IAAhB,WAAwBC,mFAAxB,qBAAmE;AACxEL,uBAAS,EAAEA,SAD6D;AAExEtL,kBAAI,EAAEA,IAFkE;AAGxEuL,uBAAS,EAAEA,SAH6D;AAIxEC,sBAAQ,EAAEA,QAJ8D;AAKxEC,uBAAS,EAAEA;AAL6D,aAAnE,EAMJvN,SANI,EAAP;AAOD;;;iBAED,qBAAYoN,SAAZ,EAA+BM,KAA/B,EAA4C;AAC1C,mBAAO,KAAKP,UAAL,CAAgBQ,GAAhB,WAAuBF,mFAAvB,sBAA4DL,SAA5D,sBAAiFM,KAAjF,GAA0F1N,SAA1F,EAAP;AACD;;;iBAED,oBAAWoN,SAAX,EAA8BM,KAA9B,EAA2C;AACzC,mBAAO,KAAKP,UAAL,CAAgBQ,GAAhB,WAAuBF,mFAAvB,sBAA4DL,SAA5D,qBAAgFM,KAAhF,GAAyF1N,SAAzF,EAAP;AACD;;;iBAED,iBAAQoN,SAAR,EAA2BM,KAA3B,EAAwC;AACtC,mBAAO,KAAKP,UAAL,CAAgBQ,GAAhB,WAAuBF,mFAAvB,sBAA4DL,SAA5D,kBAA6EM,KAA7E,GAAsF1N,SAAtF,EAAP;AACD;;;iBAED,qBAAYoN,SAAZ,EAA+BQ,MAA/B,EAA+CxF,QAA/C,EAA+D;AAC7D,mBAAO,KAAK+E,UAAL,CAAgBQ,GAAhB,WAAuBF,mFAAvB,sBAA4DL,SAA5D,mBAA8EQ,MAA9E,sBAAgGxF,QAAhG,GAA4GpI,SAA5G,EAAP;AACD;;;iBAED,sBAAaoN,SAAb,EAAgC3G,OAAhC,EAAiD2B,QAAjD,EAAiE;AAC/D,mBAAO,KAAK+E,UAAL,qBAA0BM,mFAA1B,sBAA+DL,SAA/D,mBAAiF3G,OAAjF,sBAAoG2B,QAApG,GAAgH4C,SAAhH,EAA2HhL,SAA3H,EAAP;AACD;;;iBAED,2BAAkBoN,SAAlB,EAAqCS,UAArC,EAAuD;AACrD,mBAAO,KAAKV,UAAL,qBAA0BM,mFAA1B,sBAA+DL,SAA/D,qBAAmFS,UAAnF,iBAA2G7C,SAA3G,EAAsHhL,SAAtH,EAAP;AACD;;;iBAED,uBAAcoN,SAAd,EAAiCU,OAAjC,EAAkDJ,KAAlD,EAA+D;AAC7D,mBAAO,KAAKP,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,sBAAmFU,OAAnF,uBAAuGJ,KAAvG,GAAgH1C,SAAhH,EAA2HhL,SAA3H,EAAP;AACD;;;iBAED,sBAAaoN,SAAb,EAAgCU,OAAhC,EAAiDE,QAAjD,EAAiE;AAC/D,mBAAO,KAAKb,UAAL,CAAgBK,IAAhB,WAAwBC,mFAAxB,sBAA6DL,SAA7D,sBAAkFU,OAAlF,sBAAqGE,QAArG,GAAiHhD,SAAjH,EAA4HhL,SAA5H,EAAP;AACD;;;iBAED,0BAAiBoN,SAAjB,EAAoCa,UAApC,EAAwDD,QAAxD,EAAwE;AACtE,mBAAO,KAAKb,UAAL,CAAgBe,OAAhB,CAAwB,QAAxB,YAAqCT,mFAArC,sBAA0EL,SAA1E,sBAA+Fa,UAA/F,uBAAsHD,QAAtH,GAAkIhD,SAAlI,EAA6IhL,SAA7I,EAAP;AACD;;;iBAED,oBAAWoN,SAAX,EAA8Be,SAA9B,EAAiD5I,IAAjD,EAA6D;AAC3D,mBAAO,KAAK4H,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,sBAAmFe,SAAnF,kBAAoG5I,IAApG,GAA4GyF,SAA5G,EAAuHhL,SAAvH,EAAP;AACD;;;iBAED,kBAASoN,SAAT,EAA4BgB,KAA5B,EAA2C7I,IAA3C,EAAuD;AACrD,mBAAO,KAAK4H,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,qBAAkFgB,KAAlF,oBAAiG7I,IAAjG,GAAyGyF,SAAzG,EAAoHhL,SAApH,EAAP;AACD;;;iBAED,wBAAeoN,SAAf,EAAkCiB,UAAlC,EAAsDjG,QAAtD,EAAsE;AACpE,mBAAO,KAAK+E,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,mBAAgFiB,UAAhF,oBAAoGjG,QAApG,GAAgH4C,SAAhH,EAA2HhL,SAA3H,EAAP;AACD;;;iBAED,2BAAkBoN,SAAlB,EAAqCiB,UAArC,EAAyDjG,QAAzD,EAAyE;AACvE,mBAAO,KAAK+E,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,mBAAgFiB,UAAhF,uBAAuGjG,QAAvG,GAAmH4C,SAAnH,EAA8HhL,SAA9H,EAAP;AACD;;;iBAED,wBAAeoN,SAAf,EAAkCS,UAAlC,EAAsDS,YAAtD,EAA0E;AACxE,mBAAO,KAAKnB,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,qBAAkFS,UAAlF,qBAAuGS,YAAvG,GAAuHtD,SAAvH,EAAkIhL,SAAlI,EAAP;AACD;;;iBAED,oBAAWoN,SAAX,EAA8BhH,IAA9B,EAAyC;AACvC,mBAAO,KAAK+G,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,YAAgF;AACrFhH,kBAAI,EAAEA;AAD+E,aAAhF,EAEJpG,SAFI,EAAP;AAGD;;;iBAED,qBAAYoN,SAAZ,EAA+BmB,MAA/B,EAA6C;AAC3C,mBAAO,KAAKpB,UAAL,CAAgBQ,GAAhB,WAAuBF,mFAAvB,sBAA4DL,SAA5D,uBAAkFmB,MAAlF,GAA4FvO,SAA5F,EAAP;AACD;;;iBAED,uBAAcoN,SAAd,EAAiCY,QAAjC,EAAmDQ,QAAnD,EAAmE;AACjE,mBAAO,KAAKrB,UAAL,CAAgBK,IAAhB,WAAwBC,mFAAxB,sBAA6DL,SAA7D,qBAAiFoB,QAAjF,qBAAoGR,QAApG,GAAgHhD,SAAhH,EAA2HhL,SAA3H,EAAP;AACD;;;iBAED,qBAAYsN,QAAZ,EAA8BC,SAA9B,EAA+C;AAC7C,mBAAO,KAAKJ,UAAL,CAAgBK,IAAhB,WAAwBC,mFAAxB,iBAA+D;AACpEH,sBAAQ,EAAEA,QAD0D;AAEpEC,uBAAS,EAAEA;AAFyD,aAA/D,EAGJvN,SAHI,EAAP;AAID;;;iBAED,oBAAWoN,SAAX,EAA8BC,SAA9B,EAAsDC,QAAtD,EAAwEC,SAAxE,EAA2FzL,IAA3F,EAAuG;AACrG,mBAAO,KAAKqL,UAAL,CAAgBK,IAAhB,WAAwBC,mFAAxB,qBAAmE;AACxEL,uBAAS,EAAEA,SAD6D;AAExEC,uBAAS,EAAEA,SAF6D;AAGxEC,sBAAQ,EAAEA,QAH8D;AAIxEC,uBAAS,EAAEA,SAJ6D;AAKxEzL,kBAAI,EAAEA;AALkE,aAAnE,EAMJ9B,SANI,EAAP;AAOD;;;iBAED,iBAAQ0G,GAAR,EAAqB+H,SAArB,EAA2CnB,QAA3C,EAA8DC,SAA9D,EAAkFzL,IAAlF,EAA+F;AAC7F,mBAAO,KAAKqL,UAAL,CAAgBuB,GAAhB,WAAuBjB,mFAAvB,kBAA+D;AACpE/G,iBAAG,EAAEA,GAD+D;AAEpE+H,uBAAS,EAAEA,SAFyD;AAGpEnB,sBAAQ,EAAEA,QAH0D;AAIpEC,uBAAS,EAAEA,SAJyD;AAKpEzL,kBAAI,EAAEA;AAL8D,aAA/D,EAMJ9B,SANI,EAAP;AAOD;;;iBAED,kBAAS0G,GAAT,EAAsBiI,YAAtB,EAAkDrB,QAAlD,EAAqEC,SAArE,EAAyFzL,IAAzF,EAAsG;AACpG,mBAAO,KAAKqL,UAAL,CAAgBuB,GAAhB,WAAuBjB,mFAAvB,mBAAgE;AACrE/G,iBAAG,EAAEA,GADgE;AAErEiI,0BAAY,EAAEA,YAFuD;AAGrErB,sBAAQ,EAAEA,QAH2D;AAIrEC,uBAAS,EAAEA,SAJ0D;AAKrEzL,kBAAI,EAAEA;AAL+D,aAAhE,EAMJ9B,SANI,EAAP;AAOD;;;iBAED,0BAAc;AACZ,mBAAO,KAAKmN,UAAL,CAAgBuB,GAAhB,WAAuBjB,mFAAvB,qBAAkEzC,SAAlE,EAA6EhL,SAA7E,EAAP;AACD;;;iBAED,oBAAWoN,SAAX,EAA8BwB,OAA9B,EAA+CC,OAA/C,EAAgEC,MAAhE,EAA8E;AAC5E,mBAAO,KAAK3B,UAAL,CAAgBK,IAAhB,WAAwBC,mFAAxB,sBAA6DL,SAA7D,eAAkF;AACvFwB,qBAAO,EAAEA,OAD8E;AAEvFC,qBAAO,EAAEA,OAF8E;AAGvFC,oBAAM,EAAEA;AAH+E,aAAlF,EAIJ9O,SAJI,EAAP;AAKD;;;iBAED,oBAAWoN,SAAX,EAA8B2B,QAA9B,EAA8C;AAC5C,mBAAO,KAAK5B,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,sBAAmF2B,QAAnF,GAA+F/D,SAA/F,EAA0GhL,SAA1G,EAAP;AACD;;;iBAED,uBAAcoN,SAAd,EAAiC4B,SAAjC,EAAoD;AAClD,mBAAO,KAAK7B,UAAL,qBAA0BM,mFAA1B,sBAA+DL,SAA/D,eAAoF;AACzF6B,kBAAI,EAAE;AACJD,yBAAS,EAAEA;AADP;AADmF,aAApF,EAIJhP,SAJI,EAAP;AAKD;;;iBAED,oBAAWoN,SAAX,EAA8B8B,OAA9B,EAA6C;AAC3C,mBAAO,KAAK/B,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,oBAAiF8B,OAAjF,GAA4FlE,SAA5F,EAAuGhL,SAAvG,EAAP;AACD;;;iBAED,sBAAaoN,SAAb,EAAgCtL,IAAhC,EAA8CqN,WAA9C,EAAmE3E,KAAnE,EAAgF;AAC9E,mBAAO,KAAK2C,UAAL,CAAgBuB,GAAhB,WAAuBjB,mFAAvB,kBAA+D;AACpEL,uBAAS,EAAEA,SADyD;AAEpEtL,kBAAI,EAAEA,IAF8D;AAGpEqN,yBAAW,EAAEA,WAHuD;AAIpE3E,mBAAK,EAAEA;AAJ6D,aAA/D,EAKJxK,SALI,EAAP;AAMD;;;iBAED,kBAASoN,SAAT,EAA4BgC,MAA5B,EAA0C;AACxC,mBAAO,KAAKjC,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,mBAAgFgC,MAAhF,YAA+FpE,SAA/F,EAA0GhL,SAA1G,EAAP;AACD;;;iBAED,mBAAUoN,SAAV,EAA6BgC,MAA7B,EAA2C;AACzC,mBAAO,KAAKjC,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,mBAAgFgC,MAAhF,aAAgGpE,SAAhG,EAA2GhL,SAA3G,EAAP;AACD;;;iBAED,qBAAYoN,SAAZ,EAA+BU,OAA/B,EAAgDQ,YAAhD,EAAoE;AAClE,mBAAO,KAAKnB,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,4BAAyFU,OAAzF,qBAA2GQ,YAA3G,GAA2HtD,SAA3H,EAAsIhL,SAAtI,EAAP;AACD;;;iBAED,wBAAeoN,SAAf,EAAkCa,UAAlC,EAAsDK,YAAtD,EAA0E;AACxE,mBAAO,KAAKnB,UAAL,CAAgBY,KAAhB,WAAyBN,mFAAzB,sBAA8DL,SAA9D,+BAA4Fa,UAA5F,qBAAiHK,YAAjH,GAAiItD,SAAjI,EAA4IhL,SAA5I,EAAP;AACD;;;iBAED,2BAAkBoN,SAAlB,EAAqCiC,aAArC,EAA0D;AACxD,mBAAO,KAAKlC,UAAL,qBAA0BM,mFAA1B,sBAA+DL,SAA/D,qBAAmFiC,aAAnF,cAA2GrE,SAA3G,EAAsHhL,SAAtH,EAAP;AACD;;;iBAED,0BAAiBoN,SAAjB,EAAoCkC,aAApC,EAAyD;AACvD,mBAAO,KAAKnC,UAAL,qBAA0BM,mFAA1B,sBAA+DL,SAA/D,qBAAmFkC,aAAnF,aAA0GtE,SAA1G,EAAqHhL,SAArH,EAAP;AACD;;;iBAED,mBAAUoN,SAAV,EAA6BmC,MAA7B,EAA6CC,YAA7C,EAAmEC,MAAnE,EAAiF;AAC/E,mBAAO,KAAKtC,UAAL,CAAgBQ,GAAhB,WAAuBF,mFAAvB,sBAA4DL,SAA5D,yBAAoFmC,MAApF,cAA8FC,YAA9F,cAA8GC,MAA9G,GAAwHzP,SAAxH,EAAP;AACD;;;iBAED,wBAAeoN,SAAf,EAAkCsC,OAAlC,EAAiD;AAC/C,mBAAO,KAAKvC,UAAL,CAAgBK,IAAhB,WAAwBC,mFAAxB,sBAA6DL,SAA7D,0BAAsFsC,OAAtF,GAAiG1E,SAAjG,EAA4GhL,SAA5G,EAAP;AACD;;;iBAED,mBAAUoN,SAAV,EAA6BuC,IAA7B,EAAwCC,IAAxC,EAAoD;AAClD,mBAAO,KAAKzC,UAAL,CAAgBuB,GAAhB,WAAuBjB,mFAAvB,sBAA4DL,SAA5D,YAA8E;AACnFuC,kBAAI,EAAEA,IAD6E;AAEnFC,kBAAI,EAAEA;AAF6E,aAA9E,EAGJ5P,SAHI,EAAP;AAID;;;;;;;yBArMUkN,aAAU2C;AAAA;;;eAAV3C;AAAU4C,iBAAV5C,WAAU;AAAA6C,oBAFT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHd,UAAYC,eAAZ;;AAAA,iBAAYA,cAAZ,EAA0B;AACxBA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACD,OAnBD,EAAYA,eAAc,KAAdA,eAAc,MAA1B;;UAwBaC;AAEX,+BACUvM,gBADV,EAC4C;AAAA;;AAAlC;AACL;;;;iBAEL,aAAIO,UAAJ,EAAsB;AACpB,oBAAQA,UAAR;AACE,mBAAK+L,eAAc,CAACE,KAApB;AACE,uBAAO,KAAKC,QAAL,EAAP;;AACF,mBAAKH,eAAc,CAACI,MAApB;AACE,uBAAO,KAAKC,SAAL,EAAP;;AACF,mBAAKL,eAAc,CAACM,OAApB;AACE,uBAAO,KAAKC,UAAL,EAAP;;AACF,mBAAKP,eAAc,CAACQ,MAApB;AACE,uBAAO,KAAKC,SAAL,EAAP;;AACF,mBAAKT,eAAc,CAACU,QAApB;AACE,uBAAO,KAAKC,WAAL,EAAP;;AACF,mBAAKX,eAAc,CAACY,KAApB;AACE,uBAAO,KAAKC,QAAL,EAAP;;AACF,mBAAKb,eAAc,CAACc,QAApB;AACE,uBAAO,KAAKC,WAAL,EAAP;;AACF,mBAAKf,eAAc,CAACgB,MAApB;AACE,uBAAO,KAAKC,SAAL,EAAP;;AACF,mBAAKjB,eAAc,CAACkB,UAApB;AACE,uBAAO,KAAKC,aAAL,EAAP;;AACF,mBAAKnB,eAAc,CAACoB,UAApB;AACE,uBAAO,KAAKC,aAAL,EAAP;;AACF,mBAAKrB,eAAc,CAACsB,IAApB;AACE,uBAAO,KAAKC,OAAL,EAAP;;AACF,mBAAKvB,eAAc,CAACwB,MAApB;AACE,uBAAO,KAAKC,SAAL,EAAP;;AACF,mBAAKzB,eAAc,CAAC0B,SAApB;AACE,uBAAO,KAAKC,YAAL,EAAP;;AACF,mBAAK3B,eAAc,CAAC4B,KAApB;AACE,uBAAO,KAAKC,QAAL,EAAP;;AACF,mBAAK7B,eAAc,CAAC8B,MAApB;AACE,uBAAO,KAAKC,SAAL,EAAP;;AACF,mBAAK/B,eAAc,CAACgC,SAApB;AACE,uBAAO,KAAKC,YAAL,EAAP;;AACF,mBAAKjC,eAAc,CAACkC,KAApB;AACE,uBAAO,KAAKC,QAAL,EAAP;AAlCJ;AAoCD;;;iBAEK,uBAAW;;;;;;;0BACV7T,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACU,QAApC;;;;;;AACc,6BAAM,KAAKhN,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACU,QAArD,EAA+D/C,GAA/D,GAAqE3N,SAArE,EAAN;;;AAAXqS;AACAC,iCAAWD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACC,OAAD;AAAA,+BAAkBA,OAAO,CAAC5M,IAAR,EAAlB;AAAA,uBAAlB;AACjBvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACU,QAApC,EAA8CgC,IAAI,CAACC,SAAL,oBAAmBL,QAAnB,EAA9C;;;wDAEKI,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACU,QAApC,CAAX;;;;;;;;;AACR;;;iBAEK,oBAAQ;;;;;;;0BACPpS,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACE,KAApC;;;;;;AACc,6BAAM,KAAKxM,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACE,KAArD,EAA4DvC,GAA5D,GAAkE3N,SAAlE,EAAN;;;AAAXqS;AACAQ,8BAAQR,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACC,OAAD;AAAA,+BAAkBA,OAAO,CAAC5M,IAAR,EAAlB;AAAA,uBAAlB;AACdvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACE,KAApC,EAA2CwC,IAAI,CAACC,SAAL,oBAAmBE,KAAnB,EAA3C;;;wDAEKH,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACE,KAApC,CAAX;;;;;;;;;AACR;;;iBAEK,sBAAU;;;;;;;0BACT5R,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACM,OAApC;;;;;;AACc,6BAAM,KAAK5M,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACM,OAArD,EAA8D3C,GAA9D,GAAoE3N,SAApE,EAAN;;;AAAXqS;AACAS,gCAAUT,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACO,MAAD;AAAA,+BAAiBA,MAAM,CAAClN,IAAP,EAAjB;AAAA,uBAAlB;AAChBvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACM,OAApC,EAA6CoC,IAAI,CAACC,SAAL,oBAAmBG,OAAnB,EAA7C;;;wDAEKJ,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACM,OAApC,CAAX;;;;;;;;;AACR;;;iBAEK,qBAAS;;;;;;;0BACRhS,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACI,MAApC;;;;;;AACc,6BAAM,KAAK1M,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACI,MAArD,EAA6DzC,GAA7D,GAAmE3N,SAAnE,EAAN;;;AAAXqS;AACAW,+BAASX,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACS,KAAD;AAAA,+BAAgBA,KAAK,CAACpN,IAAN,EAAhB;AAAA,uBAAlB;AACfvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACI,MAApC,EAA4CsC,IAAI,CAACC,SAAL,oBAAmBK,MAAnB,EAA5C;;;wDAEKN,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACI,MAApC,CAAX;;;;;;;;;AACR;;;iBAEK,qBAAS;;;;;;;0BACR9R,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAAC8B,MAApC;;;;;;AACc,6BAAM,KAAKpO,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAAC8B,MAArD,EAA6DnE,GAA7D,GAAmE3N,SAAnE,EAAN;;;AAAXqS;AACAa,+BAASb,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAAC5O,KAAD;AAAA,+BAAgBA,KAAK,CAACiC,IAAN,EAAhB;AAAA,uBAAlB;AACfvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAAC8B,MAApC,EAA4CY,IAAI,CAACC,SAAL,oBAAmBO,MAAnB,EAA5C;;;wDAEKR,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAAC8B,MAApC,CAAX;;;;;;;;;AACR;;;iBAEK,wBAAY;;;;;;;0BACXxT,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAAC0B,SAApC;;;;;;AACc,6BAAM,KAAKhO,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAAC0B,SAArD,EAAgE/D,GAAhE,GAAsE3N,SAAtE,EAAN;;;AAAXqS;AACAvI,kCAAYuI,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACW,QAAD;AAAA,+BAAmBA,QAAQ,CAACtN,IAAT,EAAnB;AAAA,uBAAlB;AAClBvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAAC0B,SAApC,EAA+CgB,IAAI,CAACC,SAAL,oBAAmB7I,SAAnB,EAA/C;;;yDAEK4I,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAAC0B,SAApC,CAAX;;;;;;;;;AACR;;;iBAEK,yBAAa;;;;;;;0BACZpT,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACkB,UAApC;;;;;;AACc,6BAAM,KAAKxN,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACkB,UAArD,EAAiEvD,GAAjE,GAAuE3N,SAAvE,EAAN;;;AAAXqS;AACAe,mCAAaf,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACa,SAAD;AAAA,+BAAoBA,SAAS,CAACxN,IAAV,EAApB;AAAA,uBAAlB;AACnBvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACkB,UAApC,EAAgDwB,IAAI,CAACC,SAAL,oBAAmBS,UAAnB,EAAhD;;;yDAEKV,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACkB,UAApC,CAAX;;;;;;;;;AACR;;;iBAEK,qBAAS;;;;;;;0BACR5S,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACwB,MAApC;;;;;;AACc,6BAAM,KAAK9N,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACwB,MAArD,EAA6D7D,GAA7D,GAAmE3N,SAAnE,EAAN;;;AAAXqS;AACAiB,+BAASjB,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACe,IAAD;AAAA,+BAAeA,IAAI,CAAC1N,IAAL,EAAf;AAAA,uBAAlB;AACfvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACwB,MAApC,EAA4CkB,IAAI,CAACC,SAAL,oBAAmBW,MAAnB,EAA5C;;;yDAEKZ,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACwB,MAApC,CAAX;;;;;;;;;AACR;;;iBAEK,mBAAO;;;;;;;0BACNlT,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACsB,IAApC;;;;;;AACc,6BAAM,KAAK5N,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACsB,IAArD,EAA2D3D,GAA3D,GAAiE3N,SAAjE,EAAN;;;AAAXqS;AACAmB,6BAAOnB,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACiB,GAAD;AAAA,+BAAcA,GAAG,CAAC5N,IAAJ,EAAd;AAAA,uBAAlB;AACbvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACsB,IAApC,EAA0CoB,IAAI,CAACC,SAAL,oBAAmBa,IAAnB,EAA1C;;;yDAEKd,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACsB,IAApC,CAAX;;;;;;;;;AACR;;;iBAEK,qBAAS;;;;;;;0BACRhT,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACQ,MAApC;;;;;;AACc,6BAAM,KAAK9M,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACQ,MAArD,EAA6D7C,GAA7D,GAAmE3N,SAAnE,EAAN;;;AAAXqS;AACA1I,+BAAS0I,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACkB,KAAD;AAAA,+BAAgBA,KAAK,CAAC7N,IAAN,EAAhB;AAAA,uBAAlB;AACfvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACQ,MAApC,EAA4CkC,IAAI,CAACC,SAAL,oBAAmBhJ,MAAnB,EAA5C;;;yDAEK+I,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACQ,MAApC,CAAX;;;;;;;;;AACR;;;iBAEK,yBAAa;;;;;;;0BACZlS,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACoB,UAApC;;;;;;AACc,6BAAM,KAAK1N,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACoB,UAArD,EAAiEzD,GAAjE,GAAuE3N,SAAvE,EAAN;;;AAAXqS;AACAxI,mCAAawI,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACmB,QAAD;AAAA,+BAAmBA,QAAQ,CAAC9N,IAAT,EAAnB;AAAA,uBAAlB;AACnBvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACoB,UAApC,EAAgDsB,IAAI,CAACC,SAAL,oBAAmB9I,UAAnB,EAAhD;;;yDAEK6I,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACoB,UAApC,CAAX;;;;;;;;;AACR;;;iBAEK,uBAAW;;;;;;;0BACV9S,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACc,QAApC;;;;;;AACc,6BAAM,KAAKpN,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACc,QAArD,EAA+DnD,GAA/D,GAAqE3N,SAArE,EAAN;;;AAAXqS;AACAzI,iCAAWyI,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACoB,MAAD;AAAA,+BAAiBA,MAAM,CAAC/N,IAAP,EAAjB;AAAA,uBAAlB;AACjBvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACc,QAApC,EAA8C4B,IAAI,CAACC,SAAL,oBAAmB/I,QAAnB,EAA9C;;;yDAEK8I,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACc,QAApC,CAAX;;;;;;;;;AACR;;;iBAEK,wBAAY;;;;;;;0BACXxS,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACgC,SAApC;;;;;;AACc,6BAAM,KAAKtO,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACgC,SAArD,EAAgErE,GAAhE,GAAsE3N,SAAtE,EAAN;;;AAAXqS;AACAwB,kCAAYxB,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACsB,QAAD;AAAA,+BAAmBA,QAAQ,CAACjO,IAAT,EAAnB;AAAA,uBAAlB;AAClBvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACgC,SAApC,EAA+CU,IAAI,CAACC,SAAL,oBAAmBkB,SAAnB,EAA/C;;;yDAEKnB,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACgC,SAApC,CAAX;;;;;;;;;AACR;;;iBAEK,oBAAQ;;;;;;;0BACP1T,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACY,KAApC;;;;;;AACc,6BAAM,KAAKlN,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACY,KAArD,EAA4DjD,GAA5D,GAAkE3N,SAAlE,EAAN;;;AAAXqS;AACA5N,8BAAQ4N,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACrL,IAAD;AAAA,+BAAeA,IAAI,CAACtB,IAAL,EAAf;AAAA,uBAAlB;AACdvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACY,KAApC,EAA2C8B,IAAI,CAACC,SAAL,oBAAmBlO,KAAnB,EAA3C;;;yDAEKiO,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACY,KAApC,CAAX;;;;;;;;;AACR;;;iBAEK,qBAAS;;;;;;;0BACRtS,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACgB,MAApC;;;;;;AACc,6BAAM,KAAKtN,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACgB,MAArD,EAA6DrD,GAA7D,GAAmE3N,SAAnE,EAAN;;;AAAXqS;AACAtI,+BAASsI,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACuB,KAAD;AAAA,+BAAgBA,KAAK,CAAClO,IAAN,EAAhB;AAAA,uBAAlB;AACfvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACgB,MAApC,EAA4C0B,IAAI,CAACC,SAAL,oBAAmB5I,MAAnB,EAA5C;;;yDAEK2I,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACgB,MAApC,CAAX;;;;;;;;;AACR;;;iBAEK,oBAAQ;;;;;;;0BACP1S,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAAC4B,KAApC;;;;;;AACc,6BAAM,KAAKlO,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAAC4B,KAArD,EAA4DjE,GAA5D,GAAkE3N,SAAlE,EAAN;;;AAAXqS;AACA2B,8BAAQ3B,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAACyB,IAAD;AAAA,+BAAeA,IAAI,CAACpO,IAAL,EAAf;AAAA,uBAAlB;AACdvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAAC4B,KAApC,EAA2Cc,IAAI,CAACC,SAAL,oBAAmBqB,KAAnB,EAA3C;;;yDAEKtB,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAAC4B,KAApC,CAAX;;;;;;;;;AACR;;;iBAEK,oBAAQ;;;;;;;0BACPtT,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACkC,KAApC;;;;;;AACc,6BAAM,KAAKxO,gBAAL,CAAsBO,UAAtB,CAAsC+L,eAAc,CAACkC,KAArD,EAA4DvE,GAA5D,GAAkE3N,SAAlE,EAAN;;;AAAXqS;AACA6B,8BAAQ7B,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,UAAC2B,IAAD;AAAA,+BAAeA,IAAI,CAACtO,IAAL,EAAf;AAAA,uBAAlB;AACdvH,kCAAY,CAACC,OAAb,CAAqByR,eAAc,CAACkC,KAApC,EAA2CQ,IAAI,CAACC,SAAL,oBAAmBuB,KAAnB,EAA3C;;;yDAEKxB,IAAI,CAACE,KAAL,CAAWtU,YAAY,CAAC8T,OAAb,CAAqBpC,eAAc,CAACkC,KAApC,CAAX;;;;;;;;;AACR;;;;;;;yBApMUjC,eAAYJ;AAAA;;;eAAZI;AAAYH,iBAAZG,aAAY;AAAAF,oBAFX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCdDqE;AAIX,mCACUC,QADV,EAEUC,wBAFV,EAGUC,cAHV,EAGwC;AAAA;;AAF9B;AACA;AACA;AACL;;;;iBAEE,yBAAmBC,SAAnB,EAAuCC,cAAvC,EAAyE;AAC9E,gBAAMC,gBAAgB,GAAG,KAAKJ,wBAAL,CAA8BK,uBAA9B,CAAsDH,SAAtD,CAAzB;AACA,mFAAeA,SAAf;AACA,iBAAKI,YAAL,GAAoBF,gBAAgB,CAACG,MAAjB,CAAwB,KAAKR,QAA7B,CAApB;AACA,gBAAII,cAAJ,EAAoBA,cAAc,CAAC,KAAKG,YAAL,CAAkBE,QAAnB,CAAd;AACpB,iBAAKP,cAAL,CAAoBQ,UAApB,CAA+B,KAAKH,YAAL,CAAkBI,QAAjD;AACA,gBAAMC,GAAG,GAAGvW,QAAQ,CAACwW,aAAT,CAAuB,KAAvB,CAAZ;AACAD,eAAG,CAACE,WAAJ,CAAgB,KAAKP,YAAL,CAAkBd,QAAlB,CAA2BsB,aAA3C;AACA,mBAAO;AACLC,kBAAI,EAAEJ,GADD;AAEL5Q,iBAAG,EAAE,KAAKuQ;AAFL,aAAP;AAID;;;;;;;yBAtBUR,mBAAgBvE;AAAA;;;eAAhBuE;AAAgBtE,iBAAhBsE,iBAAgB;AAAArE,oBAFf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCJDuF;AAEX;AAAA;AAAiB;;;;iBAEV,yBAAgBC,QAAhB,EAAqC;AAC1CA,oBAAQ,CAACvW,cAAT,CAAwB;AAAED,sBAAQ,EAAE,QAAZ;AAAsByW,mBAAK,EAAE,OAA7B;AAAsCC,oBAAM,EAAE;AAA9C,aAAxB;AACD;;;iBAEM,uBAAwC;AAAA,gBAA5BF,QAA4B,uEAAJ,IAAI;;AAC7C,gBAAIA,QAAJ,EAAc;AACZA,sBAAQ,CAACG,MAAT,CAAgB,CAAhB,EAAmB,CAAnB;AACD,aAFD,MAEO;AACL9W,oBAAM,CAAC8W,MAAP,CAAc,CAAd,EAAiB,CAAjB;AACD;AACF;;;;;;;yBAdUJ;AAAU;;;eAAVA;AAAUxF,iBAAVwF,WAAU;AAAAvF,oBAFT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCQD4F;AAyCX,kCACUjS,gBADV,EAEUkS,eAFV,EAGUzI,UAHV,EAGgC;AAAA;;AAFtB;AACA;AACA;AA1CV,yBAAiB,EAAjB;AACA,0BAAkB,EAAlB;AACA,0BAAkB,EAAlB;AACA,4BAAoB,EAApB;AACA,sBAAc,EAAd;AACA,2BAAmB,EAAnB;AACA,wBAAgB,EAAhB;AACA,4BAAoB,EAApB;AACA,wBAAgB,EAAhB;AACA,uBAAe,EAAf;AACA,uBAAe,EAAf;AACA,wBAAgB,EAAhB;AACA,2BAAmB,EAAnB;AACA,wBAAgB,EAAhB;AACA,wBAAgB,EAAhB;AACA,0BAAkB,EAAlB;AACA,yBAAiB,EAAjB;AACA,uBAAe,EAAf;AACA,uBAAe,EAAf;AAEA,+BAAuB,EAAvB;AACA,gCAAwB,EAAxB;AACA,gCAAwB,EAAxB;AACA,kCAA0B,EAA1B;AACA,4BAAoB,EAApB;AACA,iCAAyB,EAAzB;AACA,8BAAsB,EAAtB;AACA,kCAA0B,EAA1B;AACA,8BAAsB,EAAtB;AACA,6BAAqB,EAArB;AACA,6BAAqB,EAArB;AACA,8BAAsB,EAAtB;AACA,iCAAyB,EAAzB;AACA,8BAAsB,EAAtB;AACA,8BAAsB,EAAtB;AACA,+BAAuB,EAAvB;AACA,6BAAqB,EAArB;AACA,6BAAqB,EAArB;AAMK;;;;iBAEC,sBAAa0I,OAAb,EAAyB;;;;;;AAC7B;AACA,0BAAIA,OAAO,CAACpD,OAAZ,EAAqB,KAAKqD,UAAL,CAAgBD,OAAhB,EAAyB,SAAzB,EAAoC,KAAKE,cAAzC;AACrB,0BAAIF,OAAO,CAAC7L,SAAZ,EAAuB,KAAK8L,UAAL,CAAgBD,OAAhB,EAAyB,WAAzB,EAAsC,KAAKvD,QAA3C;AACvB,0BAAIuD,OAAO,CAAC5L,SAAZ,EAAuB,KAAK6L,UAAL,CAAgBD,OAAhB,EAAyB,WAAzB,EAAsC,KAAKvD,QAA3C,GACvB;;AACA,0BAAIuD,OAAO,CAAClM,MAAZ,EAAoB,KAAKmM,UAAL,CAAgBD,OAAhB,EAAyB,QAAzB,EAAmC,KAAKlM,MAAxC;AACpB,0BAAIkM,OAAO,CAAC1O,IAAZ,EAAkB,KAAK2O,UAAL,CAAgBD,OAAhB,EAAyB,MAAzB,EAAiC,KAAKG,WAAtC;AAClB,0BAAIH,OAAO,CAACpR,KAAZ,EAAmB,KAAKqR,UAAL,CAAgBD,OAAhB,EAAyB,OAAzB,EAAkC,KAAKG,WAAvC;AACnB,0BAAIH,OAAO,CAAChM,UAAZ,EAAwB,KAAKiM,UAAL,CAAgBD,OAAhB,EAAyB,YAAzB,EAAuC,KAAKhM,UAA5C;AACxB,0BAAIgM,OAAO,CAAC3L,WAAZ,EAAyB,KAAK4L,UAAL,CAAgBD,OAAhB,EAAyB,aAAzB,EAAwC,KAAKhM,UAA7C;AACzB,0BAAIgM,OAAO,CAACjM,QAAZ,EAAsB,KAAKkM,UAAL,CAAgBD,OAAhB,EAAyB,UAAzB,EAAqC,KAAKjM,QAA1C;AACtB,0BAAIiM,OAAO,CAAC9B,KAAZ,EAAmB,KAAK+B,UAAL,CAAgBD,OAAhB,EAAyB,OAAzB,EAAkC,KAAKI,YAAvC;AACnB,0BAAIJ,OAAO,CAAC9L,MAAZ,EAAoB,KAAK+L,UAAL,CAAgBD,OAAhB,EAAyB,QAAzB,EAAmC,KAAKI,YAAxC,GACpB;AACA;AACA;;AACA,0BAAIJ,OAAO,CAAC/L,SAAZ,EAAuB,KAAKgM,UAAL,CAAgBD,OAAhB,EAAyB,WAAzB,EAAsC,KAAK/L,SAA3C;AACvB,0BAAI+L,OAAO,CAAC3B,KAAZ,EAAmB,KAAK4B,UAAL,CAAgBD,OAAhB,EAAyB,OAAzB,EAAkC,KAAK3B,KAAvC,EAA8C,IAA9C;;;;;;;;;AACpB;;;iBAED,oBAAW2B,OAAX,EAAyBK,aAAzB,EAAgDjS,UAAhD,EAA6F;AAAA;;AAAA,gBAA1BkS,SAA0B,uEAAL,KAAK;;AAC3F,gBAAIN,OAAO,CAACK,aAAD,CAAP,YAAkCE,KAAtC,EAA6C;AAC3CP,qBAAO,CAACK,aAAD,CAAP,CAAuB7P,OAAvB,CAA+B,UAACgQ,UAAD,EAAkBC,eAAlB,EAA2CC,eAA3C,EAAqE;AAClG,oBAAI,OAAOF,UAAP,KAAsB,QAA1B,EAAoC;AAClCR,yBAAO,CAACK,aAAD,CAAP,CAAuBI,eAAvB,IAA0C5D,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe1O,UAAU,CAACuS,IAAX,CAAgB,YAAE;AAAA,2BAAIC,EAAE,CAAC,IAAD,CAAF,KAAaJ,UAAU,CAAC/L,OAAX,CAAmB,cAAnB,EAAmC,EAAnC,CAAjB;AAAA,mBAAlB,CAAf,CAAX,CAA1C;;AACA,sBAAI6L,SAAJ,EAAe;AACb,0BAAI,CAACL,UAAL,CAAgBD,OAAO,CAACK,aAAD,CAAP,CAAuBI,eAAvB,CAAhB,EAAyD,OAAzD,EAAkE,MAAI,CAACpC,KAAvE,EAA8E,IAA9E;AACD;AACF;AACF,eAPD;AAQA2B,qBAAO,CAACK,aAAD,CAAP,GAAyBC,SAAS,GAC9BN,OAAO,CAACK,aAAD,CAAP,CAAuBQ,KAAvB,GAA+B3R,IAA/B,CAAoC,UAACC,CAAD,EAASC,CAAT;AAAA,uBAAoB,EAAC,SAAD,KAAC,WAAD,GAAC,MAAD,IAAC,CAAEF,IAAH,KAAUE,CAAC,SAAD,KAAC,WAAD,GAAC,MAAD,IAAC,CAAEF,IAAb,CAApB;AAAA,eAApC,CAD8B,GAE9B8Q,OAAO,CAACK,aAAD,CAAP,CAAuBQ,KAAvB,GAA+B3R,IAA/B,CAAoC,UAACC,CAAD,EAASC,CAAT;AAAA,uBAAoBD,CAAC,SAAD,KAAC,WAAD,GAAC,MAAD,IAAC,CAAElD,IAAH,CAAQ6U,aAAR,CAAsB1R,CAAC,SAAD,KAAC,WAAD,GAAC,MAAD,IAAC,CAAEnD,IAAzB,CAApB;AAAA,eAApC,CAFJ;AAGD;;AACD,gBAAI,OAAO+T,OAAO,CAACK,aAAD,CAAd,KAAkC,QAAtC,EAAgD;AAC9CL,qBAAO,CAACK,aAAD,CAAP,GAAyBxD,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe1O,UAAU,CAACuS,IAAX,CAAgB,YAAE;AAAA,uBAAIC,EAAE,CAAC,IAAD,CAAF,KAAaZ,OAAO,CAACK,aAAD,CAAP,CAAuB5L,OAAvB,CAA+B,cAA/B,EAA+C,EAA/C,CAAjB;AAAA,eAAlB,CAAf,CAAX,CAAzB;AACD;AACF;;;iBAEK,wBAAY;;;;;;;AACD,6BAAM,KAAK6C,UAAL,CAAgBQ,GAAhB,CAA2B,8BAA3B,EAA2D3N,SAA3D,EAAN;;;AAAf,2BAAK8S;;AACW,6BAAM,KAAK3F,UAAL,CAAgBQ,GAAhB,CAA2B,+BAA3B,EAA4D3N,SAA5D,EAAN;;;AAAhB,2BAAKsS;;AACW,6BAAM,KAAKnF,UAAL,CAAgBQ,GAAhB,CAA2B,+BAA3B,EAA4D3N,SAA5D,EAAN;;;AAAhB,2BAAK4J;;AACa,6BAAM,KAAKuD,UAAL,CAAgBQ,GAAhB,CAA2B,iCAA3B,EAA8D3N,SAA9D,EAAN;;;AAAlB,2BAAK6J;;AACO,6BAAM,KAAKsD,UAAL,CAAgBQ,GAAhB,CAA2B,2BAA3B,EAAwD3N,SAAxD,EAAN;;;AAAZ,2BAAKwT;;AACY,6BAAM,KAAKrG,UAAL,CAAgBQ,GAAhB,CAA2B,gCAA3B,EAA6D3N,SAA7D,EAAN;;;AAAjB,2BAAK8J;;AACS,6BAAM,KAAKqD,UAAL,CAAgBQ,GAAhB,CAA2B,6BAA3B,EAA0D3N,SAA1D,EAAN;;;AAAd,2BAAK2J;;AACa,6BAAM,KAAKwD,UAAL,CAAgBQ,GAAhB,CAA2B,iCAA3B,EAA8D3N,SAA9D,EAAN;;;AAAlB,2BAAKoT;;AACS,6BAAM,KAAKjG,UAAL,CAAgBQ,GAAhB,CAA2B,6BAA3B,EAA0D3N,SAA1D,EAAN;;;AAAd,2BAAKgT;;AACQ,6BAAM,KAAK7F,UAAL,CAAgBQ,GAAhB,CAA2B,4BAA3B,EAAyD3N,SAAzD,EAAN;;;AAAb,2BAAKyE;;AACQ,6BAAM,KAAK0I,UAAL,CAAgBQ,GAAhB,CAA2B,4BAA3B,EAAyD3N,SAAzD,EAAN;;;AAAb,2BAAKgU;;AACS,6BAAM,KAAK7G,UAAL,CAAgBQ,GAAhB,CAA2B,6BAA3B,EAA0D3N,SAA1D,EAAN;;;AAAd,2BAAKkT;;AACY,6BAAM,KAAK/F,UAAL,CAAgBQ,GAAhB,CAA2B,gCAA3B,EAA6D3N,SAA7D,EAAN;;;AAAjB,2BAAK6T;;AACS,6BAAM,KAAK1G,UAAL,CAAgBQ,GAAhB,CAA2B,6BAA3B,EAA0D3N,SAA1D,EAAN;;;AAAd,2BAAK+J;;AACS,6BAAM,KAAKoD,UAAL,CAAgBQ,GAAhB,CAA2B,6BAA3B,EAA0D3N,SAA1D,EAAN;;;AAAd,2BAAKsT;;AACU,6BAAM,KAAKnG,UAAL,CAAgBQ,GAAhB,CAA2B,8BAA3B,EAA2D3N,SAA3D,EAAN;;;AAAf,2BAAK4W;;AACQ,6BAAM,KAAKzJ,UAAL,CAAgBQ,GAAhB,CAA2B,4BAA3B,EAAyD3N,SAAzD,EAAN;;;AAAb,2BAAKkU;;AACQ,6BAAM,KAAK/G,UAAL,CAAgBQ,GAAhB,CAA2B,4BAA3B,EAAyD3N,SAAzD,EAAN;;;AAAb,2BAAK6S;;;;;;;;;AACN;;;iBAEK,wBAAe5O,UAAf,EAAmC4S,QAAnC,EAAoDC,KAApD,EAAwF;;;;;;;;AAC5FD,8BAAQ,CAACxQ,OAAT,CAAiB,UAACwP,OAAD,EAAetP,KAAf,EAAgC;AAC/CsP,+BAAO,CAACkB,MAAR,GAAiBxQ,KAAjB;;AACA,4BAAIsP,OAAO,CAAC9J,SAAZ,EAAuB;AACrB8J,iCAAO,CAAC9J,SAAR,GAAoBa,mCAAM,CAACiJ,OAAO,CAAC9J,SAAT,EAAoB,YAApB,EAAkC,IAAlC,CAAN,CAA8CiL,MAA9C,EAApB;AACD;;AACDF,6BAAK,CAACG,GAAN,CAAU,MAAI,CAACvT,gBAAL,CAAsBO,UAAtB,CAAiCA,UAAjC,EAA6CiT,GAA7C,CAAiDrB,OAAO,CAAClQ,EAAzD,EAA6DtB,GAAvE,EAA4EwR,OAA5E;AACD,uBAND;;;;;;;;;AAOD;;;iBAED,sBAAasB,QAAb,EAAuC;AAAA;;AACrC,iBAAKvB,eAAL,CAAqBwB,SAArB,CAA+BlZ,SAA/B,CAAyC,UAAMmZ,IAAN;AAAA,qBAAc;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BACjDA,IAAI,IAAIF,QAAQ,CAACrR,MADgC;AAAA;AAAA;AAAA;;AAE7CgR,6BAF6C,GAErC,KAAKpT,gBAAL,CAAsB4T,SAAtB,CAAgCR,KAAhC,EAFqC;AAAA;AAGnD,+BAAM,KAAKS,YAAL,EAAN;;AAHmD;AAInD,6BAAKxB,cAAL,GAAsBrD,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKL,QAApB,CAAX,CAAtB;AACA,6BAAKyD,cAAL,CAAoB1P,OAApB,CAA4B,iBAAO;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkB/E,OAAlB,CAAJ;AAAA,yBAAnC;;AACA,4BAAI0E,QAAQ,CAACM,QAAT,CAAkBC,mEAAlB,CAAJ,EAAgD;AAC9C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,mEAAvB;AACA,+BAAKC,cAAL,CAAoBD,mEAApB,EAA6C,KAAK3B,cAAlD,EAAkEe,KAAlE;AACD;;AACD,6BAAKc,aAAL,GAAqBlF,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKG,OAApB,CAAX,CAArB;AACA,6BAAK8E,aAAL,CAAmBvR,OAAnB,CAA2B,gBAAM;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBzE,MAAlB,CAAJ;AAAA,yBAAjC;;AACA,4BAAIoE,QAAQ,CAACM,QAAT,CAAkBC,kEAAlB,CAAJ,EAA+C;AAC7C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,kEAAvB;AACA,+BAAKC,cAAL,CAAoBD,kEAApB,EAA4C,KAAKE,aAAjD,EAAgEd,KAAhE;AACD;;AACD,6BAAKe,YAAL,GAAoBnF,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKK,MAApB,CAAX,CAApB;AACA,6BAAK6E,YAAL,CAAkBxR,OAAlB,CAA0B,eAAK;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBvE,KAAlB,CAAJ;AAAA,yBAA/B;;AACA,4BAAIkE,QAAQ,CAACM,QAAT,CAAkBC,iEAAlB,CAAJ,EAA8C;AAC5C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,iEAAvB;AACA,+BAAKC,cAAL,CAAoBD,iEAApB,EAA2C,KAAKG,YAAhD,EAA8Df,KAA9D;AACD;;AACD,6BAAKgB,cAAL,GAAsBpF,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAK/I,QAApB,CAAX,CAAtB;AACA,6BAAKkO,cAAL,CAAoBzR,OAApB,CAA4B,gBAAM;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkB5D,MAAlB,CAAJ;AAAA,yBAAlC;;AACA,4BAAIuD,QAAQ,CAACM,QAAT,CAAkBC,mEAAlB,CAAJ,EAAgD;AAC9C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,mEAAvB;AACA,+BAAKC,cAAL,CAAoBD,mEAApB,EAA6C,KAAKI,cAAlD,EAAkEhB,KAAlE;AACD;;AACD,6BAAKiB,gBAAL,GAAwBrF,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAK9I,UAApB,CAAX,CAAxB;AACA,6BAAKkO,gBAAL,CAAsB1R,OAAtB,CAA8B,kBAAQ;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkB7D,QAAlB,CAAJ;AAAA,yBAAtC;;AACA,4BAAIwD,QAAQ,CAACM,QAAT,CAAkBC,qEAAlB,CAAJ,EAAkD;AAChD1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,qEAAvB;AACA,+BAAKC,cAAL,CAAoBD,qEAApB,EAA+C,KAAKK,gBAApD,EAAsEjB,KAAtE;AACD;;AACD,6BAAKkB,UAAL,GAAkBtF,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKa,IAApB,CAAX,CAAlB;AACA,6BAAKwE,UAAL,CAAgB3R,OAAhB,CAAwB,aAAG;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkB/D,GAAlB,CAAJ;AAAA,yBAA3B;;AACA,4BAAI0D,QAAQ,CAACM,QAAT,CAAkBC,+DAAlB,CAAJ,EAA4C;AAC1C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,+DAAvB;AACA,+BAAKC,cAAL,CAAoBD,+DAApB,EAAyC,KAAKM,UAA9C,EAA0DlB,KAA1D;AACD;;AACD,6BAAKmB,eAAL,GAAuBvF,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAK7I,SAApB,CAAX,CAAvB;AACA,6BAAKmO,eAAL,CAAqB5R,OAArB,CAA6B,kBAAQ;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBrE,QAAlB,CAAJ;AAAA,yBAArC;;AACA,4BAAIgE,QAAQ,CAACM,QAAT,CAAkBC,oEAAlB,CAAJ,EAAiD;AAC/C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,oEAAvB;AACA,+BAAKC,cAAL,CAAoBD,oEAApB,EAA8C,KAAKO,eAAnD,EAAoEnB,KAApE;AACD;;AACD,6BAAKoB,gBAAL,GAAwBxF,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKS,UAApB,CAAX,CAAxB;AACA,6BAAK8E,gBAAL,CAAsB7R,OAAtB,CAA8B,mBAAS;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBnE,SAAlB,CAAJ;AAAA,yBAAvC;;AACA,4BAAI8D,QAAQ,CAACM,QAAT,CAAkBC,qEAAlB,CAAJ,EAAkD;AAChD1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,qEAAvB;AACA,+BAAKC,cAAL,CAAoBD,qEAApB,EAA+C,KAAKQ,gBAApD,EAAsEpB,KAAtE;AACD;;AACD,6BAAKqB,YAAL,GAAoBzF,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKhJ,MAApB,CAAX,CAApB;AACA,6BAAKwO,YAAL,CAAkB9R,OAAlB,CAA0B,eAAK;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkB9D,KAAlB,CAAJ;AAAA,yBAA/B;;AACA,4BAAIyD,QAAQ,CAACM,QAAT,CAAkBC,iEAAlB,CAAJ,EAA8C;AAC5C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,iEAAvB;AACA,+BAAKC,cAAL,CAAoBD,iEAApB,EAA2C,KAAKS,YAAhD,EAA8DrB,KAA9D;AACD;;AACD,6BAAKd,WAAL,GAAmBtD,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKlO,KAApB,CAAX,CAAnB;AACA,6BAAKuR,WAAL,CAAiB3P,OAAjB,CAAyB,cAAI;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBrQ,IAAlB,CAAJ;AAAA,yBAA7B;;AACA,4BAAIgQ,QAAQ,CAACM,QAAT,CAAkBC,gEAAlB,CAAJ,EAA6C;AAC3C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,gEAAvB;AACA,+BAAKC,cAAL,CAAoBD,gEAApB,EAA0C,KAAK1B,WAA/C,EAA4Dc,KAA5D;AACD;;AACD,6BAAKb,YAAL,GAAoBvD,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAK5I,MAApB,CAAX,CAApB;AACA,6BAAKkM,YAAL,CAAkB5P,OAAlB,CAA0B,eAAK;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBzD,KAAlB,CAAJ;AAAA,yBAA/B;;AACA,4BAAIoD,QAAQ,CAACM,QAAT,CAAkBC,iEAAlB,CAAJ,EAA8C;AAC5C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,iEAAvB;AACA,+BAAKC,cAAL,CAAoBD,iEAApB,EAA2C,KAAKzB,YAAhD,EAA8Da,KAA9D;AACD;;AACD,6BAAKsB,WAAL,GAAmB1F,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKqB,KAApB,CAAX,CAAnB;AACA,6BAAKoE,WAAL,CAAiB/R,OAAjB,CAAyB,cAAI;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBvD,IAAlB,CAAJ;AAAA,yBAA7B;;AACA,4BAAIkD,QAAQ,CAACM,QAAT,CAAkBC,gEAAlB,CAAJ,EAA6C;AAC3C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,gEAAvB;AACA,+BAAKC,cAAL,CAAoBD,gEAApB,EAA0C,KAAKU,WAA/C,EAA4DtB,KAA5D;AACD;;AACD,6BAAKuB,YAAL,GAAoB3F,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKW,MAApB,CAAX,CAApB;AACA,6BAAK+E,YAAL,CAAkBhS,OAAlB,CAA0B,cAAI;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBjE,IAAlB,CAAJ;AAAA,yBAA9B;;AACA,4BAAI4D,QAAQ,CAACM,QAAT,CAAkBC,iEAAlB,CAAJ,EAA8C;AAC5C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,iEAAvB;AACA,+BAAKC,cAAL,CAAoBD,iEAApB,EAA2C,KAAKW,YAAhD,EAA8DvB,KAA9D;AACD;;AACD,6BAAKwB,YAAL,GAAoB5F,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKO,MAApB,CAAX,CAApB;AACA,6BAAKoF,YAAL,CAAkBjS,OAAlB,CAA0B,eAAK;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkB5T,KAAlB,CAAJ;AAAA,yBAA/B;;AACA,4BAAIuT,QAAQ,CAACM,QAAT,CAAkBC,iEAAlB,CAAJ,EAA8C;AAC5C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,iEAAvB;AACA,+BAAKC,cAAL,CAAoBD,iEAApB,EAA2C,KAAKY,YAAhD,EAA8DxB,KAA9D;AACD;;AACD,6BAAKyB,eAAL,GAAuB7F,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKkB,SAApB,CAAX,CAAvB;AACA,6BAAK0E,eAAL,CAAqBlS,OAArB,CAA6B,eAAK;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBgB,KAAlB,CAAJ;AAAA,yBAAlC;;AACA,4BAAIrB,QAAQ,CAACM,QAAT,CAAkBC,oEAAlB,CAAJ,EAAiD;AAC/C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,oEAAvB;AACA,+BAAKC,cAAL,CAAoBD,oEAApB,EAA8C,KAAKa,eAAnD,EAAoEzB,KAApE;AACD;;AACD,6BAAK2B,aAAL,GAAqB/F,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKiE,OAApB,CAAX,CAArB;AACA,6BAAK6B,aAAL,CAAmBpS,OAAnB,CAA2B,gBAAM;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBkB,MAAlB,CAAJ;AAAA,yBAAjC;;AACA,4BAAIvB,QAAQ,CAACM,QAAT,CAAkBC,kEAAlB,CAAJ,EAA+C;AAC7C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,kEAAvB;AACA,+BAAKC,cAAL,CAAoBD,kEAApB,EAA4C,KAAKe,aAAjD,EAAgE3B,KAAhE;AACD;;AACD,6BAAK6B,WAAL,GAAmBjG,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKuB,KAApB,CAAX,CAAnB;AACA,6BAAKyE,WAAL,CAAiBtS,OAAjB,CAAyB,cAAI;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBrD,IAAlB,CAAJ;AAAA,yBAA7B;;AACA,4BAAIgD,QAAQ,CAACM,QAAT,CAAkBC,gEAAlB,CAAJ,EAA6C;AAC3C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,gEAAvB;AACA,+BAAKC,cAAL,CAAoBD,gEAApB,EAA0C,KAAKiB,WAA/C,EAA4D7B,KAA5D;AACD;;AACD,6BAAK8B,WAAL,GAAmBlG,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAe,KAAKE,KAApB,CAAX,CAAnB;AACA,6BAAK+F,WAAL,CAAiBvS,OAAjB,CAAyB,cAAI;AAAA,iCAAI,MAAI,CAACmR,YAAL,CAAkBqB,IAAlB,CAAJ;AAAA,yBAA7B;;AACA,4BAAI1B,QAAQ,CAACM,QAAT,CAAkBC,gEAAlB,CAAJ,EAA6C;AAC3C1Q,iCAAO,CAAC2E,GAAR,mBAAuB+L,gEAAvB;AACA,+BAAKC,cAAL,CAAoBD,gEAApB,EAA0C,KAAKkB,WAA/C,EAA4D9B,KAA5D;AACD;;AA/GkD;AAgHnD,+BAAMA,KAAK,CAACgC,MAAN,EAAN;;AAhHmD;AAiHnD9R,+BAAO,CAAC2E,GAAR,CAAY,kBAAZ;;AAjHmD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAd;AAAA,aAAzC;AAoHD;;;;;;;yBA3OUgK,kBAAeoD;AAAA;;;eAAfpD;AAAe7F,iBAAf6F,gBAAe;AAAA5F,oBAFd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCHDiJ;AAIX;AAAA;;AAFO,yBAAmB,KAAnB,CAEP,CAFiC;AAEhB;;;;iBAEjB,wBAAY;AACV,iBAAKC,OAAL,GAAe,IAAf;AACD;;;iBAED,uBAAW;AACT,iBAAKA,OAAL,GAAe,KAAf;AACD;;;;;;;yBAZUD;AAAc;;;eAAdA;AAAclJ,iBAAdkJ,eAAc;AAAAjJ,oBAFb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCsBDmJ;AASX,gCACUC,gBADV,EAEUvV,KAFV,EAGUE,UAHV,EAIUH,mBAJV,EAIkD;AAAA;;AAHxC;AACA;AACA;AACA;AAXF,wBAAUyV,sCAAV;AACD,qBAAoB,IAApB;AACA,yBAAoB,EAApB;AACC,wBAAiB,EAAjB;AACA,qBAAc,KAAKxV,KAAL,CAAWG,cAAX,CAA0BsV,yEAA1B,CAAd;AACA,8BAAuB,IAAvB;AAQN,eAAKC,MAAL,CAAYC,WAAZ,GAA0BC,+EAA1B;AACD;;;;iBAED,oBAAW/T,SAAX,EAA0C;AAAA;;AACxC,iBAAKgU,YAAL,GAAoB7a,MAAM,CAAC8a,gBAAP,CAAwBhb,QAAQ,CAACuQ,IAAjC,EAAuC0K,gBAAvC,CAAwD,iBAAxD,CAApB;AACA,iBAAKnH,GAAL,GAAW,IAAI4G,0CAAJ,CAAiB;AAC1B3T,uBAAS,EAAEA,SADe;AAE1BmU,mBAAK,EAAEJ,kFAA2B,gBAFR;AAG1BK,oBAAM,EAAE,CAACL,6EAAD,EAAyBA,6EAAzB,CAHkB;AAI1BM,mBAAK,EAAEN,+EAJmB;AAK1BO,kBAAI,EAAEP,8EALoB;AAM1BQ,uBAAS,EAAE,KANe;AAO1BC,qBAAO,EAAE,IAPiB;AAQ1BC,wBAAU,EAAE,IARc;AAS1BC,gCAAkB,EAAE,IATM;AAU1BC,yBAAW,EAAE;AAVa,aAAjB,CAAX;AAYA,iBAAK5H,GAAL,CAAS6H,IAAT,CAAc,MAAd,EAAsB,YAAK;AACzB;AACA,oBAAI,CAAC7H,GAAL,CAAS8H,MAAT,CAAgB;AACdC,qBAAK,EAAE,CAAC,GAAD,EAAM,IAAN,CADO;AAEdC,qBAAK,EAAE,SAFO;AAGd,iCAAiB;AAHH,eAAhB,EAFyB,CAOzB;;;AACA,oBAAI,CAAChI,GAAL,CAASiI,SAAT,CAAmB,YAAnB,EAAiC;AAC/BC,oBAAI,EAAE,YADyB;AAE/Brc,mBAAG,EAAE,6BAF0B;AAG/Bsc,wBAAQ,EAAE,GAHqB;AAI/BC,uBAAO,EAAEpB;AAJsB,eAAjC,EARyB,CAczB;;;AACA,oBAAI,CAAChH,GAAL,CAASqI,UAAT,CAAoB;AAClBC,sBAAM,EAAE,YADU;AAElBC,4BAAY,EAAE;AAFI,eAApB,EAfyB,CAmBzB;;;AACA,oBAAI,CAACvI,GAAL,CAASwI,QAAT,CAAkB;AAChBrV,kBAAE,EAAE,SADY;AAEhB+U,oBAAI,EAAE,KAFU;AAGhBO,qBAAK,EAAE;AACL,8BAAY;AADP;AAHS,eAAlB;AAOD,aA3BD;AA4BA,iBAAKzI,GAAL,CAAS0I,EAAT,CAAY,SAAZ,EAAuB;AAAA,qBAAM,MAAI,CAACC,cAAL,EAAN;AAAA,aAAvB;AACD;;;iBAED,uBAAcC,MAAd,EAA4B;AAC1B,gBAAMC,MAAM,GAAoBD,MAAM,CAACA,MAAP,CAAcE,SAAd,EAAhC;AACA,mBAAOD,MAAM,IAAIA,MAAM,CAACE,GAAjB,IAAwBF,MAAM,CAACG,GAA/B,GACH,KAAKhJ,GAAL,CAASiJ,SAAT,GAAqBC,QAArB,CAA8BL,MAA9B,CADG,GAEH,KAFJ;AAGD;;;iBAED,0BAAc;AAAA;;AACZ,iBAAKM,OAAL,CAAatV,OAAb,CAAqB,UAAC+U,MAAD,EAAmB;AACtCpU,qBAAO,CAAC2E,GAAR,CAAYyP,MAAZ,EAAoB,MAAI,CAAClX,GAAzB;;AACA,kBAAIkX,MAAM,CAACzV,EAAP,KAAc,MAAI,CAACzB,GAAnB,KAA2B,MAAI,CAACsO,GAAL,CAASoJ,OAAT,KAAqBpC,8EAArB,IAAgD,CAAC,MAAI,CAACqC,aAAL,CAAmBT,MAAnB,CAA5E,CAAJ,EAA6G;AAC3GA,sBAAM,CAACA,MAAP,CAAcU,UAAd,GAA2BlC,KAA3B,CAAiCmC,OAAjC,GAA2C,MAA3C;AACD,eAFD,MAEO;AACLX,sBAAM,CAACA,MAAP,CAAcU,UAAd,GAA2BlC,KAA3B,CAAiCmC,OAAjC,GAA2C,OAA3C;AACD;AACF,aAPD;AAQD;;;iBAED,mBAAUlW,IAAV,EAAqB6U,IAArB,EAAoF;AAAA;;AAAA,gBAA7CsB,MAA6C,uEAA3B,KAA2B;AAAA,gBAApBC,GAAoB,uEAAL,KAAK;AAClF;AACA,iBAAKC,YAAL,CAAkBrW,IAAI,CAACF,EAAvB,EAFkF,CAGlF;;AACA,gBAAMwW,IAAI,GAAGzB,IAAI,KAAK0B,wEAAT,GAA8B,EAA9B,GAAmC,EAAhD,CAJkF,CAKlF;;AACA,gBAAMxf,CAAC,GAAmB,KAAKuc,gBAAL,CAAsBkD,eAAtB,CAAsCC,2EAAtC,EAAuD,mBAAS;AAAA,qBAAI9H,SAAS,CAAC3O,IAAV,GAAc0W,gCAAQ1W,IAAR,GAAY;AAAEsW,oBAAI,EAAEA,IAAR;AAAczB,oBAAI,EAAEA;AAApB,eAAZ,CAAlB;AAAA,aAAhE,CAA1B;AACA,gBAAIU,MAAM,GAAG,IAAIhC,6CAAJ,CAAoBxc,CAAC,CAACyY,IAAtB,EAA4B;AAAE7W,oBAAM,EAAE;AAAV,aAA5B,EACZge,SADY,CACF;AAAEjB,iBAAG,EAAE1V,IAAI,CAAC4W,WAAL,CAAiBnP,QAAxB;AAAkCkO,iBAAG,EAAE3V,IAAI,CAAC4W,WAAL,CAAiBlP;AAAxD,aADE,EAEZmP,KAFY,CAEN,KAAKlK,GAFC,CAAb,CAPkF,CAUlF;;AACA,gBAAImK,CAAC,GAAmB,IAAxB;AACA,gBAAIC,CAAC,GAAiB,IAAtB;AACAxB,kBAAM,GAAGA,MAAM,CAACyB,QAAP,CAAgB,IAAIzD,4CAAJ,CAAmB;AAC1C0D,oBAAM,EAAE,CAAC,CAAD,EAAI,EAAEX,IAAI,GAAG,KAAKW,MAAd,CAAJ,CADkC;AAE1Cte,oBAAM,EAAE,QAFkC;AAG1Cue,yBAAW,EAAE,KAH6B;AAI1CC,0BAAY,EAAE,IAJ4B;AAK1CC,yBAAW,EAAE,KAL6B;AAM1CC,sBAAQ,EAAE,MANgC;AAO1CC,uBAAS,EAAE;AAP+B,aAAnB,EASxBC,aATwB,CASV1e,QAAQ,CAACwW,aAAT,CAAuB,KAAvB,CATU,EAUzB;AAVyB,aAWxBgG,EAXwB,CAWrB,MAXqB,EAWb,UAAC1V,MAAD,EAAgB;AAC1BmX,eAAC,GAAG,OAAI,CAACxD,gBAAL,CAAsBkD,eAAtB,CAAsCgB,wEAAtC,EAAsD,mBAAS;AAAA,uBAAI7I,SAAS,CAAC3O,IAAV,GAAc0W,gCAAQ1W,IAAR,GAAY;AAAE6U,sBAAI,EAAEA;AAAR,iBAAZ,CAAlB;AAAA,eAA/D,CAAJ;AACAiC,eAAC,CAACtY,GAAF,CAAMiZ,iBAAN,CAAwBC,aAAxB;AACAnC,oBAAM,CAACoC,QAAP,GAAkBJ,aAAlB,CAAgCT,CAAC,CAACtH,IAAlC;AACAuH,eAAC,GAAID,CAAC,CAACtY,GAAF,CAAMyQ,QAAN,CAAkC2I,MAAlC,CACJC,YADI,GAEJnZ,IAFI,CAEC,wEAFD,EAGJrG,SAHI,CAGM,UAAOmJ,IAAP;AAAA,uBAAyB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAC9BA,IAD8B;AAAA;AAAA;AAAA;;AAAA;AAEhC,iCAAM,IAAI3K,OAAJ,CAAY,iBAAO;AAAA,mCAAI+B,UAAU,CAACkf,OAAD,EAAU,GAAV,CAAd;AAAA,2BAAnB,CAAN;;AAFgC;AAGhC,+BAAKnL,GAAL,CAASoL,MAAT,CAAgB;AACd/D,kCAAM,EAAErU,MAAM,CAACqY,MAAP,CAAcvC,SAAd,EADM;AAEdwB,kCAAM,EAAE,CAAC,CAAD,EAAKtX,MAAM,CAACqY,MAAP,CAAc/B,UAAd,GAA2BgC,YAA3B,GAA0C,CAA3C,GAAgD,KAAKhB,MAAzD;AAFM,2BAAhB;;AAHgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAzB;AAAA,eAHN,CAAL;AAYD,aA3BwB,EA4BzB;AA5ByB,aA6BxB5B,EA7BwB,CA6BrB,OA7BqB,EA6BZ,YAAK;AAChBE,oBAAM,CAACoC,QAAP,GAAkBJ,aAAlB,CAAgC1e,QAAQ,CAACwW,aAAT,CAAuB,KAAvB,CAAhC;;AACA,kBAAIyH,CAAC,IAAIA,CAAC,CAACtY,GAAX,EAAgB;AACdsY,iBAAC,CAACtY,GAAF,CAAM0Z,OAAN;AACApB,iBAAC,GAAG,IAAJ;AACD;;AACD,kBAAIC,CAAJ,EAAO;AACLA,iBAAC,CAACoB,WAAF;AACApB,iBAAC,GAAG,IAAJ;AACD;AACF,aAvCwB,CAAhB,CAAT,CAbkF,CAqDlF;;AACA,gBAAIqB,MAAM,GAAG,IAAb;;AACA,gBAAIjC,MAAJ,EAAY;AACViC,oBAAM,GAAG,KAAIC,uDAAJ,EAAiB;AAAE3C,mBAAG,EAAE1V,IAAI,CAAC4W,WAAL,CAAiBnP,QAAxB;AAAkCkO,mBAAG,EAAE3V,IAAI,CAAC4W,WAAL,CAAiBlP;AAAxD,eAAjB,EAAsFtE,IAAI,CAAC+C,GAAL,CAAS,IAAT,EAAenG,IAAI,CAACsY,KAApB,CAAtF,EAAkH;AACzHC,wBAAQ,EAAE,KAD+G;AAEzHC,yBAAS,EAAE,KAAK5E,YAFyG;AAGzH6E,2BAAW,EAAE,GAH4G;AAIzHC,2BAAW,EAAE,KAAK9E,YAJuG;AAKzH+E,4BAAY,EAAE,CAL2G;AAMzHC,6BAAa,EAAE,CAN0G;AAOzHC,4BAAY,EAAG;AAP0G,eAAlH,CAAT;AASAT,oBAAM,CAACvB,KAAP,CAAa,KAAKlK,GAAlB;AACD,aAlEiF,CAmElF;;;AACA,gBAAIyJ,GAAJ,EAAS;AACP,mBAAK0C,IAAL,CAAU9Y,IAAI,CAAC4W,WAAL,CAAiBnP,QAA3B,EAAqCzH,IAAI,CAAC4W,WAAL,CAAiBlP,SAAtD,EAAiE,IAAjE;AACD,aAtEiF,CAuElF;;;AACA,iBAAKoO,OAAL,CAAanV,IAAb,CAAkB;AAAEb,gBAAE,EAAEE,IAAI,CAACF,EAAX;AAAeyV,oBAAM,EAAEA,MAAvB;AAA+B6C,oBAAM,EAAEA,MAAvC;AAA+CvD,kBAAI,EAAEA;AAArD,aAAlB,EAxEkF,CAyElF;;AACA,mBAAOU,MAAP;AACD;;;iBAED,cAAKG,GAAL,EAAkBC,GAAlB,EAAmD;AAAA,gBAApBS,GAAoB,uEAAL,KAAK;;AACjD,gBAAIA,GAAJ,EAAS;AACP,mBAAKzJ,GAAL,CAASoM,KAAT,CAAe;AACb/E,sBAAM,EAAE,CAAC2B,GAAD,EAAMD,GAAN,CADK;AAEbsD,yBAAS,EAAE;AAFE,eAAf;AAID,aALD,MAKO;AACL,mBAAKrM,GAAL,CAASoL,MAAT,CAAgB;AACd/D,sBAAM,EAAE,CAAC2B,GAAD,EAAMD,GAAN,CADM;AAEdsD,yBAAS,EAAE;AAFG,eAAhB;AAID;AACF;;;iBAED,sBAAalZ,EAAb,EAAuB;AACrB,gBAAMY,KAAK,GAAG,KAAKoV,OAAL,CAAamD,SAAb,CAAuB,cAAI;AAAA,qBAAI7K,IAAI,CAACtO,EAAL,KAAYA,EAAhB;AAAA,aAA3B,CAAd;;AACA,gBAAIY,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChB,kBAAMwY,KAAK,GAAG,KAAKpD,OAAL,CAAapV,KAAb,CAAd;AACA,kBAAIwY,KAAK,CAAC3D,MAAV,EAAkB2D,KAAK,CAAC3D,MAAN,CAAa4D,MAAb;AAClB,kBAAID,KAAK,CAACd,MAAV,EAAkBc,KAAK,CAACd,MAAN,CAAae,MAAb;AAClB,mBAAKrD,OAAL,CAAasD,MAAb,CAAoB1Y,KAApB,EAA2B,CAA3B;AACD;AACF;;;iBAED,wBAAoC;AAAA;;AAAA,gBAAvBmU,IAAuB,uEAAJ,IAAI;;AAClC,gBAAIA,IAAJ,EAAU;AACR,mBAAKiB,OAAL,CAAahX,MAAb,CAAoB,UAACyW,MAAD;AAAA,uBAAoBA,MAAM,CAACV,IAAP,KAAgBA,IAApC;AAAA,eAApB,EAA8DhE,KAA9D,CAAoE,CAApE,EAAuErQ,OAAvE,CAA+E,UAAC+U,MAAD;AAAA,uBAAoB,OAAI,CAACc,YAAL,CAAkBd,MAAM,CAACzV,EAAzB,CAApB;AAAA,eAA/E;AACD,aAFD,MAEO;AACL,mBAAKgW,OAAL,CAAajF,KAAb,CAAmB,CAAnB,EAAsBrQ,OAAtB,CAA8B,UAAC+U,MAAD;AAAA,uBAAoB,OAAI,CAACc,YAAL,CAAkBd,MAAM,CAACzV,EAAzB,CAApB;AAAA,eAA9B;AACD;AACF;;;iBAED,qBAAS;AACP,gBAAI,KAAK6M,GAAT,EAAc;AACZ,mBAAKA,GAAL,CAAS0M,MAAT;AACD;AACF;;;iBAED,2BAAkBxE,IAAlB,EAAmC;AAAA;;AACjC,iBAAKlI,GAAL,CAAS6H,IAAT,CAAc,OAAd,EAAuB,UAAO7U,MAAP;AAAA,qBAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/D,+BAAM,KAAK1B,UAAL,CAAgBqb,UAAhB,CAA2B,IAA3B,EAAiCzE,IAAjC,EAAuClV,MAAM,CAAC6V,MAAP,CAAcE,GAArD,EAA0D/V,MAAM,CAAC6V,MAAP,CAAcG,GAAxE,EAA6E,SAAS,CAACvS,IAAI,CAAC8N,MAAL,KAAgB,CAAjB,EAAoBvL,QAApB,CAA6B,EAA7B,EAAiC4T,SAAjC,CAA2C,CAA3C,CAAtF,CAAN;;AAD+D;AAE/D,6BAAKzb,mBAAL,CAAyBuC,OAAzB,CAAiC,kBAAjC;;AAF+D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAA1C;AAAA,aAAvB;AAID;;;iBAED,wBAAewU,IAAf,EAA8B;AAAA;;AAC5B,iBAAKlI,GAAL,CAAS6H,IAAT,CAAc,OAAd,EAAuB,UAAO7U,MAAP;AAAA,qBAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/D,+BAAM,KAAK1B,UAAL,CAAgBub,OAAhB,CAAwB,IAAxB,EAA8B3E,IAA9B,EAAoClV,MAAM,CAAC6V,MAAP,CAAcE,GAAlD,EAAuD/V,MAAM,CAAC6V,MAAP,CAAcG,GAArE,EAA0E,UAAU,CAACvS,IAAI,CAAC8N,MAAL,KAAgB,CAAjB,EAAoBvL,QAApB,CAA6B,EAA7B,EAAiC4T,SAAjC,CAA2C,CAA3C,CAApF,CAAN;;AAD+D;AAE/D,6BAAKzb,mBAAL,CAAyBuC,OAAzB,CAAiC,kBAAjC;;AAF+D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAA1C;AAAA,aAAvB;AAID;;;iBAED,yBAAgBwU,IAAhB,EAAkC;AAAA;;AAChC,iBAAKlI,GAAL,CAAS6H,IAAT,CAAc,OAAd,EAAuB,UAAO7U,MAAP;AAAA,qBAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/D,+BAAM,KAAK1B,UAAL,CAAgBwb,QAAhB,CAAyB,IAAzB,EAA+B5E,IAA/B,EAAqClV,MAAM,CAAC6V,MAAP,CAAcE,GAAnD,EAAwD/V,MAAM,CAAC6V,MAAP,CAAcG,GAAtE,EAA2E,WAAW,CAACvS,IAAI,CAAC8N,MAAL,KAAgB,CAAjB,EAAoBvL,QAApB,CAA6B,EAA7B,EAAiC4T,SAAjC,CAA2C,CAA3C,CAAtF,CAAN;;AAD+D;AAE/D,6BAAKzb,mBAAL,CAAyBuC,OAAzB,CAAiC,kBAAjC;;AAF+D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAA1C;AAAA,aAAvB;AAID;;;iBAED,8BAAkB;AAAA;;AAChB,iBAAKsM,GAAL,CAAS6H,IAAT,CAAc,OAAd,EAAuB,UAAO7U,MAAP;AAAA,qBAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/D,+BAAM,KAAK1B,UAAL,CAAgByb,WAAhB,CAA4B/Z,MAAM,CAAC6V,MAAP,CAAcE,GAA1C,EAA+C/V,MAAM,CAAC6V,MAAP,CAAcG,GAA7D,CAAN;;AAD+D;AAE/D,6BAAK7X,mBAAL,CAAyBuC,OAAzB,CAAiC,kBAAjC;;AAF+D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAA1C;AAAA,aAAvB;AAID;;;iBAED,uBAAW;AACT,iBAAKsZ,YAAL;AACA,iBAAKhN,GAAL,CAASwM,MAAT;AACA,iBAAKxM,GAAL,GAAW,IAAX;AACA,iBAAKmJ,OAAL,GAAe,EAAf;AACD;;;;;;;yBArOUzC,gBAAauG;AAAA;;;eAAbvG;AAAapJ,iBAAboJ,cAAa;AAAAnJ,oBAFZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBd,UAAK2P,YAAL;;AAAA,iBAAKA,YAAL,EAAiB;AACfA;AACAA;AACAA;AACD,OAJD,EAAKA,YAAY,KAAZA,YAAY,MAAjB;;UAeaC;AAWX,sCACUC,QADV,EAEU/f,gBAFV,EAE4C;AAAA;;AAAA;;AADlC;AACA;AAXF,yBAA6B;AACnC6H,oBAAQ,EAAE,IADyB;AAEnCmY,8BAAkB,EAAE,OAFe;AAGnCC,4BAAgB,EAAE;AAHiB,WAA7B;AAKS,+BAAgB,IAAIC,iDAAJ,CAAyC,EAAzC,CAAhB;AACA,gCAAiB,KAAKC,aAAL,CAAmBtC,YAAnB,EAAjB;AACA,2BAAY,IAAIuC,yCAAJ,EAAZ;AAMf,eAAKC,cAAL,CACC3b,IADD,CAEE,wDAAO,UAAC4b,KAAD;AAAA,mBAAgCA,KAAK,CAACra,MAAN,GAAe,CAAf,IAAoB,CAACqa,KAAK,CAAC,CAAD,CAAL,CAASC,OAA9D;AAAA,WAAP,CAFF,EAGE,qDAAI,YAAK;AACP,gBAAMC,YAAY,GAAG,OAAI,CAACL,aAAL,CAAmBvX,KAAxC;AACA4X,wBAAY,CAAC,CAAD,CAAZ,CAAgBD,OAAhB,GAA0B,IAA1B;;AACA,mBAAI,CAACJ,aAAL,CAAmBM,IAAnB,CAAwBD,YAAxB;AACD,WAJD,CAHF,EAQE,qDAAI,eAAK;AAAA,mBAAIF,KAAK,CAAC,CAAD,CAAT;AAAA,WAAT,CARF,EASE,2DAAU,KAAKI,SAAf,CATF,EAUEriB,SAVF,CAUY,UAACsiB,YAAD;AAAA,mBAAqC,OAAI,CAACC,YAAL,CAAkBD,YAAY,CAAC3R,OAA/B,EAAwC2R,YAAY,CAAC9F,IAArD,CAArC;AAAA,WAVZ;AAWD;;;;iBAEO,sBAAa7L,OAAb,EAA8B6L,IAA9B,EAAgD;AACtD,gBAAIgG,cAAc,GAAwB,IAA1C;;AACA,oBAAQhG,IAAR;AACE,mBAAKgF,YAAY,CAACiB,OAAlB;AACED,8BAAc,GAAG,KAAKd,QAAL,CAAcvY,IAAd,CAAmBwH,OAAnB,EAA4B,IAA5B,EAAgC0N,gCAAM,KAAKqE,OAAX,GAAkB;AAAErZ,4BAAU,EAAE,CAAC,aAAD,EAAgB,YAAhB;AAAd,iBAAlB,CAAhC,CAAjB;AACA;;AACF,mBAAKmY,YAAY,CAACmB,OAAlB;AACEH,8BAAc,GAAG,KAAKd,QAAL,CAAcvY,IAAd,CAAmBwH,OAAnB,EAA4B,IAA5B,EAAgC0N,gCAAM,KAAKqE,OAAX,GAAkB;AAAErZ,4BAAU,EAAE,CAAC,aAAD,EAAgB,aAAhB;AAAd,iBAAlB,CAAhC,CAAjB;AACA;;AACF,mBAAKmY,YAAY,CAACoB,KAAlB;AACEJ,8BAAc,GAAG,KAAKd,QAAL,CAAcvY,IAAd,CAAmBwH,OAAnB,EAA4B,GAA5B,EAA+B0N,gCAAM,KAAKqE,OAAX,GAAkB;AAAErZ,4BAAU,EAAE,CAAC,aAAD,EAAgB,UAAhB;AAAd,iBAAlB,CAA/B,CAAjB;AACA;AATJ;;AAWA,gBAAImZ,cAAJ,EAAoB,KAAKK,uBAAL,CAA6BL,cAAc,CAACM,cAAf,EAA7B;AACrB;;;iBAEO,iCAAwBpB,QAAxB,EAAgE;AAAA;;AACtEA,oBAAQ,CACPrb,IADD,CAEE,uDAAM,EAAN,CAFF,EAGE,sDAAK,CAAL,CAHF,EAKCrG,SALD,CAKW,YAAK;AACd,kBAAMmiB,YAAY,GAAG,OAAI,CAACL,aAAL,CAAmBvX,KAAxC;AACA,kBAAI4X,YAAY,CAAC,CAAD,CAAZ,CAAgBD,OAApB,EAA6BC,YAAY,CAACY,KAAb;;AAC7B,qBAAI,CAACjB,aAAL,CAAmBM,IAAnB,CAAwBD,YAAxB;AACD,aATD;AAUD;;;iBAED,iBAAQ7W,IAAR,EAAsB0X,QAAtB,EAAoC;AAAA;;AAClC,gBAAIA,QAAJ,EAAc;AACZ3E,oBAAM,CAAC4E,IAAP,CAAYD,QAAZ,EAAsB7a,OAAtB,CAA8B,UAAC+a,GAAD,EAAM7a,KAAN,EAAe;AAC3C,oBAAI,OAAO2a,QAAQ,CAACE,GAAD,CAAf,KAAyB,QAA7B,EAAuCF,QAAQ,CAACE,GAAD,CAAR,GAAgB,IAAIC,sDAAJ,GAAeC,SAAf,CAAyBJ,QAAQ,CAACE,GAAD,CAAjC,CAAhB;AACvC,oBAAI,OAAOF,QAAQ,CAACE,GAAD,CAAf,KAAyB,QAAzB,IAAqCF,QAAQ,CAACE,GAAD,CAAR,CAAc3J,QAAd,CAAuB,GAAvB,CAAzC,EAAsEyJ,QAAQ,CAACE,GAAD,CAAR,GAAgB,OAAI,CAACvhB,gBAAL,CAAsB0K,OAAtB,CAA8B2W,QAAQ,CAACE,GAAD,CAAtC,CAAhB;AACvE,eAHD;AAID;;AACD,gBAAMvS,OAAO,GAAG,KAAKhP,gBAAL,CAAsB0K,OAAtB,CAA8Bf,IAA9B,EAAoC0X,QAApC,CAAhB;AACA,gBAAMxG,IAAI,GAAGgF,YAAY,CAACiB,OAA1B;AACA,iBAAKX,aAAL,CAAmBM,IAAnB,CAAwB,KAAKN,aAAL,CAAmBvX,KAAnB,CAAyB2B,MAAzB,CAAgC,CAAC;AAAEyE,qBAAO,EAAPA,OAAF;AAAW6L,kBAAI,EAAJA,IAAX;AAAiB0F,qBAAO,EAAE;AAA1B,aAAD,CAAhC,CAAxB;AACD;;;iBAED,iBAAQ5W,IAAR,EAAoB;AAClB,gBAAMqF,OAAO,GAAG,KAAKhP,gBAAL,CAAsB0K,OAAtB,CAA8Bf,IAA9B,CAAhB;AACA,gBAAMkR,IAAI,GAAGgF,YAAY,CAACmB,OAA1B;AACA,iBAAKb,aAAL,CAAmBM,IAAnB,CAAwB,KAAKN,aAAL,CAAmBvX,KAAnB,CAAyB2B,MAAzB,CAAgC,CAAC;AAAEyE,qBAAO,EAAPA,OAAF;AAAW6L,kBAAI,EAAJA,IAAX;AAAiB0F,qBAAO,EAAE;AAA1B,aAAD,CAAhC,CAAxB;AACD;;;iBAED,eAAM5W,IAAN,EAAkB;AAChB,gBAAMqF,OAAO,GAAG,KAAKhP,gBAAL,CAAsB0K,OAAtB,CAA8Bf,IAA9B,CAAhB;AACA,gBAAMkR,IAAI,GAAGgF,YAAY,CAACoB,KAA1B;AACA,iBAAKd,aAAL,CAAmBM,IAAnB,CAAwB,KAAKN,aAAL,CAAmBvX,KAAnB,CAAyB2B,MAAzB,CAAgC,CAAC;AAAEyE,qBAAO,EAAPA,OAAF;AAAW6L,kBAAI,EAAJA,IAAX;AAAiB0F,qBAAO,EAAE;AAA1B,aAAD,CAAhC,CAAxB;AACD;;;;;;;yBA/EUT,sBAAmBlf;AAAA;;;eAAnBkf;AAAmB7P,iBAAnB6P,oBAAmB;AAAA5P,oBAFlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCZDwR;AAEX,kCACUC,WADV,EACkC;AAAA;;AAAxB;AACL;;;;iBAEL,eAAMC,KAAN,EAAmB;AACjB,gBAAMC,YAAY,GAAG,KAAKF,WAAL,CAAiBG,KAAjB,CAAuBhd,MAAvB,CAA8B,cAAI;AAAA,qBAAKid,IAAI,CAACH,KAAL,CAAsBhK,QAAtB,CAA+BgK,KAA/B,CAAL;AAAA,aAAlC,CAArB;AACAC,wBAAY,CAACrb,OAAb,CAAqB,qBAAW;AAAA,qBAAKwb,WAAW,CAACC,OAAZ,CAA4CxB,IAA5C,EAAL;AAAA,aAAhC;AACD;;;iBAED,eAAMsB,IAAN,EAA+B;AAC7B,gBAAIA,IAAJ,EAAU,KAAKJ,WAAL,CAAiBO,OAAjB,CAAyBH,IAAzB,EAAV,KACK,KAAKJ,WAAL,CAAiB7U,KAAjB;AACN;;;iBAED,sBAAU;AACR,gBAAMiU,OAAO,GAAgB;AAC3BoB,8BAAgB,EAAE,KADS;AAE3BC,4BAAc,EAAE,IAFW,CAG3B;;AAH2B,aAA7B;AAKA,iBAAKT,WAAL,CAAiBU,cAAjB;AACA,iBAAKV,WAAL,CAAiBviB,UAAjB,CAA4B,CAC1B;AAAEwiB,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,eAAlC;AAAmDC,sBAAQ,EAAE,eAA7D;AAA8EC,mBAAK,EAAE,uBAArF;AAA8GC,qBAAO,EAAE;AAAvH,aAD0B,EAE1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,WAAlC;AAA+CC,sBAAQ,EAAE,WAAzD;AAAsEC,mBAAK,EAAE,mBAA7E;AAAkGC,qBAAO,EAAE;AAA3G,aAF0B,EAG1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,UAAlC;AAA8CC,sBAAQ,EAAE,UAAxD;AAAoEC,mBAAK,EAAE,kBAA3E;AAA+FC,qBAAO,EAAE;AAAxG,aAH0B,EAI1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,aAAlC;AAAiDC,sBAAQ,EAAE,aAA3D;AAA0EC,mBAAK,EAAE,qBAAjF;AAAwGC,qBAAO,EAAE;AAAjH,aAJ0B,EAK1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,cAAlC;AAAkDC,sBAAQ,EAAE,cAA5D;AAA4EC,mBAAK,EAAE,sBAAnF;AAA2GC,qBAAO,EAAE;AAApH,aAL0B,EAM1B;AAAEb,mBAAK,EAAE,kBAAT;AAA6BU,oBAAM,EAAE,cAArC;AAAqDC,sBAAQ,EAAE,cAA/D;AAA+EC,mBAAK,EAAE,sBAAtF;AAA8GC,qBAAO,EAAE;AAAvH,aAN0B,EAO1B;AAAEb,mBAAK,EAAE,kBAAT;AAA6BU,oBAAM,EAAE,UAArC;AAAiDC,sBAAQ,EAAE,UAA3D;AAAuEC,mBAAK,EAAE,kBAA9E;AAAkGC,qBAAO,EAAE;AAA3G,aAP0B,EAQ1B;AAAEb,mBAAK,EAAE,mBAAT;AAA8BU,oBAAM,EAAE,eAAtC;AAAuDC,sBAAQ,EAAE,eAAjE;AAAkFC,mBAAK,EAAE,uBAAzF;AAAkHC,qBAAO,EAAE;AAA3H,aAR0B,EAS1B;AAAEb,mBAAK,EAAE,mBAAT;AAA8BU,oBAAM,EAAE,WAAtC;AAAmDC,sBAAQ,EAAE,WAA7D;AAA0EC,mBAAK,EAAE,mBAAjF;AAAsGC,qBAAO,EAAE;AAA/G,aAT0B,EAU1B;AAAEb,mBAAK,EAAE,mBAAT;AAA8BU,oBAAM,EAAE,aAAtC;AAAqDC,sBAAQ,EAAE,aAA/D;AAA8EC,mBAAK,EAAE,qBAArF;AAA4GC,qBAAO,EAAE;AAArH,aAV0B,EAW1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,WAAlC;AAA+CC,sBAAQ,EAAE,WAAzD;AAAsEC,mBAAK,EAAE,mBAA7E;AAAkGC,qBAAO,EAAE;AAA3G,aAX0B,EAY1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,aAAlC;AAAiDC,sBAAQ,EAAE,aAA3D;AAA0EC,mBAAK,EAAE,qBAAjF;AAAwGC,qBAAO,EAAE;AAAjH,aAZ0B,EAa1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,cAAlC;AAAkDC,sBAAQ,EAAE,cAA5D;AAA4EC,mBAAK,EAAE,sBAAnF;AAA2GC,qBAAO,EAAE;AAApH,aAb0B,EAc1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,cAAlC;AAAkDC,sBAAQ,EAAE,cAA5D;AAA4EC,mBAAK,EAAE,sBAAnF;AAA2GC,qBAAO,EAAE;AAApH,aAd0B,EAe1B;AAAEb,mBAAK,EAAE,iBAAT;AAA4BU,oBAAM,EAAE,aAApC;AAAmDC,sBAAQ,EAAE,aAA7D;AAA4EC,mBAAK,EAAE,qBAAnF;AAA0GC,qBAAO,EAAE;AAAnH,aAf0B,EAgB1B;AAAEb,mBAAK,EAAE,iBAAT;AAA4BU,oBAAM,EAAE,iBAApC;AAAuDC,sBAAQ,EAAE,iBAAjE;AAAoFC,mBAAK,EAAE,yBAA3F;AAAsHC,qBAAO,EAAE;AAA/H,aAhB0B,EAiB1B;AAAEb,mBAAK,EAAE,iBAAT;AAA4BU,oBAAM,EAAE,YAApC;AAAkDC,sBAAQ,EAAE,YAA5D;AAA0EC,mBAAK,EAAE,oBAAjF;AAAuGC,qBAAO,EAAE;AAAhH,aAjB0B,EAkB1B;AAAEb,mBAAK,EAAE,iBAAT;AAA4BU,oBAAM,EAAE,aAApC;AAAmDC,sBAAQ,EAAE,aAA7D;AAA4EC,mBAAK,EAAE,qBAAnF;AAA0GC,qBAAO,EAAE;AAAnH,aAlB0B,EAmB1B;AAAEb,mBAAK,EAAE,iBAAT;AAA4BU,oBAAM,EAAE,cAApC;AAAoDC,sBAAQ,EAAE,cAA9D;AAA8EC,mBAAK,EAAE,sBAArF;AAA6GC,qBAAO,EAAE;AAAtH,aAnB0B,EAoB1B;AAAEb,mBAAK,EAAE,kBAAT;AAA6BU,oBAAM,EAAE,cAArC;AAAqDC,sBAAQ,EAAE,cAA/D;AAA+EC,mBAAK,EAAE,sBAAtF;AAA8GC,qBAAO,EAAE;AAAvH,aApB0B,EAqB1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,WAAlC;AAA+CC,sBAAQ,EAAE,WAAzD;AAAsEC,mBAAK,EAAE,mBAA7E;AAAkGC,qBAAO,EAAE;AAA3G,aArB0B,EAsB1B;AAAEb,mBAAK,EAAE,eAAT;AAA0BU,oBAAM,EAAE,YAAlC;AAAgDC,sBAAQ,EAAE,YAA1D;AAAwEC,mBAAK,EAAE,oBAA/E;AAAqGC,qBAAO,EAAE;AAA9G,aAtB0B,EAuB1B;AAAEb,mBAAK,EAAE,kBAAT;AAA6BU,oBAAM,EAAE,cAArC;AAAqDC,sBAAQ,EAAE,cAA/D;AAA+EC,mBAAK,EAAE,sBAAtF;AAA8GC,qBAAO,EAAE;AAAvH,aAvB0B,EAwB1B;AAAEb,mBAAK,EAAE,kBAAT;AAA6BU,oBAAM,EAAE,eAArC;AAAsDC,sBAAQ,EAAE,eAAhE;AAAiFC,mBAAK,EAAE,uBAAxF;AAAiHC,qBAAO,EAAE;AAA1H,aAxB0B,EAyB1B;AAAEb,mBAAK,EAAE,kBAAT;AAA6BU,oBAAM,EAAE,iBAArC;AAAwDC,sBAAQ,EAAE,iBAAlE;AAAqFC,mBAAK,EAAE,yBAA5F;AAAuHC,qBAAO,EAAE;AAAhI,aAzB0B,EA0B1B;AAAEb,mBAAK,EAAE,iBAAT;AAA4BU,oBAAM,EAAE,aAApC;AAAmDC,sBAAQ,EAAE,aAA7D;AAA4EC,mBAAK,EAAE,qBAAnF;AAA0GC,qBAAO,EAAE;AAAnH,aA1B0B,EA2B1B;AAAEb,mBAAK,EAAE,iBAAT;AAA4BU,oBAAM,EAAE,YAApC;AAAkDC,sBAAQ,EAAE,YAA5D;AAA0EC,mBAAK,EAAE,oBAAjF;AAAuGC,qBAAO,EAAE;AAAhH,aA3B0B,EA4B1B;AAAEb,mBAAK,EAAE,iBAAT;AAA4BU,oBAAM,EAAE,aAApC;AAAmDC,sBAAQ,EAAE,aAA7D;AAA4EC,mBAAK,EAAE,qBAAnF;AAA0GC,qBAAO,EAAE;AAAnH,aA5B0B,EA6B1B;AAAEb,mBAAK,EAAE,oBAAT;AAA+BU,oBAAM,EAAE,mBAAvC;AAA4DC,sBAAQ,EAAE,mBAAtE;AAA2FC,mBAAK,EAAE,wBAAlG;AAA4HC,qBAAO,EAAE;AAArI,aA7B0B,CAA5B,EA8BG1B,OA9BH;AA+BD;;;;;;;yBAtDUW,kBAAe7W;AAAA;;;eAAf6W;AAAezR,iBAAfyR,gBAAe;AAAAxR,oBAFd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCNDwS,iBAEX,wBAAmBre,GAAnB,EAA8B;AAAA;;AAAX;AAAe;;AADXqe,4BAAO,iBAAP;;UAIZC,oBAEX,2BAAmBte,GAAnB,EAA8B;AAAA;;AAAX;AAAe;;AADXse,+BAAO,oBAAP;;UAIZC,4BAEX,mCAAmBve,GAAnB,EAA8B;AAAA;;AAAX;AAAe;;AADXue,uCAAO,6BAAP;;UAIZC,6BAEX,oCAAmBxe,GAAnB,EAA8B;AAAA;;AAAX;AAAe;;AADXwe,wCAAO,8BAAP;;UAIZC,yBAEX;AAAA;AAAgB;;AADOA,oCAAO,0BAAP;;UAIZC,gBAEX;AAAA;AAAgB;;AADOA,2BAAO,oBAAP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLlB,UAAMC,QAAO,GAAmB;AACrC3e,WAAG,EAAE,IADgC;AAErC4e,eAAO,EAAE,IAF4B;AAGrCC,gBAAQ,EAAE,EAH2B;AAIrCC,iBAAS,EAAE,EAJ0B;AAKrCC,cAAM,EAAE,KAL6B;AAMrCzW,aAAK,EAAE,IAN8B;AAOrC0W,aAAK,EAAE;AAP8B,OAAhC;;UAeMC,UAAS;AA4GpB,2BACUvN,eADV,EAEUlS,gBAFV,EAGU3F,MAHV,EAIU4F,mBAJV,EAIkD;AAAA;;AAHxC;AACA;AACA;AACA;AACL;;AAjHe;AAAA;AAAA,iBAmHpB,oBAAW8D,GAAX,EAA4C;AAAA;;AAC1C2b,uBAAW,CAAC,YAAK;AACf3b,iBAAG,CAAC4b,UAAJ,CAAe;AACb7W,qBAAK,EAAE,IAAI8W,IAAJ;AADM,eAAf;AAGD,aAJU,EAIR,IAJQ,CAAX;AAKA,iBAAK1N,eAAL,CAAqBwB,SAArB,CAA+BlZ,SAA/B,CAAyC,UAACmZ,IAAD,EAAc;AACrD,kBAAIA,IAAJ,EAAU;AACR5P,mBAAG,CAAC8b,QAAJ,CAAa,IAAIC,wDAAJ,CAAkBnM,IAAI,CAACnT,GAAvB,CAAb;AACAuD,mBAAG,CAAC8b,QAAJ,CAAa,IAAIC,2DAAJ,CAAqBnM,IAAI,CAACnT,GAA1B,CAAb;AACAuD,mBAAG,CAAC8b,QAAJ,CAAa,IAAIC,mEAAJ,CAA6BnM,IAAI,CAACnT,GAAlC,CAAb;AACAuD,mBAAG,CAAC8b,QAAJ,CAAa,IAAIC,oEAAJ,CAA8BnM,IAAI,CAACnT,GAAnC,CAAb;;AACA,uBAAI,CAACP,mBAAL,CAAyBoD,OAAzB,CAAiC,sBAAjC;;AACA,oBAAM0a,KAAK,GAAGnjB,YAAY,CAAC8T,OAAb,CAAqB,OAArB,KAAiC,eAA/C,CANQ,CAOR;;AACA,oBAAMzC,IAAI,GAAG,OAAI,CAAC5R,MAAL,CAAY0lB,QAAZ,CAAqBhC,KAArB,CAAb;;AACA,oBAAMiC,QAAQ,GAAG/T,IAAI,CAAC+T,QAAtB;AACA/T,oBAAI,CAACgU,WAAL,GAAmB,EAAnB;AACAhU,oBAAI,CAAC+T,QAAL,GAAgB,IAAhB;;AACA,uBAAI,CAAC3lB,MAAL,CAAY6lB,QAAZ,CAAqB,CAACjU,IAAI,CAACnE,QAAL,EAAD,CAArB,EAAwC;AAAEkY,0BAAQ,EAAEA;AAAZ,iBAAxC;AACD,eAbD,MAaO;AACL,uBAAI,CAAC3lB,MAAL,CAAY6lB,QAAZ,CAAqB,CAAC,eAAD,CAArB;AACD;AACF,aAjBD;AAkBD;AA3ImB;AAAA;AAAA,iBA8Id,yBAAgBnc,GAAhB,EAAiD;;;;;;;AACrD,6BAAM,KAAKmO,eAAL,CAAqBiO,eAArB,CAAqC,IAAIC,iEAAJ,EAArC,CAAN;;;;;;;;;AACD;AAhJmB;AAAA;AAAA,iBAmJd,gBAAOrc,GAAP,EAAwC;;;;;;;;AAC5C,6BAAM,KAAKmO,eAAL,CAAqBmO,OAArB,EAAN;;;AACMzX,8BAAQ7E,GAAG,CAACuc,QAAJ;AACdvc,yBAAG,CAACwc,QAAJ,CAAY1H,gCACPjQ,KADO,GACF;AACRpI,2BAAG,EAAE,IADG;AAER4e,+BAAO,EAAE,IAFD;AAGRC,gCAAQ,EAAE,EAHF;AAIRC,iCAAS,EAAE,EAJH;AAKRC,8BAAM,EAAE,KALA;AAMRzW,6BAAK,EAAE;AANC,uBADE,CAAZ;;;;;;;;;AASD;AA/JmB;AAAA;AAAA,iBAkKpB,iBAAQ/E,GAAR,EAA2Cyc,OAA3C,EAAiE;AAC/D,gBAAM5X,KAAK,GAAG7E,GAAG,CAACuc,QAAJ,EAAd;AACAvc,eAAG,CAACwc,QAAJ,CAAY1H,gCACPjQ,KADO,GACF;AACRpI,iBAAG,EAAEggB,OAAO,CAAChgB,GADL;AAER+e,oBAAM,EAAE;AAFA,aADE,CAAZ;AAKD;AAzKmB;AAAA;AAAA,iBA4KpB,oBAAWxb,GAAX,EAA8Cyc,OAA9C,EAAuE;AACrE,mBAAO,KAAKxgB,gBAAL,CAAsBwT,GAAtB,oBAA2CgN,OAAO,CAAChgB,GAAnD,GAA0DC,YAA1D,GAAyEI,IAAzE,CACL,qDAAI,UAACue,OAAD,EAAiB;AACnB,kBAAMxW,KAAK,GAAG7E,GAAG,CAACuc,QAAJ,EAAd;AACAvc,iBAAG,CAACwc,QAAJ,CAAY1H,gCACPjQ,KADO,GACF;AACRwW,uBAAO,EAAEA;AADD,eADE,CAAZ;AAID,aAND,CADK,CAAP;AASD;AAtLmB;AAAA;AAAA,iBAyLpB,4BAAmBrb,GAAnB,EAAsDyc,OAAtD,EAAuF;AACrF,mBAAO,KAAKxgB,gBAAL,CAAsBO,UAAtB,oBAAkDigB,OAAO,CAAChgB,GAA1D,gBAA0EC,YAA1E,CAAuF;AAAEC,qBAAO,EAAE;AAAX,aAAvF,EAA2GG,IAA3G,CACL,qDAAI,UAACwe,QAAD,EAAoB;AACtB,kBAAMzW,KAAK,GAAG7E,GAAG,CAACuc,QAAJ,EAAd;AACAvc,iBAAG,CAACwc,QAAJ,CAAY1H,gCACPjQ,KADO,GACF;AACRyW,wBAAQ,EAAEA,QAAQ,CAAChe,IAAT,CAAc,UAACC,CAAD,EAAIC,CAAJ;AAAA,yBAAUD,CAAC,CAACmO,QAAF,CAAWpO,IAAX,GAAkBE,CAAC,CAACkO,QAAF,CAAWpO,IAAvC;AAAA,iBAAd;AADF,eADE,CAAZ;AAID,aAND,CADK,CAAP;AASD;AAnMmB;AAAA;AAAA,iBAsMpB,6BAAoB0C,GAApB,EAAuDyc,OAAvD,EAAyF;AACvF,mBAAO,KAAKxgB,gBAAL,CAAsBO,UAAtB,oBAAkDigB,OAAO,CAAChgB,GAA1D,iBAA2EC,YAA3E,CAAwF;AAAEC,qBAAO,EAAE;AAAX,aAAxF,EAA4GG,IAA5G,CACL,qDAAI,UAACye,SAAD,EAAqB;AACvB,kBAAM1W,KAAK,GAAG7E,GAAG,CAACuc,QAAJ,EAAd;AACAvc,iBAAG,CAACwc,QAAJ,CAAY1H,gCACPjQ,KADO,GACF;AACR0W,yBAAS,EAAEA;AADH,eADE,CAAZ;AAID,aAND,CADK,CAAP;AASD;AAhNmB;AAAA;AAAA,iBAGb,oBAAkB1W,KAAlB,EAAuC;AAC5C,mBAAOA,KAAK,IAAIA,KAAK,CAACpI,GAAtB;AACD;AALmB;AAAA;AAAA,iBAQb,4BAA0BoI,KAA1B,EAA+C;AACpD,mBAAOA,KAAK,IAAIA,KAAK,CAACyW,QAAtB;AACD;AAVmB;AAAA;AAAA,iBAab,uBAAqBzW,KAArB,EAA0C;AAC/C,mBAAOA,KAAK,IAAIA,KAAK,CAACyW,QAAN,CAAevM,IAAf,CAAoB,gBAAM;AAAA,qBAAI2N,MAAM,CAACxe,EAAP,KAAc,KAAlB;AAAA,aAA1B,CAAhB;AACD;AAfmB;AAAA;AAAA,iBAkBb,wBAAsB2G,KAAtB,EAA2C;AAChD,gBAAMoB,KAAK,GAAGpB,KAAK,CAACyW,QAAN,CAAevM,IAAf,CAAoB,gBAAM;AAAA,qBAAI2N,MAAM,CAACxe,EAAP,KAAc,MAAlB;AAAA,aAA1B,CAAd;;AACA,gBAAI2G,KAAK,IAAIoB,KAAb,EAAoB;AAClB,kBAAM0W,WAAW,GAAG1R,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACC,SAAL,CAAejF,KAAf,CAAX,CAApB;AACA0W,yBAAW,CAAChc,QAAZ,GAAuB,oEAAUgc,WAAW,CAACrY,SAAZ,CAAsBsY,OAAtB,GAAgC,IAA1C,EAAgDf,IAAI,CAACgB,GAAL,EAAhD,EAA4DF,WAAW,CAACjR,QAAZ,CAAqBnH,GAAjF,EAAsFoY,WAAW,CAACjR,QAAZ,CAAqBlH,KAA3G,CAAvB;AACA,qBAAOmY,WAAP;AACD;;AACD,mBAAO,IAAP;AACD;AA1BmB;AAAA;AAAA,iBA6Bb,wBAAsB9X,KAAtB,EAA2C;AAChD,mBAAOA,KAAK,IAAIA,KAAK,CAACyW,QAAN,CAAevM,IAAf,CAAoB,gBAAM;AAAA,qBAAI2N,MAAM,CAACxe,EAAP,KAAc,MAAlB;AAAA,aAA1B,CAAhB;AACD;AA/BmB;AAAA;AAAA,iBAkCb,wBAAsB2G,KAAtB,EAA2C;AAChD,mBAAOA,KAAK,IAAIA,KAAK,CAACyW,QAAN,CAAevM,IAAf,CAAoB,gBAAM;AAAA,qBAAI2N,MAAM,CAACxe,EAAP,KAAc,MAAlB;AAAA,aAA1B,CAAhB;AACD;AApCmB;AAAA;AAAA,iBAuCb,wBAAsB2G,KAAtB,EAA2C;AAChD,mBAAOA,KAAK,IAAIA,KAAK,CAACyW,QAAN,CAAevM,IAAf,CAAoB,gBAAM;AAAA,qBAAI2N,MAAM,CAACxe,EAAP,KAAc,MAAlB;AAAA,aAA1B,CAAhB;AACD;AAzCmB;AAAA;AAAA,iBA4Cb,8BAA4B2G,KAA5B,EAAiD;AACtD,mBAAOA,KAAK,IAAIA,KAAK,CAACyW,QAAN,CAAevM,IAAf,CAAoB,gBAAM;AAAA,qBAAI2N,MAAM,CAACxe,EAAP,KAAc,YAAlB;AAAA,aAA1B,CAAhB;AACD;AA9CmB;AAAA;AAAA,iBAiDb,6BAA2B2G,KAA3B,EAAgD;AACrD,mBAAOA,KAAK,IAAIA,KAAK,CAAC0W,SAAtB;AACD;AAnDmB;AAAA;AAAA,iBAsDb,2BAAyB1W,KAAzB,EAA8C;AACnD,mBAAOA,KAAK,IAAIA,KAAK,CAAC0W,SAAN,CAAgBxM,IAAhB,CAAqB,kBAAQ;AAAA,qBAAI+N,QAAQ,CAAC5e,EAAT,KAAgB,SAApB;AAAA,aAA7B,CAAhB;AACD;AAxDmB;AAAA;AAAA,iBA2Db,wBAAsB2G,KAAtB,EAA2C;AAChD,mBAAOA,KAAK,IAAIA,KAAK,CAAC0W,SAAN,CAAgBxM,IAAhB,CAAqB,kBAAQ;AAAA,qBAAI+N,QAAQ,CAAC5e,EAAT,KAAgB,MAApB;AAAA,aAA7B,CAAhB;AACD;AA7DmB;AAAA;AAAA,iBAgEb,4BAA0B2G,KAA1B,EAA+C;AACpD,mBAAOA,KAAK,IAAIA,KAAK,CAAC0W,SAAN,CAAgBxM,IAAhB,CAAqB,kBAAQ;AAAA,qBAAI+N,QAAQ,CAAC5e,EAAT,KAAgB,UAApB;AAAA,aAA7B,CAAhB;AACD;AAlEmB;AAAA;AAAA,iBAqEb,2BAAyB2G,KAAzB,EAA8C;AACnD,mBAAOA,KAAK,IAAIA,KAAK,CAAC0W,SAAN,CAAgBxM,IAAhB,CAAqB,kBAAQ;AAAA,qBAAI+N,QAAQ,CAAC5e,EAAT,KAAgB,SAApB;AAAA,aAA7B,CAAhB;AACD;AAvEmB;AAAA;AAAA,iBA0Eb,yBAAuB2G,KAAvB,EAA4C;AACjD,mBAAOA,KAAK,IAAIA,KAAK,CAACwW,OAAf,IAA0BpQ,IAAI,CAACC,SAAL,CAAe;AAAEM,mBAAK,EAAE3G,KAAK,CAACwW,OAAN,CAAc7P,KAAvB;AAA8BuR,qBAAO,EAAElY,KAAK,CAACwW,OAAN,CAAc0B,OAAd,CAAsBpY,QAAtB;AAAvC,aAAf,CAAjC;AACD;AA5EmB;AAAA;AAAA,iBA+Eb,wBAAsBE,KAAtB,EAA2C;AAChD,mBAAOA,KAAK,IAAIA,KAAK,CAACwW,OAAf,IAA0BxW,KAAK,CAACwW,OAAN,CAAc2B,IAA/C;AACD;AAjFmB;AAAA;AAAA,iBAoFb,wBAAsBnY,KAAtB,EAA2C;AAChD,mBAAOA,KAAK,IAAIA,KAAK,CAACwW,OAAf,IAA0BxW,KAAK,CAACwW,OAAN,CAAcnT,IAA/C;AACD;AAtFmB;AAAA;AAAA,iBAyFb,oBAAkBrD,KAAlB,EAAuC;AAC5C,mBAAOA,KAAK,IAAIA,KAAK,CAACwW,OAAtB;AACD;AA3FmB;AAAA;AAAA,iBA8Fb,yBAAuBxW,KAAvB,EAA4C;AACjD,mBAAOA,KAAK,IAAIA,KAAK,CAAC2W,MAAtB;AACD;AAhGmB;AAAA;AAAA,iBAmGb,sBAAoB3W,KAApB,EAAyC;AAC9C,mBAAOA,KAAP;AACD;AArGmB;AAAA;AAAA,iBAwGb,kBAAgBA,KAAhB,EAAqC;AAC1C,mBAAOA,KAAK,IAAIA,KAAK,CAACE,KAAtB;AACD;AA1GmB;;AAAA;AAAA;;;yBAAT2W,YAASvb;AAAA;;;eAATub;AAASrT,iBAATqT,UAAS;;AA8IpB,0DADC,qDAAOK,gEAAP,CACD;AAKA,0DADC,qDAAOA,uDAAP,CACD;AAeA,0DADC,qDAAOA,wDAAP,CACD;AAUA,0DADC,qDAAOA,2DAAP,CACD;AAaA,0DADC,qDAAOA,mEAAP,CACD;AAaA,0DADC,qDAAOA,oEAAP,CACD;AAnMA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAWA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAKA,0DADC,wDACD;AAxGWL,gBAAS,uDALrB,oDAAsB;AACrBrhB,YAAI,EAAE,MADe;AAErB4iB,gBAAQ,EAAE7B;AAFW,OAAtB,CAKqB,GAATM,UAAS,CAAT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UC/BAwB;;;;;AAIX,gCACU9kB,gBADV,EAEU+kB,eAFV,EAE0C;AAAA;;AAAA;;AAExC;AAHQ;AACA;;AA0BV,kCAAgB,UAACC,IAAD,EAAeC,QAAf,EAAiChf,MAAjC,EAAmD;AACjE,gBAAMif,KAAK,GAAG9b,IAAI,CAAC+C,GAAL,CAASlG,MAAT,EAAiB,CAAjB,CAAd;AACA,gBAAM6G,KAAK,GAAGkY,IAAI,GAAGC,QAArB;AACA,gBAAMjY,GAAG,GAAGF,KAAK,GAAG7G,MAAR,GACRmD,IAAI,CAACgE,GAAL,CAASN,KAAK,GAAGmY,QAAjB,EAA2Bhf,MAA3B,CADQ,GAER6G,KAAK,GAAGmY,QAFZ;AAGA,mBAAO,QAAKF,eAAL,CAAqBI,WAArB,CAAiC,QAAKC,cAAtC,EAAsD;AAAEtY,mBAAK,EAAEA,KAAT;AAAgBE,iBAAG,EAAEA,GAArB;AAA0B/G,oBAAM,EAAEif;AAAlC,aAAtD,CAAP;AACD,WAPD;;AAvBE,kBAAKllB,gBAAL,CAAsBqlB,YAAtB,CAAmChnB,SAAnC,CAA6C,UAAChC,CAAD;AAAA,mBAAc,QAAKipB,eAAL,EAAd;AAAA,WAA7C;;AACA,kBAAKA,eAAL;;AAJwC;AAKzC;;;;iBAED,2BAAe;AAAA;;AACb,iBAAKtlB,gBAAL,CAAsB8N,GAAtB,CAA0B,CACxB,6BADwB,EAExB,yBAFwB,EAGxB,6BAHwB,EAIxB,0BAJwB,EAKxB,yBALwB,EAMxB,0BANwB,CAA1B,EAOGzP,SAPH,CAOa,UAACknB,WAAD,EAAqB;AAChC,qBAAI,CAACC,iBAAL,GAAyBD,WAAW,CAAC,6BAAD,CAApC;AACA,qBAAI,CAACE,aAAL,GAAqBF,WAAW,CAAC,yBAAD,CAAhC;AACA,qBAAI,CAACG,iBAAL,GAAyBH,WAAW,CAAC,6BAAD,CAApC;AACA,qBAAI,CAACI,cAAL,GAAsBJ,WAAW,CAAC,0BAAD,CAAjC;AACA,qBAAI,CAACK,aAAL,GAAqBL,WAAW,CAAC,yBAAD,CAAhC;AACA,qBAAI,CAACH,cAAL,GAAsBG,WAAW,CAAC,0BAAD,CAAjC;;AACA,qBAAI,CAACM,OAAL,CAAapF,IAAb;AACD,aAfD;AAgBD;;;;QA9BgCqF;;;yBAAtBhB,gBAAa9U;AAAA;;;eAAb8U;AAAa7U,iBAAb6U,cAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aCI1B;AA6BA;AAGA;AAEA;AAUA;;;AACO,eAASiB,oBAAT,CAA6BlmB,IAA7B,EAA6C;AAClD,eAAO,IAAIC,2EAAJ,CAAwBD,IAAxB,CAAP;AACD;;AAED,UAAMmmB,UAAU,GAAG,CACjBC,kEADiB,EAEjBC,wDAFiB,EAGjBC,sDAHiB,EAIjBC,sDAJiB,EAKjBC,gEALiB,EAMjBC,sDANiB,EAOjBC,+DAPiB,CAAnB;AASA,UAAMC,OAAO,GAAG,CACdC,yDADc,EAEdC,0DAFc,EAGdC,wEAHc,EAIdC,kEAJc,EAKdC,8DALc,EAMdC,sEANc,EAOdC,wEAPc,EAQdC,kEARc,EASdC,kEATc,EAUdL,kEAVc,EAWdM,kEAXc,EAYdC,6EAZc,EAadC,oEAbc,EAcdC,2EAdc,EAedC,mEAfc,EAgBdC,oEAhBc,EAiBdC,oEAjBc,EAkBdC,4EAlBc,EAmBdC,kEAnBc,EAoBdC,mEApBc,EAqBdC,sEArBc,EAsBdC,kEAtBc,EAuBdC,oEAvBc,EAwBdC,mEAxBc,EAyBdC,iFAzBc,EA0BdC,sEA1Bc,EA2BdC,wDA3Bc,EA4BdC,0EA5Bc,EA6BdhB,6EA7Bc,EA8Bde,gEA9Bc,EA+BdE,8EA/Bc,EAgCdC,wEAhCc,EAiCdC,yFAjCc,EAkCdC,iFAlCc,EAmCdC,4EAnCc,EAoCdC,wEApCc,CAAhB;;UA6EaC;;;;;yBAAAA;AAAY;;;cAAZA;;;4BAhCNlC,UACHmC,2EAAyB;AACvBjnB,gBAAM,EAAE;AACNnB,mBAAO,EAAEooB,iEADH;AAEN9nB,sBAAU,EAAEklB,oBAFN;AAGNjlB,gBAAI,EAAE,CAAC6mB,6DAAD;AAHA,WADe;AAMvB/lB,iBAAO,EAAE;AANc,SAAzB,GAQAgnB,qEACAC,qEAA0B;AACxBC,eAAK,EAAE,OADiB;AAExBC,uBAAa,EAAE,KAFS;AAGxBC,mBAAS,EAAE,IAHa;AAIxBC,iBAAO,EAAE,GAJe;AAKxBC,mBAAS,EAAE,CALa;AAMxBC,gBAAM,EAAE,EANgB;AAOxBC,gBAAM,EAAE,EAPgB;AAQxBC,mBAAS,EAAE,GARa;AASxBC,kBAAQ,EAAE,IATc;AAUxBlc,aAAG,EAAE,IAVmB;AAWxBjB,aAAG,EAAE,IAXmB;AAYxBod,mBAAS,EAAEV;AAZa,SAA1B,GAcAW,wEApEF/C,2DACAC,4DACAC,0EACAC,oEACAC,gEACAC,wEACAC,0EACAC,oEACAC,oEACAL,oEACAM,oEACAC,+EACAC,sEACAC,6EACAC,qEACAC,sEACAC,sEACAC,8EACAC,oEACAC,qEACAC,wEACAC,oEACAC,sEACAC,qEACAC,mFACAC,wEACAC,0DACAC,4EACAhB,+EACAe,kEACAE,gFACAC,0EACAC,2FACAC,mFACAC,8EACAC,0EAsCEE;;;;6HAGSD,eAAY;AAAApmB,yBArFvB2jB,kEAqFuB,EApFvBC,wDAoFuB,EAnFvBC,sDAmFuB,EAlFvBC,sDAkFuB,EAjFvBC,gEAiFuB,EAhFvBC,sDAgFuB,EA/EvBC,+DA+EuB,EAnCrBkD,oEAmCqB;AAnCN9rB,oBAzCjB8oB,yDAyCiB,EAxCjBC,0DAwCiB,EAvCjBC,wEAuCiB,EAtCjBC,kEAsCiB,EArCjBC,8DAqCiB,EApCjBC,sEAoCiB,EAnCjBC,wEAmCiB,EAlCjBC,kEAkCiB,EAjCjBC,kEAiCiB,EAhCjBL,kEAgCiB,EA/BjBM,kEA+BiB,EA9BjBC,6EA8BiB,EA7BjBC,oEA6BiB,EA5BjBC,2EA4BiB,EA3BjBC,mEA2BiB,EA1BjBC,oEA0BiB,EAzBjBC,oEAyBiB,EAxBjBC,4EAwBiB,EAvBjBC,kEAuBiB,EAtBjBC,mEAsBiB,EArBjBC,sEAqBiB,EApBjBC,kEAoBiB,EAnBjBC,oEAmBiB,EAlBjBC,mEAkBiB,EAjBjBC,iFAiBiB,EAhBjBC,sEAgBiB,EAfjBC,wDAeiB,EAdjBC,0EAciB,EAbjBhB,6EAaiB,EAZjBe,gEAYiB,EAXjBE,8EAWiB,EAVjBC,wEAUiB,EATjBC,yFASiB,EARjBC,iFAQiB,EAPjBC,4EAOiB,EANjBC,wEAMiB,EANDE,iEAMC,EAYfC,mEAZe,EAYEC,4DAZF,EA2BfW,oEA3Be,CAmCM;AARN5rB,oBA7EjBqoB,kEA6EiB,EA5EjBC,wDA4EiB,EA3EjBC,sDA2EiB,EA1EjBC,sDA0EiB,EAzEjBC,gEAyEiB,EAxEjBC,sDAwEiB,EAvEjBC,+DAuEiB,EApEjBE,yDAoEiB,EAnEjBC,0DAmEiB,EAlEjBC,wEAkEiB,EAjEjBC,kEAiEiB,EAhEjBC,8DAgEiB,EA/DjBC,sEA+DiB,EA9DjBC,wEA8DiB,EA7DjBC,kEA6DiB,EA5DjBC,kEA4DiB,EA3DjBL,kEA2DiB,EA1DjBM,kEA0DiB,EAzDjBC,6EAyDiB,EAxDjBC,oEAwDiB,EAvDjBC,2EAuDiB,EAtDjBC,mEAsDiB,EArDjBC,oEAqDiB,EApDjBC,oEAoDiB,EAnDjBC,4EAmDiB,EAlDjBC,kEAkDiB,EAjDjBC,mEAiDiB,EAhDjBC,sEAgDiB,EA/CjBC,kEA+CiB,EA9CjBC,oEA8CiB,EA7CjBC,mEA6CiB,EA5CjBC,iFA4CiB,EA3CjBC,sEA2CiB,EA1CjBC,wDA0CiB,EAzCjBC,0EAyCiB,EAxCjBhB,6EAwCiB,EAvCjBe,gEAuCiB,EAtCjBE,8EAsCiB,EArCjBC,wEAqCiB,EApCjBC,yFAoCiB,EAnCjBC,iFAmCiB,EAlCjBC,4EAkCiB,EAjCjBC,wEAiCiB,EAKfE,iEALe;AAQM;AAHN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtHXe;;AAA2GA;AAAA;;AAAA;;AAAA;;AAAA,mBAASC,wCAAT;AAAqC,WAArC;;AACzGD;;AACAA;;AAAMA;;AAAqCA;;AAC7CA;;;;;;;;AAHyCA;;AAClCA;;AAAAA,sJAAe,KAAf,EAAeE,UAAf;;AACCF;;AAAAA;;;;;;;;;;;;;;;;;;;;;;AAaNA;;AACEA;;AAEEA;AAAAA;;AAAA;;AAAA;AAAA;;;;AAIAA;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAA2BA;;AACzCA;;AAAwCA;;;;AAAkCA;;AAC5EA;;AACFA;;;;;;;;AAXIA;;AAAAA,8MAAiF,YAAjF,EAAiFG,kCAAjF,EAAiF,kBAAjF,EAAiFA,gKAAjF,EAAiF,yBAAjF,EAAiFH,uEAAjF;;AAKqBA;;AAAAA;;AACEA;;AAAAA,yJAAkB,KAAlB,EAAkBA,gFAAlB;;AAETA;;AAAAA;;AAC0BA;;AAAAA;;;;;;AAhB9CA;;AACEA;;AACEA;;;;AACAA;;AAAMA;;;;AAA4BA;;AACpCA;;AACAA;;AAcFA;;;;;;AAjBSA;;AAAAA,0JAAmB,KAAnB,EAAmBA,gFAAnB;;AACCA;;AAAAA;;AAEuBA;;AAAAA;;;;;;AA2BnCA;;AAAgEA;;;;AAAsCA;;;;AAAtCA;;AAAAA;;;;;;;;AAG9DA;;AAA8EA;AAAAA;;AAAA;;AAAA;AAAA;;AAC5EA;;;;;;;;;;AAOEA;;;;AACFA;;AACFA;;;;;;;AARIA;;AAAAA,8KAA+C,UAA/C,EAA+CI,6TAA/C,EAA+C,eAA/C,EAA+CA,iFAA/C,EAA+C,kBAA/C,EAA+CC,iDAA/C;;AAMqBL;;AAAAA,oKAA6B,KAA7B,EAA6BA,2FAA7B;;;;;;AAT3BA;;AACEA;;;;AAWFA;;;;;;AAXoCA;;AAAAA;;;;;;;;AAkBlCA;;AACEA;;AAAiEA;;AAAUA;;AAAIA;;AAAWA;;;;AAAkCA;;AAC5HA;;AAAiBA;AAAAA;;AAAA;;AAAA;AAAA;;AAAiBA;;AAAUA;;AAAGA;;AAAWA;;;;AAAkCA;;AAC5FA;;AAAgDA;;AAAUA;;AAAUA;;AAAWA;;;;AAAmCA;;AAClHA;;AAAsEA;;AAAUA;;AAAWA;;AAAWA;;;;AAAuCA;;AAC7IA;;AAAoEA;;AAAUA;;AAAeA;;AAAWA;;;;AAAqCA;;AAC7IA;;AAA8DA;;AAAUA;;AAASA;;AAAWA;;;;AAAoCA;;AAChIA;;AAAiBA;AAAAA;;AAAA;;AAAA;AAAA;;AAAmBA;;AAAUA;;AAAIA;;AAAWA;;;;AAAoCA;;AACnGA;;;;AAP4FA;;AAAAA;;AAChCA;;AAAAA;;AACqBA;;AAAAA;;AACuBA;;AAAAA;;AACEA;;AAAAA;;AACZA;;AAAAA;;AAC/BA;;AAAAA;;;;;;;;AAG7DA;;AAAiBA;AAAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAsBA;;AAAUA;;AAASA;;AAAWA;;;;AAAmCA;;;;AAAnCA;;AAAAA;;;;;;;;;;;;;;;;;;;UCxElEM;AAiDX,iCACUC,kBADV,EAESjqB,gBAFT,EAGS+V,eAHT,EAIU7X,MAJV,EAKUgsB,aALV,EAMUnmB,KANV,EAOU9F,eAPV,EAQUksB,UARV,EASUtmB,gBATV,EAUUC,mBAVV,EAWUsmB,WAXV,EAWqC;AAAA;;AAAA;;AAV3B;AACD;AACA;AACC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1DV,uBAAe,CACb;AAAEC,gBAAI,EAAE,IAAR;AAAc1f,iBAAK,EAAE;AAArB,WADa,EAEb;AAAE0f,gBAAI,EAAE,IAAR;AAAc1f,iBAAK,EAAE;AAArB,WAFa,EAGb;AAAE0f,gBAAI,EAAE,IAAR;AAAc1f,iBAAK,EAAE;AAArB,WAHa,CAAf;AAKA,wBAAgB,CACd;AAAE1I,gBAAI,EAAE,sBAAR;AAAgC0I,iBAAK,EAAE,mCAAvC;AAA4E2f,iBAAK,EAAE,CAC/E;AAAE9rB,iBAAG,EAAE,eAAP;AAAwByD,kBAAI,EAAE,mBAA9B;AAAmDqN,yBAAW,EAAE,0BAAhE;AAA4F3E,mBAAK,EAAE;AAAnG,aAD+E,EAE/E;AAAEnM,iBAAG,EAAE,kBAAP;AAA2ByD,kBAAI,EAAE,sBAAjC;AAAyDqN,yBAAW,EAAE,6BAAtE;AAAqG3E,mBAAK,EAAE;AAA5G,aAF+E,EAG/E;AAAEnM,iBAAG,EAAE,mBAAP;AAA4ByD,kBAAI,EAAE,uBAAlC;AAA2DqN,yBAAW,EAAE,8BAAxE;AAAwG3E,mBAAK,EAAE;AAA/G,aAH+E;AAAnF,WADc,EAOd;AAAE1I,gBAAI,EAAE,qBAAR;AAA+B0I,iBAAK,EAAE,kCAAtC;AAA0E2f,iBAAK,EAAE,CAC7E;AAAE9rB,iBAAG,EAAE,YAAP;AAAqByD,kBAAI,EAAE,gBAA3B;AAA6CqN,yBAAW,EAAE,uBAA1D;AAAmF3E,mBAAK,EAAE;AAA1F,aAD6E,EAE7E;AAAEnM,iBAAG,EAAE,eAAP;AAAwByD,kBAAI,EAAE,mBAA9B;AAAmDqN,yBAAW,EAAE,0BAAhE;AAA4F3E,mBAAK,EAAE;AAAnG,aAF6E,EAG7E;AAAEnM,iBAAG,EAAE,iBAAP;AAA0ByD,kBAAI,EAAE,qBAAhC;AAAuDqN,yBAAW,EAAE,4BAApE;AAAkG3E,mBAAK,EAAE;AAAzG,aAH6E;AAAjF,WAPc,EAad;AAAE1I,gBAAI,EAAE,iBAAR;AAA2B0I,iBAAK,EAAE,8BAAlC;AAAkE2f,iBAAK,EAAE,CACrE;AAAE9rB,iBAAG,EAAE,iBAAP;AAA0ByD,kBAAI,EAAE,qBAAhC;AAAuDqN,yBAAW,EAAE,4BAApE;AAAkG3E,mBAAK,EAAE;AAAzG,aADqE,EAErE;AAAEnM,iBAAG,EAAE,kBAAP;AAA2ByD,kBAAI,EAAE,sBAAjC;AAAyDqN,yBAAW,EAAE,6BAAtE;AAAqG3E,mBAAK,EAAE;AAA5G,aAFqE,EAGrE;AAAEnM,iBAAG,EAAE,eAAP;AAAwByD,kBAAI,EAAE,mBAA9B;AAAmDqN,yBAAW,EAAE,0BAAhE;AAA4F3E,mBAAK,EAAE;AAAnG,aAHqE;AAAzE,WAbc,EAmBd;AAAE1I,gBAAI,EAAE,qBAAR;AAA+B0I,iBAAK,EAAE,kCAAtC;AAA0E2f,iBAAK,EAAE,CAC7E;AAAE9rB,iBAAG,EAAE,kBAAP;AAA2ByD,kBAAI,EAAE,sBAAjC;AAAyDqN,yBAAW,EAAE,6BAAtE;AAAqG3E,mBAAK,EAAE;AAA5G,aAD6E,EAE7E;AAAEnM,iBAAG,EAAE,iBAAP;AAA0ByD,kBAAI,EAAE,qBAAhC;AAAuDqN,yBAAW,EAAE,4BAApE;AAAkG3E,mBAAK,EAAE;AAAzG,aAF6E,EAG7E;AAAEnM,iBAAG,EAAE,oBAAP;AAA6ByD,kBAAI,EAAE,wBAAnC;AAA6DqN,yBAAW,EAAE,+BAA1E;AAA2G3E,mBAAK,EAAE;AAAlH,aAH6E;AAAjF,WAnBc,CAAhB;AA2BA,uBAAyB,KAAKzM,MAAL,CAAYE,MAAZ,CACxBsG,IADwB,CAEvB,yDAAO,UAACpG,KAAD;AAAA,mBAAgDA,KAAK,YAAYisB,2DAAjE;AAAA,WAAP,CAFuB,EAGvB,sDAAI,UAACjsB,KAAD,EAAyB;AAC3B,mBAAO,OAAI,CAACksB,MAAL,CAAYlgB,MAAZ,CAAmB,UAACnF,CAAD,EAAIC,CAAJ;AAAA,qBAAUD,CAAC,CAACoF,MAAF,CAASnF,CAAC,CAACklB,KAAX,CAAV;AAAA,aAAnB,EAAgD,EAAhD,EAAoD3T,IAApD,CAAyD,UAAC8T,IAAD;AAAA,qBAAensB,KAAK,CAACE,GAAN,CAAUoZ,QAAV,CAAmB6S,IAAI,CAACjsB,GAAxB,CAAf;AAAA,aAAzD,CAAP;AACD,WAFD,CAHuB,CAAzB;AAOA,4BAAkC,KAAKyrB,kBAAL,CAAwBS,OAAxB,CAAgC,CAACC,qEAAD,CAAhC,EACjCjmB,IADiC,CAEhC,sDAAI,UAACkmB,MAAD;AAAA,mBAAiBA,MAAM,CAACC,OAAxB;AAAA,WAAJ,CAFgC,EAGhC,+DAHgC,CAAlC;AAKO,yBAAkB,CAAlB,CAc8B,CAEnC;;AACA,eAAK7qB,gBAAL,CAAsB8qB,QAAtB,CAA+B,KAAKC,KAAL,CAAWpY,GAAX,CAAe,WAAC;AAAA,mBAAIqY,CAAC,CAACX,IAAN;AAAA,WAAhB,CAA/B;AACA,cAAMY,OAAO,GAAG,KAAKjrB,gBAAL,CAAsBkrB,cAAtB,EAAhB;AACA,eAAKlrB,gBAAL,CAAsBE,GAAtB,CAA0B,KAAK6qB,KAAL,CAAWpY,GAAX,CAAe,WAAC;AAAA,mBAAIqY,CAAC,CAACX,IAAN;AAAA,WAAhB,EAA4BzS,QAA5B,CAAqCqT,OAArC,IAAgDA,OAAhD,GAA0D,KAAKF,KAAL,CAAW,CAAX,EAAcV,IAAlG;AACD;;;;iBAED,oBAAQ;AAAA;;AACN,iBAAKtmB,KAAL,CAAWonB,MAAX,CAAkBC,kEAAlB,EAAwC/sB,SAAxC,CAAkD,aAAG,EAAG;AACtD,kBAAIgG,GAAJ,EAAS;AACP,uBAAI,CAACR,gBAAL,CAAsBO,UAAtB,oBAAkDC,GAAlD,eAAiE,WAAC;AAAA,yBAAIgnB,CAAC,CAAC5mB,KAAF,CAAQ,MAAR,EAAgB,IAAhB,EAAsB,KAAtB,CAAJ;AAAA,iBAAlE,EAAoGH,YAApG,GAAmHjG,SAAnH,CAA6H,iBAAO,EAAG;AACrI,sBAAMitB,UAAU,GAAG,OAAI,CAACC,OAAxB;AACA,yBAAI,CAACA,OAAL,GAAeA,OAAO,CAACtlB,MAAvB;AACA,sBAAI,OAAI,CAACslB,OAAL,GAAeD,UAAnB,EAA+B,OAAI,CAACxnB,mBAAL,CAAyBuC,OAAzB,CAAiC,qBAAjC;AAChC,iBAJD;AAKD;AACF,aARD;AASD;;;iBAEK,kBAAM;;;;;;;AACV,6BAAM,KAAKmlB,MAAL,CAAYC,MAAZ,EAAN;;;AACA,2BAAKvB,aAAL,CAAmBwB,SAAnB;;;;;;;;;AACD;;;iBAED,iBAAK;AAAA;;AACH,iBAAKC,UAAL,CAAgBttB,SAAhB,CAA0B,UAAMutB,SAAN;AAAA,qBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA,6BACvCA,SADuC;AAAA;AAAA;AAAA;;AAAA;AAEzC,+BAAM,KAAKJ,MAAL,CAAY/iB,KAAZ,EAAN;;AAFyC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAnB;AAAA,aAA1B;AAKD;;;iBAED,mBAAO;AAAA;;AACL,mBAAO,KAAKsiB,KAAL,CAAWpU,IAAX,CAAgB,WAAC;AAAA,qBAAIqU,CAAC,CAACX,IAAF,KAAW,OAAI,CAACrqB,gBAAL,CAAsB6rB,WAArC;AAAA,aAAjB,CAAP;AACD;;;iBAED,gBAAI;AACF,iBAAK5tB,eAAL,CAAqB6O,KAArB;AACD;;;iBAED,eAAM4I,QAAN,EAAmB;AACjB,iBAAKyU,UAAL,CAAgB2B,WAAhB,CAA4BpW,QAA5B;AACA,iBAAKxX,MAAL,CAAY6lB,QAAZ,CAAqB,CAAC,eAAD,CAArB;AACD;;;iBAED,kBAAM;AACJ,iBAAKhgB,KAAL,CAAW2f,QAAX,CAAoB,IAAIqI,4DAAJ,EAApB;AACD;;;iBAED,2BAAe;AACb,gBAAMC,QAAQ,GAAG,KAAK5B,WAAL,CAAiB5iB,IAAjB,CAAsBykB,8DAAtB,EAAuC;AACtDjmB,kBAAI,EAAE,KAAKkmB;AAD2C,aAAvC,CAAjB;AAGD;;;;;;;yBAlHUlC,iBAAcN;AAAA;;;cAAdM;AAAczqB;AAAA4sB;AAAA;uEA+CdC,oEAAU;;;;;;;;;;;;;;;;;ADvEvB1C;;;;AAEEA;;;;;;;;AAOEA;;AAEEA;;AAA0DA;AAAA,qBAAS9hB,YAAT;AAAiB,aAAjB;;AACxD8hB;;AAA4BA;;AAAIA;;AAClCA;;AAEAA;;AACAA;;AAAmBA;;;;;;AAAiEA;;AACpFA;;AAEAA;;AACEA;;AACFA;;AACAA;;AACEA;;AAIFA;;AACFA;;AAEAA;;;;AAEEA;;AACEA;;AAoBFA;;AACFA;;AACFA;;AAEAA;;AACEA;;AAEEA;;AAA0DA;AAAA,qBAAS9hB,YAAT;AAAiB,aAAjB;;AACxD8hB;;AAA4BA;;AAAgDA;;AAC9EA;;AACAA;;AAEAA;;;;AAEAA;;;;AAcAA;;AACAA;;AACEA;;AAAUA;;AAAcA;;AAC1BA;;AACAA;;AACEA;;;;AASAA;;AAGFA;;AACFA;;AAEAA;;;;;;AAMEA;;AACFA;;AACFA;;AACFA;;;;;;;;;;;;;;;;AA9GoEA;;AAOhEA;;AAAAA,mLAA+C,QAA/C,EAA+CA,gGAA/C;;AADAA;;AAUqBA;;AAAAA;;AAGKA;;AAAAA;;AACjBA;;AAAAA,qMAAwB,KAAxB,EAAwB,uDAAxB;;AAG0BA;;AAAAA;;AAOLA;;AAAAA;;AAGMA;;AAAAA;;AA4BJA;;AAAAA;;AAIVA;;AAAAA;;AAEuCA;;AAAAA;;AAenCA;;AAAAA;;AAIPA;;AAAAA,iLAA2C,UAA3C,EAA2C2C,GAA3C;;AAoBjB3C;;AAAAA;;;;;;;ACjDyC,2DAA5C,qDAAO,UAACjd,KAAD;AAAA,eAAgBA,KAAK,CAACC,IAAN,CAAWwW,QAA3B;AAAA,OAAP,CAA4C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvCrCoJ;;AACEA;;;;;;AACFA;;;;;;AADoBA;;AAAAA;;;;;;AAVxBA;;AACEA;;AACEA;;;;;;;;;;;;AAGEA;;AACFA;;AACAA;;AAAcA;;;;AAAsCA;;AACpDA;;AAAwCA;;;;AAA6CA;;AACrFA;;AAGAA;;;;;;AAIEA;;AACFA;;AACFA;;AACFA;;;;;;AAhBMA;;AAAAA;;AAEqBA;;AAAAA;;AAETA;;AAAAA;;AAC0BA;;AAAAA;;AACzBA;;AAAAA;;AAIbA;;AAAAA,gQAA2E,eAA3E,EAA2EC,+EAA3E;;AAGqBD;;AAAAA;;;;UAYpBE,mBAEX,0BACwCN,gBADxC,EAC2E;AAAA;;AAAnC;AACnC;;;yBAJMM,kBAAeF,gEAGhBG,iFAHgB;AAGK;;;cAHpBD;AAAejtB;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AA9BxB2sB;;AAAkBA;;;;AAAwCA;;AAAgCA;;;;AAAyCA;;AACnIA;;AACEA;;;;AAoBFA;;;;AAtBkBA;;AAAAA;;AAAwEA;;AAAAA;;AAEvDA;;AAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPnCtc;;AAAUA;AAAA,mBAASrK,wBAAT;AAAiC,WAAjC;;AACRqK;;AAAgBA;;;;AAA6BA;;AAC7CA;;;;;;AACAA;;AACEA;;AAAgEA;AAAAA;;AAAA;;AAAA,mBAAS0c,yBAAT;AAA2B,WAA3B;;AAA6B1c;;AAAUA;;AAAYA;;AAAWA;;AAC9HA;;AAAgEA;AAAAA;;AAAA;;AAAA,mBAAS2c,yBAAT;AAA2B,WAA3B;;AAA6B3c;;AAAUA;;AAAaA;;AAAWA;;AAC/HA;;AAAwBA;AAAAA;;AAAA;;AAAA,mBAAS4c,wBAAT;AAA0B,WAA1B;;AAA4B5c;;AAAUA;;AAAKA;;AAAWA;;AAChFA;;AACFA;;;;;;;;AAPkBA;;AAAAA;;AACEA;;AAAAA;;AAEQA;;AAAAA;;AACAA;;AAAAA;;;;UCEnB6c,iBAEX,wBACSlL,WADT,EACiC;AAAA;;AAAxB;AACJ;;;yBAJMkL,gBAAa7c;AAAA;;;cAAb6c;AAAattB;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;ADT1BqQ;;AACEA;;AAWFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEZA,UAAY8c,WAAZ;;AAAA,iBAAYA,UAAZ,EAAsB;AACpBA;AACAA;AACAA;AACD,OAJD,EAAYA,WAAU,KAAVA,WAAU,MAAtB;;AAMA,UAAYC,UAAZ;;AAAA,iBAAYA,SAAZ,EAAqB;AACnBA;AACAA;AACAA;AACD,OAJD,EAAYA,UAAS,KAATA,UAAS,MAArB;;AAMA,UAAYC,UAAZ;;AAAA,iBAAYA,SAAZ,EAAqB;AACnBA;AACAA;AACAA;AACAA;AACD,OALD,EAAYA,UAAS,KAATA,UAAS,MAArB;;AAOA,UAAYC,aAAZ;;AAAA,iBAAYA,YAAZ,EAAwB;AACtBA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACAA;AACD,OArBD,EAAYA,aAAY,KAAZA,aAAY,MAAxB;;AAuBA,UAAYC,YAAZ;;AAAA,iBAAYA,WAAZ,EAAuB;AACrBA;AACAA;AACAA;AACAA;AACAA;AACD,OAND,EAAYA,YAAW,KAAXA,YAAW,MAAvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCA,UAAMC,aAAa,GAAW,eAA9B;;UAKaC;AAEX,4BACUtpB,mBADV,EAEUC,KAFV,EAGU7F,MAHV,EAGwB;AAAA;;AAFd;AACA;AACA;AACL;;;;iBAEL,qBAAYuiB,IAAZ,EAA0ChU,KAA1C,EAAoE;AAClE,gBAAM2W,MAAM,GAAG,KAAKrf,KAAL,CAAWG,cAAX,CAA0BmpB,8EAA1B,CAAf;;AACA,gBAAI,CAACjK,MAAL,EAAa;AACX,mBAAKtf,mBAAL,CAAyBsD,KAAzB,CAA+B,wBAA/B;AACA,mBAAKlJ,MAAL,CAAY6lB,QAAZ,CAAqB,CAACoJ,aAAD,CAArB;AACD;;AACD,mBAAO/J,MAAP;AACD;;;;;;;yBAfUgK,YAASlU;AAAA;;;eAATkU;AAASnd,iBAATmd,UAAS;AAAAld,oBAFR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPZF;;AACEA;;AACFA;;;;;;AADOA;;AAAAA,mKAA2B,KAA3B,EAA2Bsd,gBAA3B;;;;;;AAIPtd;;AACEA;;;;AACFA;;;;;;AADOA;;AAAAA,gKAAwB,KAAxB,EAAwBA,uFAAxB;;;;;;AAIPA;;AACEA;;;;AACFA;;;;;;AADOA;;AAAAA,mKAA2B,KAA3B,EAA2BA,0FAA3B;;;;UCNIud,mBALb;AAAA;;AAOE,oBAAY,IAAZ;AACA,0BAAgCC,uEAAhC;AAED;;;yBALYD;AAAe;;;cAAfA;AAAehuB;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;ADR5BqQ;;AAGEA;;AAKAA;;AAKAA;;AAIFA;;;;AAdWA;;AAAAA;;AAKAA;;AAAAA;;AAKAA;;AAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UEuBEyd;AAKX,qCACkCznB,IADlC,EAKUuB,SALV,EAMUzD,mBANV,EAOUG,UAPV,EAQUF,KARV,EASU/F,cATV,EASwC;AAAA;;AARN;AAIxB;AACA;AACA;AACA;AACA;AAZV,6BAAmB,KAAK+F,KAAL,CAAWG,cAAX,CAA0BC,oFAA1B,CAAnB;AACA,qBAAc,KAAKJ,KAAL,CAAWG,cAAX,CAA0BC,gFAA1B,CAAd;AAYK;;;;iBAEL,oBAAQ,CACP;;;iBAED,iBAAK;AACH,iBAAKoD,SAAL,CAAekB,KAAf;AACD;;;iBAEK,qBAAS;;;;;;;4BACT,KAAKzC,IAAL,CAAU2S,KAAV,CAAgB9K,KAAhB,IAAyB,KAAK0W,WAAL,CAAiBhc;;;;;AAC5C,2BAAKvK,cAAL,CAAoBsI,YAApB;;;AAEgB,6BAAM,KAAKrC,UAAL,CAAgBypB,cAAhB,CAA+B,KAAKrpB,GAApC,EAAyC,KAAK2B,IAAL,CAAU2S,KAAV,CAAgB7S,EAAzD,CAAN;;;AAAR6nB;AACN,2BAAK7pB,mBAAL,CAAyBoD,OAAzB,CAAiC,yBAAjC;AACA,2BAAKuB,KAAL;;;;;;;AAEAtB,6BAAO,CAACC,KAAR;AACA,2BAAKtD,mBAAL,CAAyBsD,KAAzB,CAA+B,uBAA/B;;;AAEF,2BAAKpJ,cAAL,CAAoBqJ,WAApB;;;;;AAEA,2BAAKvD,mBAAL,CAAyBsD,KAAzB,CAA+B,uBAA/B;;;;;;;;;AAEH;;;;;;;yBAvCUqmB,qBAAkBG,gEAMnBC,qEANmB,GAMJD;AAAA;;;cANdH;AAAkBluB;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AAzB3BiuB;;AAAqBA;;;;AAAwCA;;AAC7DA;;AACEA;;AAAGA;;;;AAA+CA;;AAClDA;;AAAkBA;;;;AAAsCA;;AACxDA;;AACEA;;AACEA;;;;AACEA;;AACFA;;AACAA;;AAAcA;;;;AAAuCA;;AACrDA;;;;;;AACAA;;;;AACEA;;AACFA;;AACFA;;AACFA;;AACFA;;AACAA;;AACEA;;AAAmBA;AAAA,qBAAShmB,WAAT;AAAgB,aAAhB;;AAAkBgmB;;;;AAA0CA;;AAC/EA;;AAA0CA;AAAA,qBAAShmB,eAAT;AAAoB,aAApB;;AAAsCgmB;;;;AAAyCA;;AAC3HA;;;;AApBqBA;;AAAAA;;AAEhBA;;AAAAA;;AACeA;;AAAAA;;AAEDA;;AAAAA;;AACQA;;AAAAA;;AACEA;;AAAAA;;AAETA;;AAAAA;;AAC0BA;;AAAAA;;AACnBA;;AAAAA;;AAOYA;;AAAAA;;AAC2CA;;AAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACT5E7lB;;AAAiIA;;;;AAA4CA;;;;;;AAA5CA;;AAAAA;;;;;;AACjIA;;;;;;;;;;AAAiIA;;;;;;AAE/HA;;;;;;;;AAAKA,6JAAiC,KAAjC,EAAiCC,eAAjC,EAAiCD,2DAAjC;;;;;;AACLA;;;;;;;;AAAKA,4JAAgC,KAAhC,EAAgCE,cAAhC,EAAgCF,2DAAhC;;;;;;AACLA;;;;;;;;AAAKA,gKAAmC,KAAnC,EAAmCG,kBAAnC,EAAmCH,2DAAnC;;;;;;AACLA;;;;;;AAAKA;;;;;;AAJPA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;;;;;AAJyEA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;;;;;AAGnEA;;;;;;;;;;AAAKA,8PAAgF,KAAhF,EAAgFrF,kBAAhF,EAAgFqF,2DAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;;;;;;;;;;;;;;;UAgBjI+lB;AAKX,gCACkC9nB,IADlC,EAKUuB,SALV,EAMUzD,mBANV,EAOUC,KAPV,EAQUE,UARV,EASUjG,cATV,EASwC;AAAA;;AARN;AAIxB;AACA;AACA;AACA;AACA;AAZV,6BAAmB,KAAK+F,KAAL,CAAWG,cAAX,CAA0BC,oFAA1B,CAAnB;AACA,qBAAc,KAAKJ,KAAL,CAAWG,cAAX,CAA0BC,gFAA1B,CAAd;AAYK;;;;iBAEL,oBAAQ,CACP;;;iBAED,iBAAK;AACH,iBAAKoD,SAAL,CAAekB,KAAf;AACD;;;iBAEK,gBAAI;;;;;;;4BACJ,KAAKzC,IAAL,CAAU+nB,IAAV,CAAeroB,IAAf,IAAuB,KAAK4D,WAAL,CAAiBf;;;;;AAC1C,2BAAKvK,cAAL,CAAoBsI,YAApB;;AAEQlC,mCAAa,KAAK4B,IAAL,CAAUgoB,IAAV,CAAejqB,KAAf,CAAqB+B,EAArB,KAA4B,WAA5B,GACf,QADe,GAEf,KAAKE,IAAL,CAAUgoB,IAAV,CAAejqB,KAAf,CAAqB+B,EAArB,KAA4B,KAA5B,GACE,WADF,GAEE,KAAKE,IAAL,CAAUgoB,IAAV,CAAejqB,KAAf,CAAqB+B,EAArB,KAA4B,UAA5B,GACE,WADF,GAEE;;AACM,6BAAM,KAAK7B,UAAL,CAAgBgqB,SAAhB,CAA0B,KAAK5pB,GAA/B,EAAoC,KAAK2B,IAAL,CAAUgoB,IAAV,CAAeloB,EAAnD,EAAuD1B,UAAvD,EAAmE,KAAK4B,IAAL,CAAU+nB,IAAV,CAAelnB,GAAlF,CAAN;;;AAAR8mB;AACN,2BAAK7pB,mBAAL,CAAyBoD,OAAzB,CAAiC,oBAAjC;AACA,2BAAKuB,KAAL;;;;;;;AAEAtB,6BAAO,CAACC,KAAR;AACA,2BAAKtD,mBAAL,CAAyBsD,KAAzB,CAA+B,kBAA/B;;;AAEF,2BAAKpJ,cAAL,CAAoBqJ,WAApB;;;;;AAEA,2BAAKvD,mBAAL,CAAyBsD,KAAzB,CAA+B,kBAA/B;;;;;;;;;AAEH;;;;;;;yBA9CU0mB,gBAAa/lB,gEAMd8lB,qEANc,GAMC9lB;AAAA;;;cANd+lB;AAAavuB;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AAnCtBoI;;AAAqBA;;;;AAAmCA;;AACxDA;;AACEA;;AAAGA;;;;AAA0CA;;AAC7CA;;AAAkBA;;;;AAAoCA;;AACtDA;;AACEA;;AACEA;;;;AACEA;;AACFA;;AACAA;;AAAcA;;;;AAAqCA;;AACnDA;;AACAA;;AACAA;;AAMAA;;AAGAA;;;;AACEA;;AACFA;;AACFA;;AACFA;;AACFA;;AACAA;;AACEA;;AAAmBA;AAAA,qBAASH,WAAT;AAAgB,aAAhB;;AAAkBG;;;;AAAqCA;;AAC1EA;;AAA0CA;AAAA,qBAASH,UAAT;AAAe,aAAf;;AAAiCG;;;;AAAoCA;;AACjHA;;;;AA9BqBA;;AAAAA;;AAEhBA;;AAAAA;;AACeA;;AAAAA;;AAEDA;;AAAAA;;AACQA;;AAAAA;;AACEA;;AAAAA;;AAETA;;AAAAA;;AAC2BA;;AAAAA;;AACAA;;AAAAA;;AACAA;;AAAAA;;AAMAA;;AAAAA;;AAGpBA;;AAAAA;;AAOYA;;AAAAA;;AACsCA;;AAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrC/ExF;;AACEA;;;;AACAA;;AAAgBA;;AAAeA;;AAC/BA;;AAAmBA;;;;AAAmCA;;AACxDA;;;;;;AAHuBA;;AAAAA,qKAA2B,KAA3B,EAA2BA,0FAA3B;;AACLA;;AAAAA;;AACGA;;AAAAA;;;;;;AAIrBA;;AACEA;;;;AACAA;;AAAgBA;;;;AAAiCA;;AACjDA;;AAAmBA;;AAAeA;;AAClCA;;AACEA;;AAAiDA;;AAAUA;;AAAMA;;AAAWA;;;;;;AAAqEA;;AACnJA;;AACFA;;;;;;AANuBA;;AAAAA,kKAAwB,KAAxB,EAAwBA,wFAAxB;;AACLA;;AAAAA;;AACGA;;AAAAA;;AAE2DA;;AAAAA;;;;;;AAKhFA;;AACEA;;;;AACAA;;AAAgBA;;;;AAAoCA;;AACpDA;;AAAmBA;;AAAeA;;AAClCA;;AACEA;;AAAiDA;;AAAUA;;AAAMA;;AAAWA;;;;;;AAAqEA;;AACnJA;;AACFA;;;;;;AANuBA;;AAAAA,qKAA2B,KAA3B,EAA2BA,2FAA3B;;AACLA;;AAAAA;;AACGA;;AAAAA;;AAE2DA;;AAAAA;;;;;;AAetEA;;;;;;;;;;AAAKA,gKAAiC,KAAjC,EAAiC2rB,gBAAjC,EAAiC3rB,4DAAjC,EAAiC,KAAjC,EAAiCA,iFAAjC;;;;;;AACLA;;;;;;;;;;AAAKA,+JAAgC,KAAhC,EAAgC4rB,eAAhC,EAAgC5rB,4DAAhC,EAAgC,KAAhC,EAAgCA,gFAAhC;;;;;;AACLA;;;;;;;;;;AAAKA,kKAAmC,KAAnC,EAAmC6rB,kBAAnC,EAAmC7rB,4DAAnC,EAAmC,KAAnC,EAAmCA,mFAAnC;;;;;;AACLA;;;;;;;;;;AAAKA,0KAA+C,KAA/C,EAA+CA,2FAA/C,EAA+C,KAA/C,EAA+CA,2FAA/C;;;;;;AAGLA;;;;;;;;;;;;AAAKA,iQAAgF,KAAhF,EAAgF8rB,kBAAhF,EAAgF9rB,4DAAhF,EAAgF,KAAhF,EAAgFA,4FAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;;;;;AAZtIA;;AACEA;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAiCA;;AAC/CA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;AACAA;;AAGFA;;;;;;AAdmDA;;AAE1BA;;AAAAA,+JAAwB,KAAxB,EAAwBA,qFAAxB;;AAETA;;AAAAA;;AAE2DA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;AAE5BA;;AAAAA;;;;;;AAb7CA;;AAAkBA;;;;AAAqCA;;AACvDA;;AACEA;;AAeFA;;;;;;AAjBkBA;;AAAAA;;AAEiBA;;AAAAA;;;;;;;;AAsBjCA;;AAAsJA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACpJA;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAoCA;;AAClDA;;;;;;AACAA;;;;AACEA;;;;AACFA;;AACFA;;;;;;AAT6DA;;AACtCA;;AAAAA;;AACkCA;;AAAAA,kKAA2B,KAA3B,EAA2BA,wFAA3B;;AAEzCA;;AAAAA;;AAC0BA;;AAAAA;;AACnBA;;AAAAA;;AAC0CA;;AAAAA;;;;;;AATnEA;;AAAkBA;;;;AAAwCA;;AAC1DA;;AACEA;;AAUFA;;;;;;AAZkBA;;AAAAA;;AAE2BA;;AAAAA;;;;;;AAuBvCA;;;;;;;;;;AAAKA,gKAAiC,KAAjC,EAAiC+rB,gBAAjC,EAAiC/rB,4DAAjC,EAAiC,KAAjC,EAAiCA,iFAAjC;;;;;;AACLA;;;;;;;;;;AAAKA,+JAAgC,KAAhC,EAAgCgsB,eAAhC,EAAgChsB,4DAAhC,EAAgC,KAAhC,EAAgCA,gFAAhC;;;;;;AACLA;;;;;;;;;;AAAKA,kKAAmC,KAAnC,EAAmCisB,kBAAnC,EAAmCjsB,4DAAnC,EAAmC,KAAnC,EAAmCA,mFAAnC;;;;;;AACLA;;;;;;;;;;AAAKA,0KAA+C,KAA/C,EAA+CA,2FAA/C,EAA+C,KAA/C,EAA+CA,2FAA/C;;;;;;AAGLA;;;;;;;;;;;;AAAKA,iQAAgF,KAAhF,EAAgFksB,kBAAhF,EAAgFlsB,4DAAhF,EAAgF,KAAhF,EAAgFA,4FAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;;;AAZtIA;;AAA0IA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACxIA;;;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAiCA;;AAC/CA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;AACAA;;AAGAA;;;;AACEA;;;;AACFA;;AACFA;;;;;;AAjBuDA;;AAChCA;;AAAAA;;AACkCA;;AAAAA,+JAAwB,KAAxB,EAAwBA,sFAAxB;;AAEzCA;;AAAAA;;AAE2DA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;AAE5BA;;AAAAA;;AAGpBA;;AAAAA;;AAC0CA;;AAAAA;;;;;;AAjBnEA;;AAAkBA;;;;AAAqCA;;AACvDA;;AACEA;;AAkBFA;;;;;;AApBkBA;;AAAAA;;AAEwBA;;AAAAA;;;;;;;;AAyBxCA;;AAAsJA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACpJA;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAoCA;;AAClDA;;;;;;AACAA;;;;AACEA;;;;AACFA;;AACFA;;;;;;AAT6DA;;AACtCA;;AAAAA;;AACkCA;;AAAAA,kKAA2B,KAA3B,EAA2BA,wFAA3B;;AAEzCA;;AAAAA;;AAC0BA;;AAAAA;;AACnBA;;AAAAA;;AAC0CA;;AAAAA;;;;;;AATnEA;;AAAkBA;;;;AAAwCA;;AAC1DA;;AACEA;;AAUFA;;;;;;AAZkBA;;AAAAA;;AAE2BA;;AAAAA;;;;;;;;AAiB3CA;;AAA4IA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAC1IA;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAkCA;;AAChDA;;;;;;AACAA;;;;AACEA;;;;AACFA;;AACFA;;;;;;AATuDA;;AAChCA;;AAAAA;;AACkCA;;AAAAA,gKAAyB,KAAzB,EAAyBA,sFAAzB;;AAEzCA;;AAAAA;;AAC0BA;;AAAAA;;AACnBA;;AAAAA;;AAC0CA;;AAAAA;;;;;;AATnEA;;AAAkBA;;;;AAAqCA;;AACvDA;;AACEA;;AAUFA;;;;;;AAZkBA;;AAAAA;;AAEwBA;;AAAAA;;;;;;AAiBxCA;;AACEA;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAoCA;;AAClDA;;;;;;AACFA;;;;;;AANuDA;;AAE9BA;;AAAAA,kKAA2B,KAA3B,EAA2BA,wFAA3B;;AAETA;;AAAAA;;AAC0BA;;AAAAA;;;;;;AAP5CA;;AAAkBA;;;;AAAwCA;;AAC1DA;;AACEA;;AAOFA;;;;;;AATkBA;;AAAAA;;AAEoBA;;AAAAA;;;;;;AAoBhCA;;;;;;;;;;AAAKA,gKAAiC,KAAjC,EAAiCmsB,gBAAjC,EAAiCnsB,4DAAjC,EAAiC,KAAjC,EAAiCA,iFAAjC;;;;;;AACLA;;;;;;;;;;AAAKA,+JAAgC,KAAhC,EAAgCosB,eAAhC,EAAgCpsB,4DAAhC,EAAgC,KAAhC,EAAgCA,gFAAhC;;;;;;AACLA;;;;;;;;;;AAAKA,kKAAmC,KAAnC,EAAmCqsB,kBAAnC,EAAmCrsB,4DAAnC,EAAmC,KAAnC,EAAmCA,mFAAnC;;;;;;AACLA;;;;;;;;AAAKA,0KAA+C,KAA/C,EAA+CA,2FAA/C;;;;;;AAGLA;;;;;;;;;;;;AAAKA,iQAAgF,KAAhF,EAAgFssB,kBAAhF,EAAgFtsB,4DAAhF,EAAgF,KAAhF,EAAgFA,4FAAhF;;;;;;AADPA;;AACEA;;AACFA;;;;;;AADoIA;;AAAAA;;;;;;AAZtIA;;AACEA;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAiCA;;AAC/CA;;AACEA;;AACAA;;AACAA;;AACAA;;AACFA;;AACAA;;AAGFA;;;;;;AAdiDA;;AAExBA;;AAAAA,+JAAwB,KAAxB,EAAwBA,qFAAxB;;AAETA;;AAAAA;;AAE2DA;;AAAAA;;AACFA;;AAAAA;;AACMA;;AAAAA;;AACRA;;AAAAA;;AAE5BA;;AAAAA;;;;;;AAb7CA;;AAAkBA;;;;AAAqCA;;AACvDA;;AACEA;;AAeFA;;;;;;AAjBkBA;;AAAAA;;AAEiBA;;AAAAA;;;;;;;;AAsBjCA;;AAAuJA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACrJA;;;;AACEA;;;;AACFA;;AACAA;;AAAcA;;;;AAAoCA;;AAClDA;;;;;;AACAA;;;;AACEA;;;;AACFA;;AACFA;;;;;;;;AAT8DA,4OAAwF,UAAxF,EAAwF,kBAAxF;;AACvCA;;AAAAA;;AACkCA;;AAAAA,kKAA2B,KAA3B,EAA2BA,yFAA3B;;AAEzCA;;AAAAA;;AAC0BA;;AAAAA;;AACnBA;;AAAAA;;AAC0CA;;AAAAA;;;;;;AATnEA;;AAAkBA;;;;AAAsCA;;AACxDA;;AACEA;;AAUFA;;;;;;AAZkBA;;AAAAA;;AAE2BA;;AAAAA;;;;UCnJtCusB,eAAc;AAgBzB,gCACUjrB,gBADV,EAEUG,MAFV,EAGUC,UAHV,EAIUjG,cAJV,EAKU+F,KALV,EAKsB;AAAA;;AAJZ;AACA;AACA;AACA;AACA;AAnBV,qBAAc,KAAKA,KAAL,CAAWG,cAAX,CAA0B6qB,gFAA1B,CAAd;AACA,wBAAmC,IAAIC,kDAAJ,CAAoB,KAApB,CAAnC;AACA,sBAAY,IAAZ;AACA,+BAAuB,EAAvB;AACA,+BAAuB,EAAvB;AACA,4BAAoB,EAApB;AACA,+BAAuB,EAAvB;AACA,4BAAoB,EAApB;AACA,gCAAwB,EAAxB;AACA,6BAAqB,EAArB;AACA,gCAAwB,EAAxB;AACA,2BAA8BxB,sEAA9B;AACA,2BAAqB,KAArB;AAQK;;AAtBoB;AAAA;AAAA,iBAwBnB,oBAAQ;;;;;;;;;AAEZ,6BAAM,KAAKyB,YAAL,EAAN;;;;AAEkB,6BAAM,KAAKprB,gBAAL,CAAsBO,UAAtB,oBAAkD,KAAKC,GAAvD,cAAqE,aAAG;AAAA,+BAAIG,GAAG,CAACC,KAAJ,CAAU,YAAV,EAAwB,IAAxB,EAA8ByqB,2FAA9B,CAAJ;AAAA,uBAAxE,EAAuIphB,GAAvI,GAA6I3N,SAA7I,EAAN;;;sDAAgKuS,KAAKzM;AAAvL,2BAAKkpB,8BAA6L;;AAClM;AACA,0BAAI,KAAKnpB,IAAL,CAAU6U,IAAV,KAAmB2S,8EAAvB,EAA0C;AACxC,8EAAc,CACZ,KAAK3pB,gBAAL,CAAsBO,UAAtB,oBAAkD,KAAK4B,IAAL,CAAUF,EAA5D,cAAyE,aAAG;AAAA,iCAAItB,GAAG,CAACC,KAAJ,CAAU,YAAV,EAAwB,IAAxB,EAA8ByqB,4FAA9B,CAAJ;AAAA,yBAA5E,EAA4I5qB,YAA5I,CAAyJ;AAAEC,iCAAO,EAAE;AAAX,yBAAzJ,CADY,CAAd,EAGCG,IAHD,CAGM,wEAAe,IAAf,CAHN,EAICrG,SAJD,CAIW,iBAAa;AAAA;AAAA,8BAAXsG,MAAW;;AACtB,iCAAI,CAACE,aAAL,GAAqBF,MAAM,CAACO,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ;AAAA,mCAAUD,CAAC,CAACD,IAAF,GAASE,CAAC,CAACF,IAArB;AAAA,2BAAZ,CAArB;;AACA,iCAAI,CAAC0Y,MAAL,CAAY6C,IAAZ,CAAiB,IAAjB;AACD,yBAPD;AAQD,wBACD;;;AACA,0BAAI,KAAKza,IAAL,CAAU6U,IAAV,KAAmB2S,2EAAvB,EAAuC;AACrC,8EAAc,CACZ,KAAK3pB,gBAAL,CAAsBO,UAAtB,iBAA+C,KAAK4B,IAAL,CAAUF,EAAzD,iBAAyExB,YAAzE,CAAsF;AAAEC,iCAAO,EAAE;AAAX,yBAAtF,CADY,EAEZ,KAAKV,gBAAL,CAAsBO,UAAtB,iBAA+C,KAAK4B,IAAL,CAAUF,EAAzD,cAAsExB,YAAtE,CAAmF;AAAEC,iCAAO,EAAE;AAAX,yBAAnF,CAFY,EAGZ,KAAKV,gBAAL,CAAsBO,UAAtB,iBAA+C,KAAK4B,IAAL,CAAUF,EAAzD,iBAAyExB,YAAzE,CAAsF;AAAEC,iCAAO,EAAE;AAAX,yBAAtF,CAHY,EAIZ,KAAKV,gBAAL,CAAsBO,UAAtB,iBAA+C,KAAK4B,IAAL,CAAUF,EAAzD,cAAsExB,YAAtE,CAAmF;AAAEC,iCAAO,EAAE;AAAX,yBAAnF,CAJY,CAAd,EAMCG,IAND,CAMM,wEAAe,IAAf,CANN,EAOCrG,SAPD,CAOW,iBAA2C;AAAA;AAAA,8BAAzC+wB,SAAyC;AAAA,8BAA9BzqB,MAA8B;AAAA,8BAAtB0qB,SAAsB;AAAA,8BAAXC,MAAW;;AACpD,iCAAI,CAACC,aAAL,GAAqBH,SAArB;AACA,iCAAI,CAACI,UAAL,GAAkB7qB,MAAlB;AACA,iCAAI,CAAC8qB,aAAL,GAAqBJ,SAArB;AACA,iCAAI,CAACK,UAAL,GAAkBJ,MAAlB;;AACA,iCAAI,CAAC1R,MAAL,CAAY6C,IAAZ,CAAiB,IAAjB;AACD,yBAbD;AAcD,wBACD;;;AACA,0BAAI,KAAKza,IAAL,CAAU6U,IAAV,KAAmB2S,4EAAvB,EAAwC;AACtC,8EAAc,CACZ,KAAK3pB,gBAAL,CAAsBO,UAAtB,kBAAgD,KAAK4B,IAAL,CAAUF,EAA1D,cAAuE,aAAG;AAAA,iCAAItB,GAAG,CAACC,KAAJ,CAAU,YAAV,EAAwB,IAAxB,EAA8ByqB,4FAA9B,CAAJ;AAAA,yBAA1E,EAA0I5qB,YAA1I,CAAuJ;AAAEC,iCAAO,EAAE;AAAX,yBAAvJ,CADY,EAEZ,KAAKV,gBAAL,CAAsBO,UAAtB,kBAAgD,KAAK4B,IAAL,CAAUF,EAA1D,iBAA0ExB,YAA1E,CAAuF;AAAEC,iCAAO,EAAE;AAAX,yBAAvF,CAFY,EAGZ,KAAKV,gBAAL,CAAsBO,UAAtB,kBAAgD,KAAK4B,IAAL,CAAUF,EAA1D,iBAA0ExB,YAA1E,CAAuF;AAAEC,iCAAO,EAAE;AAAX,yBAAvF,CAHY,CAAd,EAKCG,IALD,CAKM,wEAAe,IAAf,CALN,EAMCrG,SAND,CAMW,iBAAmC;AAAA;AAAA,8BAAjCsG,MAAiC;AAAA,8BAAzByqB,SAAyB;AAAA,8BAAdC,SAAc;;AAC5C,iCAAI,CAACM,WAAL,GAAmBhrB,MAAM,CAACO,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ;AAAA,mCAAUD,CAAC,CAACD,IAAF,GAASE,CAAC,CAACF,IAArB;AAAA,2BAAZ,CAAnB;AACA,iCAAI,CAAC0qB,cAAL,GAAsBR,SAAtB;AACA,iCAAI,CAACS,cAAL,GAAsBR,SAAtB;;AACA,iCAAI,CAACzR,MAAL,CAAY6C,IAAZ,CAAiB,IAAjB;AACD,yBAXD;AAYD;;;;;;;;;AACF;AAxEwB;AAAA;AAAA,iBA0EnB,wBAAY;;;;;;4BACZ,KAAKza,IAAL,CAAU6U,IAAV,KAAmB2S,8EAAnB,IAAwC,KAAKxnB,IAAL,CAAU8pB,OAAlD,IAA6DC,mCAAM,GAAGC,OAAT,CAAiBD,mCAAM,CAAC,KAAK/pB,IAAL,CAAU8pB,OAAV,CAAkBvjB,QAAlB,EAAD,CAAvB;;;;;AAC/D,2BAAKvO,cAAL,CAAoBsI,YAApB;;;AAEE,6BAAM,KAAKN,IAAL,CAAU6U,IAAhB;;;;sCAAyB2S;;;;;;;AACvB,2BAAKvpB,UAAL,CAAgBub,OAAhB,CAAwB,KAAKxZ,IAAL,CAAUF,EAAlC,EAAsC,KAAKE,IAAL,CAAUjC,KAAV,CAAgB+B,EAAtD;;;;;AACA,2BAAK7B,UAAL,CAAgBwb,QAAhB,CAAyB,KAAKzZ,IAAL,CAAUF,EAAnC,EAAuC,KAAKE,IAAL,CAAUiO,QAAV,CAAmBnO,EAA1D;;;;;;;;;AAEFqB,6BAAO,CAACC,KAAR;;;AAEF,2BAAKpJ,cAAL,CAAoBqJ,WAApB;;;;;;;;;AAEH;AAtFwB;AAAA;AAAA,iBAwFzB,wBAAe0mB,IAAf,EAAwB;AACtBA,gBAAI,CAACkC,IAAL,GAAYlC,IAAI,CAACra,IAAL,IAAaqa,IAAI,CAAC3Z,IAAlB,IAA0B2Z,IAAI,CAAC7Z,KAA/B,IAAwC6Z,IAAI,CAACzmB,IAAzD;AACA,gBAAMC,SAAS,GAAG,KAAKvD,MAAL,CAAYwD,IAAZ,CAAiB0oB,0DAAjB,EAAgC;AAChDxoB,wBAAU,EAAE,mBADoC;AAEhD1B,kBAAI,EAAE;AACJ+nB,oBAAI,EAAEA,IADF;AAEJC,oBAAI,EAAE,KAAKhoB;AAFP;AAF0C,aAAhC,CAAlB;AAOD;AAjGwB;AAAA;AAAA,iBAmGzB,6BAAoBmqB,MAApB,EAA+B;AAC7B,gBAAM5oB,SAAS,GAAG,KAAKvD,MAAL,CAAYwD,IAAZ,CAAiB4oB,oEAAjB,EAAqC;AACrD1oB,wBAAU,EAAE,mBADyC;AAErD1B,kBAAI,EAAE;AACJmqB,sBAAM,EAAEA,MADJ;AAEJxX,qBAAK,EAAE,KAAK3S;AAFR;AAF+C,aAArC,CAAlB;AAOD;AA3GwB;;AAAA;AAAA;;;yBAAd8oB,iBAAcvsB;AAAA;;;cAAdusB;AAAcvvB;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;ADrB3B4C;;AAGEA;;AAOAA;;AAUAA;;AASAA;;AAEEA;;AAsBAA;;AAiBAA;;AAyBAA;;AAiBAA;;AAiBAA;;AAcAA;;AAsBAA;;AAgBFA;;AACFA;;;;AAnLoBA;;AAAAA;;AAOAA;;AAAAA;;AAUAA;;AAAAA;;AAWHA;;AAAAA;;AAsBAA;;AAAAA;;AAiBAA;;AAAAA;;AAyBAA;;AAAAA;;AAiBAA;;AAAAA;;AAiBAA;;AAAAA;;AAcAA;;AAAAA;;AAsBAA;;AAAAA;;;;;;;AChJJusB,qBAAc,wDAN1B,uEAM0B,GAAdA,eAAc,CAAd;;;;;;;;;;;;;;;;;;;;;;UCrBb;AACA;AACA;;;AAEO,UAAMuB,YAAW,GAAG;AACzBC,kBAAU,EAAE,KADa;AAEzBC,WAAG,EAAE,KAFoB;AAGzBC,gBAAQ,EAAE;AACRC,gBAAM,EAAE,yCADA;AAERC,oBAAU,EAAE,4BAFJ;AAGRC,qBAAW,EAAE,mCAHL;AAIRC,mBAAS,EAAE,YAJH;AAKRC,uBAAa,EAAE,wBALP;AAMRC,2BAAiB,EAAE,cANX;AAORC,eAAK,EAAE;AAPC,SAHe;AAYzBtX,cAAM,EAAE;AACNM,eAAK,EAAE,oDADD;AAENiX,eAAK,EAAE,4FAFD;AAGNtV,aAAG,EAAE,kBAHC;AAINC,aAAG,EAAE,CAAC,SAJA;AAKNzB,cAAI,EAAE,EALA;AAMND,eAAK,EAAE;AAND,SAZiB;AAoBzBgX,iBAAS,EAAE;AACTzyB,aAAG,EAAE;AADI;AApBc,OAApB;AAyBP;;;;;;;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCO,UAAM0yB,aAAY,GAAG,SAAfA,aAAe,CAAC30B,MAAD,EAAc8D,SAAd,EAA4D;AACtF,YAAI8wB,QAAJ;AACA50B,cAAM,CAAC60B,GAAP,CAAWC,MAAX;AACAhxB,iBAAS,GAAGvD,IAAZ,CAAiB,aAAG;AAAA,iBAAIq0B,QAAQ,GAAGG,GAAf;AAAA,SAApB;AACA/0B,cAAM,CAAC60B,GAAP,CAAWG,OAAX,CAAmB,YAAK;AACtB,cAAMC,MAAM,GAAmBL,QAAQ,CAAC3c,QAAT,CAAkB1G,GAAlB,CAAsBjD,yDAAtB,CAA/B;AACA,cAAMmM,QAAQ,GAAGwa,MAAM,CAACxL,UAAP,CAAkBrT,GAAlB,CAAsB,WAAC;AAAA,mBAAI8e,CAAC,CAACxd,QAAF,CAAWsB,aAAf;AAAA,WAAvB,CAAjB;AACA,cAAMmc,WAAW,GAAG,mEAAe1a,QAAf,CAApB;AACAma,kBAAQ,CAACjT,OAAT;AACAwT,qBAAW;AACZ,SAND;AAOD,OAXM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGP,UAAIC,6EAAJ,EAA4B;AAC1B;AACD;;AAED,UAAMtxB,SAAS,GAAG,SAAZA,SAAY;AAAA,eAAMuxB,yEAAyBC,eAAzB,CAAyCC,sDAAzC,CAAN;AAAA,OAAlB;;AAEA,UAAIH,sEAAJ,EAAqB;AACnB,YAAI,KAAJ,EAAmB,CAElB,CAFD,MAEO;AACLxqB,iBAAO,CAACC,KAAR,CAAc,4CAAd;AACAD,iBAAO,CAAC2E,GAAR,CAAY,4CAAZ;AACD;AACF,OAPD,MAOO;AACLzL,iBAAS,WAAT,CAAkB,aAAG;AAAA,iBAAI8G,OAAO,CAACC,KAAR,CAAc2qB,GAAd,CAAJ;AAAA,SAArB;AACD;;;;;;;ACrBD;AACA,qBADA;AAEA,wBAFA;AAGA,qBAHA;AAIA,wBAJA;AAKA,2BALA;AAMA,wBANA;AAOA,2BAPA;AAQA,wBARA;AASA,2BATA;AAUA,wBAVA;AAWA,2BAXA;AAYA,wBAZA;AAaA,2BAbA;AAcA,wBAdA;AAeA,2BAfA;AAgBA,wBAhBA;AAiBA,qBAjBA;AAkBA,wBAlBA;AAmBA,qBAnBA;AAoBA,wBApBA;AAqBA,qBArBA;AAsBA,wBAtBA;AAuBA,qBAvBA;AAwBA,wBAxBA;AAyBA,qBAzBA;AA0BA,wBA1BA;AA2BA,2BA3BA;AA4BA,wBA5BA;AA6BA,qBA7BA;AA8BA,wBA9BA;AA+BA,qBA/BA;AAgCA,wBAhCA;AAiCA,qBAjCA;AAkCA,wBAlCA;AAmCA,qBAnCA;AAoCA,wBApCA;AAqCA,qBArCA;AAsCA,wBAtCA;AAuCA,qBAvCA;AAwCA,wBAxCA;AAyCA,qBAzCA;AA0CA,wBA1CA;AA2CA,oBA3CA;AA4CA,uBA5CA;AA6CA,qBA7CA;AA8CA,wBA9CA;AA+CA,2BA/CA;AAgDA,wBAhDA;AAiDA,2BAjDA;AAkDA,wBAlDA;AAmDA,qBAnDA;AAoDA,wBApDA;AAqDA,oBArDA;AAsDA,uBAtDA;AAuDA,wBAvDA;AAwDA,2BAxDA;AAyDA,wBAzDA;AA0DA,2BA1DA;AA2DA,wBA3DA;AA4DA,2BA5DA;AA6DA,wBA7DA;AA8DA,2BA9DA;AA+DA,wBA/DA;AAgEA,2BAhEA;AAiEA,wBAjEA;AAkEA,2BAlEA;AAmEA,wBAnEA;AAoEA,2BApEA;AAqEA,wBArEA;AAsEA,2BAtEA;AAuEA,qBAvEA;AAwEA,wBAxEA;AAyEA,qBAzEA;AA0EA,wBA1EA;AA2EA,2BA3EA;AA4EA,wBA5EA;AA6EA,2BA7EA;AA8EA,wBA9EA;AA+EA,2BA/EA;AAgFA,wBAhFA;AAiFA,qBAjFA;AAkFA,wBAlFA;AAmFA,qBAnFA;AAoFA,wBApFA;AAqFA,qBArFA;AAsFA,wBAtFA;AAuFA,qBAvFA;AAwFA,wBAxFA;AAyFA,sBAzFA;AA0FA,yBA1FA;AA2FA,qBA3FA;AA4FA,wBA5FA;AA6FA,qBA7FA;AA8FA,wBA9FA;AA+FA,2BA/FA;AAgGA,wBAhGA;AAiGA,2BAjGA;AAkGA,wBAlGA;AAmGA,qBAnGA;AAoGA,wBApGA;AAqGA,qBArGA;AAsGA,wBAtGA;AAuGA,qBAvGA;AAwGA,wBAxGA;AAyGA,qBAzGA;AA0GA,wBA1GA;AA2GA,2BA3GA;AA4GA,8BA5GA;AA6GA,2BA7GA;AA8GA,8BA9GA;AA+GA,qBA/GA;AAgHA,wBAhHA;AAiHA,qBAjHA;AAkHA,wBAlHA;AAmHA,qBAnHA;AAoHA,wBApHA;AAqHA,qBArHA;AAsHA,wBAtHA;AAuHA,qBAvHA;AAwHA,wBAxHA;AAyHA,wBAzHA;AA0HA,2BA1HA;AA2HA,qBA3HA;AA4HA,wBA5HA;AA6HA,qBA7HA;AA8HA,wBA9HA;AA+HA,qBA/HA;AAgIA,uBAhIA;AAiIA,0BAjIA;AAkIA,wBAlIA;AAmIA,qBAnIA;AAoIA,wBApIA;AAqIA,mBArIA;AAsIA,sBAtIA;AAuIA,qBAvIA;AAwIA,wBAxIA;AAyIA,qBAzIA;AA0IA,wBA1IA;AA2IA,qBA3IA;AA4IA,wBA5IA;AA6IA,qBA7IA;AA8IA,wBA9IA;AA+IA,qBA/IA;AAgJA,wBAhJA;AAiJA,qBAjJA;AAkJA,wBAlJA;AAmJA,qBAnJA;AAoJA,wBApJA;AAqJA,qBArJA;AAsJA,wBAtJA;AAuJA,qBAvJA;AAwJA,wBAxJA;AAyJA,qBAzJA;AA0JA,wBA1JA;AA2JA,qBA3JA;AA4JA,wBA5JA;AA6JA,qBA7JA;AA8JA,wBA9JA;AA+JA,qBA/JA;AAgKA,wBAhKA;AAiKA,qBAjKA;AAkKA,wBAlKA;AAmKA,qBAnKA;AAoKA,wBApKA;AAqKA,qBArKA;AAsKA,wBAtKA;AAuKA,qBAvKA;AAwKA,wBAxKA;AAyKA,qBAzKA;AA0KA,wBA1KA;AA2KA,2BA3KA;AA4KA,wBA5KA;AA6KA,oBA7KA;AA8KA,uBA9KA;AA+KA,oBA/KA;AAgLA,uBAhLA;AAiLA,oBAjLA;AAkLA,uBAlLA;AAmLA,qBAnLA;AAoLA,wBApLA;AAqLA,qBArLA;AAsLA,wBAtLA;AAuLA,2BAvLA;AAwLA,wBAxLA;AAyLA,qBAzLA;AA0LA,wBA1LA;AA2LA,yBA3LA;AA4LA,4BA5LA;AA6LA,wBA7LA;AA8LA,2BA9LA;AA+LA,qBA/LA;AAgMA,wBAhMA;AAiMA,qBAjMA;AAkMA,wBAlMA;AAmMA,2BAnMA;AAoMA,wBApMA;AAqMA,qBArMA;AAsMA,wBAtMA;AAuMA,qBAvMA;AAwMA,wBAxMA;AAyMA,qBAzMA;AA0MA,wBA1MA;AA2MA,qBA3MA;AA4MA,wBA5MA;AA6MA,qBA7MA;AA8MA,wBA9MA;AA+MA,qBA/MA;AAgNA,wBAhNA;AAiNA,qBAjNA;AAkNA,wBAlNA;AAmNA,qBAnNA;AAoNA,wBApNA;AAqNA,qBArNA;AAsNA,0BAtNA;AAuNA,6BAvNA;AAwNA,wBAxNA;AAyNA,qBAzNA;AA0NA,wBA1NA;AA2NA,qBA3NA;AA4NA,wBA5NA;AA6NA,oBA7NA;AA8NA,uBA9NA;AA+NA,qBA/NA;AAgOA,wBAhOA;AAiOA,qBAjOA;AAkOA,wBAlOA;AAmOA,sBAnOA;AAoOA,yBApOA;AAqOA,qBArOA;AAsOA,wBAtOA;AAuOA,qBAvOA;AAwOA,wBAxOA;AAyOA,qBAzOA;AA0OA,wBA1OA;AA2OA,wBA3OA;AA4OA,2BA5OA;AA6OA,sBA7OA;AA8OA,yBA9OA;AA+OA,qBA/OA;AAgPA,wBAhPA;AAiPA,sBAjPA;AAkPA,yBAlPA;AAmPA,sBAnPA;AAoPA,2BApPA;AAqPA,8BArPA;AAsPA,yBAtPA;AAuPA,wBAvPA;AAwPA,2BAxPA;AAyPA,qBAzPA;AA0PA,wBA1PA;AA2PA,qBA3PA;AA4PA,wBA5PA;AA6PA,qBA7PA;AA8PA,0BA9PA;AA+PA,6BA/PA;AAgQA,wBAhQA;AAiQA,qBAjQA;AAkQA,wBAlQA;AAmQA,2BAnQA;AAoQA,8BApQA;AAqQA,qBArQA;AAsQA,wBAtQA;AAuQA,wBAvQA;AAwQA,2BAxQA;AAyQA,wBAzQA;AA0QA,2BA1QA;AA2QA,wBA3QA;AA4QA,2BA5QA;AA6QA,wBA7QA;AA8QA;AA9QA;;AAkRA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA11B;AACA;AACA;;AACA;AACA;;AACA21B;AACA;AACA,OAFA;;AAGAA;AACAz1B;AACAy1B;;;;;;;;;;;;;;;;;;;;;;;;","names":["e","webpackEmptyAsyncContext","module","routes","path","redirectTo","pathMatch","loadChildren","Promise","then","m","UserModule","__webpack_require__","WorldModule","canActivate","_user_auth_guard__WEBPACK_IMPORTED_MODULE_0__","KingdomModule","AppRoutingModule","_angular_router__WEBPACK_IMPORTED_MODULE_2__","scrollPositionRestoration","onSameUrlNavigation","anchorScrolling","imports","exports","_angular_core__WEBPACK_IMPORTED_MODULE_6__","AppComponent","firebaseService","loadingService","tutorialService","router","platformId","events","subscribe","event","_angular_router__WEBPACK_IMPORTED_MODULE_7__","url","localStorage","setItem","anchor","setTimeout","document","querySelector","window","scrollTo","top","behavior","scrollIntoView","initialize","loadFixtures","_services_cache_service__WEBPACK_IMPORTED_MODULE_0__","selectors","decls","vars","consts","template","httpLoaderFactory","http","_ngx_translate_http_loader__WEBPACK_IMPORTED_MODULE_8__","appInitializerFactory","translateService","setDefaultLang","use","toPromise","AppModule","bootstrap","_app_component__WEBPACK_IMPORTED_MODULE_1__","provide","_angular_material_core__WEBPACK_IMPORTED_MODULE_10__","useClass","_angular_material_paginator__WEBPACK_IMPORTED_MODULE_11__","_shared_custom_paginator_intl__WEBPACK_IMPORTED_MODULE_7__","_angular_core__WEBPACK_IMPORTED_MODULE_9__","useFactory","deps","_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__","multi","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_13__","_app_routing_module__WEBPACK_IMPORTED_MODULE_0__","_angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_14__","_shared_shared_module__WEBPACK_IMPORTED_MODULE_2__","_angular_fire__WEBPACK_IMPORTED_MODULE_15__","_environments_environment__WEBPACK_IMPORTED_MODULE_3__","_angular_fire_auth__WEBPACK_IMPORTED_MODULE_16__","_angular_fire_firestore__WEBPACK_IMPORTED_MODULE_17__","_angular_fire_database__WEBPACK_IMPORTED_MODULE_18__","loader","_angular_common_http__WEBPACK_IMPORTED_MODULE_19__","isolate","_ngxs_store__WEBPACK_IMPORTED_MODULE_4__","_shared_auth_auth_state__WEBPACK_IMPORTED_MODULE_6__","developmentMode","_ngxs_devtools_plugin__WEBPACK_IMPORTED_MODULE_5__","name","disabled","ngx_ui_tour_md_menu__WEBPACK_IMPORTED_MODULE_20__","ngx_currency__WEBPACK_IMPORTED_MODULE_21__","ngx_disqus__WEBPACK_IMPORTED_MODULE_22__","declarations","_angular_core__WEBPACK_IMPORTED_MODULE_11__","family_r10","skill_r11","category_r12","category_r14","family_r24","skill_r25","category_r26","category_r28","troop_r18","family_r36","skill_r37","category_r38","category_r40","troop_r30","family_r48","skill_r49","category_r50","category_r52","TroopAssignmentType","MAXIMUM_TROOPS","ArmyComponent","angularFirestore","notificationService","store","dialog","apiService","selectSnapshot","src_app_shared_auth_auth_state__WEBPACK_IMPORTED_MODULE_0__","collection","uid","valueChanges","idField","ref","where","pipe","troops","units","kingdomTroops","filter","troop","assignment","NONE","sort","a","b","attackTroops","ATTACK","defenseTroops","DEFENSE","recruitUnits","gold","$event","container","Number","id","previousContainer","data","length","previousIndex","currentIndex","updateArmy","warning","startLoading","army","forEach","kingdomTroop","index","push","troopId","fid","attackTroop","defenseTroop","assignArmy","assigned","success","console","error","stopLoading","unit","dialogRef","open","_recruit_component__WEBPACK_IMPORTED_MODULE_1__","panelClass","_disband_component__WEBPACK_IMPORTED_MODULE_2__","ctx","duration","delay","_angular_core__WEBPACK_IMPORTED_MODULE_7__","family_r8","skill_r9","category_r10","DisbandComponent","formBuilder","form","group","quantity","_angular_forms__WEBPACK_IMPORTED_MODULE_8__","close","valid","disbandTroop","value","disbanded","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_10__","family_r5","skill_r6","category_r7","category_r9","RecruitComponent","Math","floor","kingdomGold","recruitUnit","recruited","IconPipe","domSanitizer","text","object","terms","skills","families","categories","resources","spells","adjacents","opposites","resistances","reduce","concat","term","replace","instant","image","bypassSecurityTrustHtml","_angular_core__WEBPACK_IMPORTED_MODULE_0__","pure","LegendaryPipe","legendary","LongPipe","decimals","undefined","toLocaleString","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","ShortPipe","isNaN","toString","suffixes","exp","log","pow","toFixed","TurnPipe","timestamp","max","ratio","clock$","calculate","toMillis","time","state","auth","clock","from","to","start","moment__WEBPACK_IMPORTED_MODULE_0__","end","minutes","diff","asMinutes","min","ApiService","httpClient","kingdomId","factionId","latitude","longitude","post","src_environments_environment__WEBPACK_IMPORTED_MODULE_0__","turns","get","unitId","contractId","charmId","patch","targetId","artifactId","request","auctionId","godId","buildingId","assignmentId","itemId","battleId","storeType","put","locationType","subject","message","fromId","letterId","letterIds","body","guildId","description","clanId","incantationId","enchantmentId","shopId","collectionId","dealId","questId","tree","gems","_angular_core__WEBPACK_IMPORTED_MODULE_1__","factory","providedIn","CollectionType","CacheService","PACKS","getPacks","GUILDS","getGuilds","ATTACKS","getAttacks","SKILLS","getSkills","FACTIONS","getFactions","UNITS","getUnits","FAMILIES","getFamilies","SPELLS","getSpells","STRUCTURES","getStructures","CATEGORIES","getCategories","GODS","getGods","HEROES","getHeroes","RESOURCES","getResources","ITEMS","getItems","STORES","getStores","LOCATIONS","getLocations","PERKS","getPerks","getItem","snapshot","factions","docs","map","faction","JSON","stringify","parse","packs","attacks","attack","guilds","guild","stores","resource","structures","structure","heroes","hero","gods","god","skill","category","family","locations","location","spell","items","item","perks","perk","ComponentService","injector","componentFactoryResolver","applicationRef","component","propertySetter","componentFactory","resolveComponentFactory","componentRef","create","instance","attachView","hostView","div","createElement","appendChild","nativeElement","html","DomService","$element","block","inline","scroll","FirebaseService","angularFireAuth","element","joinObject","joinedFactions","joinedUnits","joinedSpells","subCollection","recursive","Array","subElement","subElementIndex","subElementArray","find","el","slice","localeCompare","legends","elements","batch","random","toDate","set","doc","fixtures","authState","user","firestore","readFixtures","joinFixtures","includes","_cache_service__WEBPACK_IMPORTED_MODULE_1__","importFixtures","joinedAttacks","joinedGuilds","joinedFamilies","joinedCategories","joinedGods","joinedResources","joinedStructures","joinedSkills","joinedItems","joinedHeroes","joinedStores","joinedLocations","quest","joinedLegends","legend","joinedPerks","joinedPacks","pack","commit","_angular_core__WEBPACK_IMPORTED_MODULE_3__","LoadingService","loading","MapboxService","componentService","mapbox_gl__WEBPACK_IMPORTED_MODULE_1__","_shared_auth_auth_state__WEBPACK_IMPORTED_MODULE_5__","mapbox","accessToken","_environments_environment__WEBPACK_IMPORTED_MODULE_0__","primaryColor","getComputedStyle","getPropertyValue","style","center","pitch","zoom","antialias","dragPan","dragRotate","attributionControl","interactive","once","setFog","range","color","addSource","type","tileSize","maxzoom","setTerrain","source","exaggeration","addLayer","paint","on","refreshMarkers","marker","lngLat","getLngLat","lat","lng","getBounds","contains","markers","getZoom","markerVisible","getElement","display","radius","fly","removeMarker","size","_shared_type_common_type__WEBPACK_IMPORTED_MODULE_6__","injectComponent","_world_marker_marker_component__WEBPACK_IMPORTED_MODULE_3__","Object","setLngLat","coordinates","addTo","p","s","setPopup","offset","closeButton","closeOnClick","closeOnMove","maxWidth","className","setDOMContent","_world_popup_popup_component__WEBPACK_IMPORTED_MODULE_4__","changeDetectorRef","detectChanges","getPopup","opened","asObservable","resolve","easeTo","target","clientHeight","destroy","unsubscribe","circle","mapbox_gl_circle__WEBPACK_IMPORTED_MODULE_2___default","power","editable","fillColor","fillOpacity","strokeColor","strokeWeight","strokeOpacity","refineStroke","goTo","flyTo","essential","findIndex","found","remove","splice","resize","addKingdom","substring","addShop","addQuest","populateMap","clearMarkers","_angular_core__WEBPACK_IMPORTED_MODULE_13__","SnackBarType","NotificationService","snackBar","horizontalPosition","verticalPosition","rxjs__WEBPACK_IMPORTED_MODULE_1__","snackBarQueue","rxjs__WEBPACK_IMPORTED_MODULE_2__","snackBarQueue$","queue","showing","updatedQueue","next","ngDestroy","notification","showSnackbar","matSnackBarRef","SUCCESS","options","WARNING","ERROR","removeDismissedSnackBar","afterDismissed","shift","variable","keys","key","_pipes_long_pipe__WEBPACK_IMPORTED_MODULE_0__","transform","TutorialService","tourService","route","waitingSteps","steps","step","waitingStep","waitFor","startAt","preventScrolling","enableBackdrop","disableHotkeys","stepId","anchorId","title","content","SetUserAction","SetKingdomAction","SetKingdomSuppliesAction","SetKingdomBuildingsAction","LoginWithGoogleAction","LogoutAction","initial","kingdom","supplies","buildings","logged","popup","AuthState","setInterval","patchState","Date","dispatch","_auth_actions__WEBPACK_IMPORTED_MODULE_1__","parseUrl","fragment","queryParams","navigate","signInWithPopup","firebase_app__WEBPACK_IMPORTED_MODULE_2__","signOut","getState","setState","payload","supply","kingdomTurn","seconds","now","building","guilded","clan","defaults","PaginatorIntl","translateParser","page","pageSize","total","interpolate","rangeLabelIntl","onLangChange","getTranslations","translation","itemsPerPageLabel","nextPageLabel","previousPageLabel","firstPageLabel","lastPageLabel","changes","_angular_material_paginator__WEBPACK_IMPORTED_MODULE_0__","httpTranslateLoader","components","_shell_shell_component__WEBPACK_IMPORTED_MODULE_0__","_pipes_short_pipe__WEBPACK_IMPORTED_MODULE_1__","_pipes_icon_pipe__WEBPACK_IMPORTED_MODULE_2__","_pipes_long_pipe__WEBPACK_IMPORTED_MODULE_3__","_pipes_legendary_pipe__WEBPACK_IMPORTED_MODULE_4__","_pipes_turn_pipe__WEBPACK_IMPORTED_MODULE_5__","_tour_tour_component__WEBPACK_IMPORTED_MODULE_7__","modules","_angular_common__WEBPACK_IMPORTED_MODULE_9__","_angular_router__WEBPACK_IMPORTED_MODULE_10__","_angular_material_toolbar__WEBPACK_IMPORTED_MODULE_11__","_angular_material_icon__WEBPACK_IMPORTED_MODULE_12__","_angular_cdk_layout__WEBPACK_IMPORTED_MODULE_13__","_angular_material_button__WEBPACK_IMPORTED_MODULE_14__","_angular_material_sidenav__WEBPACK_IMPORTED_MODULE_15__","_angular_material_list__WEBPACK_IMPORTED_MODULE_16__","_angular_material_menu__WEBPACK_IMPORTED_MODULE_17__","_angular_material_card__WEBPACK_IMPORTED_MODULE_18__","_angular_material_form_field__WEBPACK_IMPORTED_MODULE_19__","_angular_material_input__WEBPACK_IMPORTED_MODULE_20__","_angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_21__","_angular_flex_layout__WEBPACK_IMPORTED_MODULE_22__","_angular_material_chips__WEBPACK_IMPORTED_MODULE_23__","_angular_material_table__WEBPACK_IMPORTED_MODULE_24__","_angular_material_paginator__WEBPACK_IMPORTED_MODULE_25__","_angular_material_sort__WEBPACK_IMPORTED_MODULE_26__","_angular_common_http__WEBPACK_IMPORTED_MODULE_27__","_angular_material_select__WEBPACK_IMPORTED_MODULE_28__","_angular_material_tabs__WEBPACK_IMPORTED_MODULE_29__","_angular_material_badge__WEBPACK_IMPORTED_MODULE_30__","_angular_cdk_drag_drop__WEBPACK_IMPORTED_MODULE_31__","_angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_32__","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_33__","_angular_forms__WEBPACK_IMPORTED_MODULE_34__","_angular_material_checkbox__WEBPACK_IMPORTED_MODULE_35__","_angular_material_datepicker__WEBPACK_IMPORTED_MODULE_36__","_angular_material_core__WEBPACK_IMPORTED_MODULE_37__","_angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_38__","_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_39__","_angular_material_expansion__WEBPACK_IMPORTED_MODULE_40__","_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_41__","SharedModule","_ngx_translate_core__WEBPACK_IMPORTED_MODULE_43__","ngx_ui_tour_md_menu__WEBPACK_IMPORTED_MODULE_44__","ngx_currency__WEBPACK_IMPORTED_MODULE_45__","align","allowNegative","allowZero","decimal","precision","prefix","suffix","thousands","nullable","inputMode","_angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_46__","_shell_status_component__WEBPACK_IMPORTED_MODULE_6__","_angular_core__WEBPACK_IMPORTED_MODULE_10__","ctx_r12","l_r11","link_r16","supply_r20","i_r21","ShellComponent","breakpointObserver","mapboxService","domService","bottomSheet","lang","links","_angular_router__WEBPACK_IMPORTED_MODULE_12__","groups","link","observe","_angular_cdk_layout__WEBPACK_IMPORTED_MODULE_14__","result","matches","addLangs","langs","l","browser","getBrowserLang","select","_auth_auth_state__WEBPACK_IMPORTED_MODULE_2__","x","oldReports","reports","drawer","toggle","resizeMap","isHandset$","isHandset","currentLang","scrollToTop","_auth_auth_actions__WEBPACK_IMPORTED_MODULE_1__","sheetRef","_status_component__WEBPACK_IMPORTED_MODULE_3__","kingdomSupplies$","viewQuery","_angular_material_sidenav__WEBPACK_IMPORTED_MODULE_21__","_r8","_angular_core__WEBPACK_IMPORTED_MODULE_2__","supply_r1","StatusComponent","_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_3__","ctx_r3","ctx_r5","ctx_r6","TourComponent","MarkerType","PopupType","StoreType","LocationType","FactionType","LANDING_ROUTE","AuthGuard","_shared_auth_auth_state__WEBPACK_IMPORTED_MODULE_0__","ctx_r0","MarkerComponent","src_app_shared_type_common_type__WEBPACK_IMPORTED_MODULE_0__","AdventureComponent","adventureQuest","dealt","_angular_core__WEBPACK_IMPORTED_MODULE_8__","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__","DealComponent","deal","shop","tradeDeal","family_r18","skill_r19","category_r20","category_r22","family_r35","skill_r36","category_r37","category_r39","family_r60","skill_r61","category_r62","category_r64","PopupComponent","src_app_shared_auth_auth_state__WEBPACK_IMPORTED_MODULE_5__","rxjs__WEBPACK_IMPORTED_MODULE_12__","checkRefresh","src_app_kingdom_army_army_component__WEBPACK_IMPORTED_MODULE_4__","canAttack","contracts","artifacts","charms","shopContracts","shopTroops","shopArtifacts","shopCharms","questTroops","questContracts","questArtifacts","visited","moment__WEBPACK_IMPORTED_MODULE_3__","isAfter","join","_deal_component__WEBPACK_IMPORTED_MODULE_2__","reward","_adventure_component__WEBPACK_IMPORTED_MODULE_1__","environment","production","hmr","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","token","functions","hmrBootstrap","ngModule","hot","accept","mod","dispose","appRef","c","makeVisible","_environments_environment__WEBPACK_IMPORTED_MODULE_1__","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_4__","bootstrapModule","_app_app_module__WEBPACK_IMPORTED_MODULE_0__","err","webpackContext"],"sources":["webpack:///$_lazy_route_resources|lazy|groupOptions:%20%7B%7D|namespace%20object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/kingdom/army/army.component.html","webpack:///src/app/kingdom/army/army.component.ts","webpack:///src/app/kingdom/army/disband.component.ts","webpack:///src/app/kingdom/army/recruit.component.ts","webpack:///src/app/pipes/icon.pipe.ts","webpack:///src/app/pipes/legendary.pipe.ts","webpack:///src/app/pipes/long.pipe.ts","webpack:///src/app/pipes/short.pipe.ts","webpack:///src/app/pipes/turn.pipe.ts","webpack:///src/app/services/api.service.ts","webpack:///src/app/services/cache.service.ts","webpack:///src/app/services/component.service.ts","webpack:///src/app/services/dom.service.ts","webpack:///src/app/services/firebase.service.ts","webpack:///src/app/services/loading.service.ts","webpack:///src/app/services/mapbox.service.ts","webpack:///src/app/services/notification.service.ts","webpack:///src/app/services/tutorial.service.ts","webpack:///src/app/shared/auth/auth.actions.ts","webpack:///src/app/shared/auth/auth.state.ts","webpack:///src/app/shared/custom/paginator.intl.ts","webpack:///src/app/shared/shared.module.ts","webpack:///src/app/shared/shell/shell.component.html","webpack:///src/app/shared/shell/shell.component.ts","webpack:///src/app/shared/shell/status.component.ts","webpack:///src/app/shared/tour/tour.component.html","webpack:///src/app/shared/tour/tour.component.ts","webpack:///src/app/shared/type/common.type.ts","webpack:///src/app/user/auth.guard.ts","webpack:///src/app/world/marker/marker.component.html","webpack:///src/app/world/marker/marker.component.ts","webpack:///src/app/world/popup/adventure.component.ts","webpack:///src/app/world/popup/deal.component.ts","webpack:///src/app/world/popup/popup.component.html","webpack:///src/app/world/popup/popup.component.ts","webpack:///src/environments/environment.ts","webpack:///src/hmr.ts","webpack:///src/main.ts","webpack:///node_modules/moment/locale|sync|/^/.*$"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AuthGuard } from './user/auth.guard';\r\n\r\nexport const routes: Routes = [\r\n  { path: '', redirectTo: 'user/landing', pathMatch: 'full' },\r\n  { path: 'user', loadChildren: () => import('./user/user.module').then(m => m.UserModule) },\r\n  { path: 'world', loadChildren: () => import('./world/world.module').then(m => m.WorldModule), canActivate: [AuthGuard] },\r\n  { path: 'kingdom', loadChildren: () => import('./kingdom/kingdom.module').then(m => m.KingdomModule), canActivate: [AuthGuard] },\r\n  { path: '**', redirectTo: '' },\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forRoot(routes, {\r\n      scrollPositionRestoration: 'top',\r\n      // relativeLinkResolution: 'legacy',\r\n      onSameUrlNavigation: 'reload',\r\n      anchorScrolling: 'enabled', // not working https://github.com/angular/angular/issues/33240\r\n    }),\r\n  ],\r\n  exports: [RouterModule],\r\n})\r\nexport class AppRoutingModule { }\r\n","<!-- tour -->\r\n<app-tour></app-tour>\r\n<!-- loading -->\r\n<div class=\"loading-screen\" *ngIf=\"loadingService.loading\">\r\n  <mat-progress-spinner mode=\"indeterminate\"></mat-progress-spinner>\r\n</div>\r\n<!-- shell -->\r\n<app-shell>\r\n  <!-- router -->\r\n  <router-outlet></router-outlet>\r\n</app-shell>\r\n","import { Component, OnInit, Inject, PLATFORM_ID } from '@angular/core';\r\nimport { LoadingService } from './services/loading.service';\r\nimport { FirebaseService } from './services/firebase.service';\r\nimport { TutorialService } from './services/tutorial.service';\r\nimport { Router, Scroll, RouterEvent, NavigationEnd } from '@angular/router';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { CollectionType } from './services/cache.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent implements OnInit {\r\n\r\n  constructor(\r\n    private firebaseService: FirebaseService,\r\n    public loadingService: LoadingService,\r\n    private tutorialService: TutorialService,\r\n    private router: Router,\r\n    @Inject(PLATFORM_ID) private platformId: any,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    // anchors\r\n    this.router.events.subscribe((event: RouterEvent) => {\r\n      if (event instanceof NavigationEnd && event.url !== '/user/landing') {\r\n        localStorage.setItem('route', event.url);\r\n      }\r\n      if (event instanceof Scroll && event.anchor && isPlatformBrowser(this.platformId)) {\r\n        setTimeout(() => {\r\n          const anchor = document.querySelector('#' + event.anchor);\r\n          if (!anchor) {\r\n            window.scrollTo({ top: 0, behavior: 'smooth' });\r\n          } else {\r\n            anchor.scrollIntoView({ behavior: 'smooth' });\r\n          }\r\n        }, 1000);\r\n      }\r\n    });\r\n    // fixtures\r\n    this.tutorialService.initialize();\r\n    this.firebaseService.loadFixtures([\r\n      // CollectionType.FACTIONS,\r\n      // CollectionType.ATTACKS,\r\n      // CollectionType.CATEGORIES,\r\n      // CollectionType.FAMILIES,\r\n      // CollectionType.GODS,\r\n      // CollectionType.GUILDS,\r\n      // CollectionType.RESOURCES,\r\n      // CollectionType.STRUCTURES,\r\n      // CollectionType.SKILLS,\r\n      CollectionType.UNITS,\r\n      CollectionType.SPELLS,\r\n      CollectionType.ITEMS,\r\n      // CollectionType.HEROES,\r\n      // CollectionType.STORES,\r\n      // CollectionType.LOCATIONS,\r\n      // CollectionType.LEGENDS,\r\n      // CollectionType.PERKS,\r\n      // CollectionType.PACKS,\r\n    ]);\r\n  }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule, APP_INITIALIZER } from '@angular/core';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { SharedModule } from './shared/shared.module';\r\nimport { environment } from '../environments/environment';\r\nimport { AngularFireModule } from '@angular/fire';\r\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\r\nimport { AngularFireAuthModule } from '@angular/fire/auth';\r\nimport { AngularFireDatabaseModule } from '@angular/fire/database';\r\nimport { TranslateModule, TranslateLoader, TranslateService } from '@ngx-translate/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { ErrorStateMatcher, ShowOnDirtyErrorStateMatcher } from '@angular/material/core';\r\nimport { NgxsModule } from '@ngxs/store';\r\nimport { NgxsReduxDevtoolsPluginModule } from '@ngxs/devtools-plugin';\r\nimport { AuthState } from './shared/auth/auth.state';\r\nimport { TourMatMenuModule } from 'ngx-ui-tour-md-menu';\r\nimport { MatPaginatorIntl } from '@angular/material/paginator';\r\nimport { PaginatorIntl } from './shared/custom/paginator.intl';\r\nimport { NgxCurrencyModule } from 'ngx-currency';\r\nimport { DisqusModule } from \"ngx-disqus\";\r\n\r\n// AOT compilation support\r\nexport function httpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}\r\n\r\n// i18n initializer to force translations to be loaded before startup\r\nexport function appInitializerFactory(translateService: TranslateService): () => Promise<any> {\r\n  return () => {\r\n    translateService.setDefaultLang('es');\r\n    return translateService.use('es').toPromise();\r\n  };\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    SharedModule,\r\n    AngularFireModule.initializeApp(environment.firebase),\r\n    AngularFireAuthModule,\r\n    AngularFirestoreModule,\r\n    AngularFireDatabaseModule,\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: httpLoaderFactory,\r\n        deps: [HttpClient],\r\n      },\r\n      isolate: false,\r\n    }),\r\n    NgxsModule.forRoot(\r\n      [AuthState],\r\n      { developmentMode: !environment.production },\r\n    ),\r\n    NgxsReduxDevtoolsPluginModule.forRoot({\r\n      name: 'Legendarium',\r\n      disabled: environment.production,\r\n    }),\r\n    TourMatMenuModule.forRoot(),\r\n    NgxCurrencyModule,\r\n    DisqusModule.forRoot('legendarium-test'),\r\n  ],\r\n  providers: [\r\n    { provide: ErrorStateMatcher, useClass: ShowOnDirtyErrorStateMatcher },\r\n    { provide: MatPaginatorIntl, useClass: PaginatorIntl },\r\n    { provide: APP_INITIALIZER, useFactory: appInitializerFactory, deps: [TranslateService], multi: true },\r\n  ],\r\n  bootstrap: [\r\n    AppComponent,\r\n  ],\r\n})\r\nexport class AppModule { }\r\n","<div class=\"kingdom-army\" fxLayout=\"row wrap\" fxLayoutGap=\"10px grid\" cdkDropListGroup [@fadeInOnEnter]>\r\n\r\n  <div fxFlex.xl=\"33\" fxFlex.lg=\"33\" fxFlex.md=\"50\" fxFlex.sm=\"100\" fxFlex.xs=\"100\">\r\n    <mat-card>\r\n      <mat-card-header>\r\n        <img mat-card-avatar src=\"/assets/images/cards/army.png\" [alt]=\"'kingdom.army.name' | translate\">\r\n        <mat-card-title>{{ 'kingdom.army.name' | translate }}</mat-card-title>\r\n        <mat-card-subtitle>{{ 'kingdom.army.description' | translate }}</mat-card-subtitle>\r\n        <div class=\"mat-card-extras\">\r\n          <button mat-icon-button (click)=\"this.tutorialService.start('tour.army')\"><mat-icon>help</mat-icon></button>\r\n          <mat-chip-list><mat-chip color=\"primary\"><mat-icon>filter_9_plus</mat-icon>{{ 'kingdom.army.max' | translate }}</mat-chip></mat-chip-list>\r\n        </div>\r\n      </mat-card-header>\r\n\r\n      <mat-card-content>\r\n        <div matSubheader>{{ 'card.list.troops' | translate }}:</div>\r\n        <mat-action-list dense class=\"dotted\" id=\"0\" tourAnchor=\"tour.army\" cdkDropList cdkDropListOrientation=\"vertical\" (cdkDropListDropped)=\"assignTroop($event)\" [cdkDropListData]=\"kingdomTroops\">\r\n          <button mat-list-item *ngFor=\"let troop of kingdomTroops\" cdkDrag class=\"handle\" [id]=\"troop.fid\" (click)=\"openDisbandDialog(troop)\" [ngClass]=\"[troop.unit.faction.id, troop.unit.legendary ? 'legendary' : 'common']\">\r\n            <div mat-list-avatar [matBadge]=\"troop.quantity | short\" matBadgePosition=\"above before\">\r\n              <img mat-list-avatar class=\"animated pulse infinite\" [src]=\"troop.unit.image\" [alt]=\"troop.unit.name | translate\">\r\n            </div>\r\n            <div mat-line>{{ troop.unit.name | translate }}</div>\r\n            <div mat-line class=\"mat-card-subtitle\">\r\n              <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of troop.unit.families\" [src]=\"family.image\" [alt]=\"family.name | translate\">\r\n              <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of troop.unit.skills\" [src]=\"skill.image\" [alt]=\"skill.name | translate\">\r\n              <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of troop.unit.categories\" [src]=\"category.image\" [alt]=\"category.name | translate\">\r\n              <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"troop.unit.legendary\" src=\"/assets/images/icons/legendary.png\" [alt]=\"'category.legendary.name' | translate\">\r\n            </div>\r\n            <div mat-line class=\"mat-card-subtitle\" *ngIf=\"troop.unit.resistances && troop.unit.resistances.length\">\r\n              <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of troop.unit.resistances\" [src]=\"category.image\" [alt]=\"'category.resistance.name' | translate\">\r\n            </div>\r\n            <mat-icon>open_with</mat-icon>\r\n          </button>\r\n        </mat-action-list>\r\n      </mat-card-content>\r\n      <mat-card-content>\r\n        <p [innerHTML]=\"'kingdom.army.help' | translate | icon\"></p>\r\n      </mat-card-content>\r\n    </mat-card>\r\n  </div>\r\n\r\n  <div fxFlex.xl=\"66\" fxFlex.lg=\"66\" fxFlex.md=\"50\" fxFlex.sm=\"100\" fxFlex.xs=\"100\">\r\n\r\n    <div fxLayout=\"row wrap\" fxLayoutGap=\"10px grid\">\r\n      <div fxFlex.xl=\"50\" fxFlex.lg=\"50\" fxFlex.md=\"100\" fxFlex.sm=\"100\" fxFlex.xs=\"100\">\r\n\r\n        <mat-card>\r\n          <mat-card-header>\r\n            <img mat-card-avatar src=\"/assets/images/cards/attack.png\" [alt]=\"'kingdom.attack.name' | translate\">\r\n            <mat-card-title>{{ 'kingdom.attack.name' | translate }}</mat-card-title>\r\n            <mat-card-subtitle>{{ 'kingdom.attack.description' | translate }}</mat-card-subtitle>\r\n            <div class=\"mat-card-extras\">\r\n              <button mat-icon-button (click)=\"this.tutorialService.start('tour.attack')\"><mat-icon>help</mat-icon></button>\r\n              <mat-chip-list><mat-chip color=\"primary\"><mat-icon>filter_5</mat-icon>{{ 'kingdom.attack.max' | translate }}</mat-chip></mat-chip-list>\r\n            </div>\r\n          </mat-card-header>\r\n\r\n          <mat-card-content>\r\n            <div matSubheader>{{ 'card.list.troops' | translate }}:</div>\r\n            <mat-list dense class=\"dotted\" id=\"1\" tourAnchor=\"tour.attack\" cdkDropList cdkDropListOrientation=\"vertical\" (cdkDropListDropped)=\"assignTroop($event)\" [cdkDropListData]=\"attackTroops\">\r\n              <mat-list-item *ngFor=\"let troop of attackTroops\" cdkDrag class=\"handle\" [id]=\"troop.fid\" [ngClass]=\"troop.unit.faction.id\">\r\n                <div mat-list-avatar [matBadge]=\"troop.quantity | short\" matBadgePosition=\"above before\">\r\n                  <img mat-list-avatar class=\"animated pulse infinite\" [src]=\"troop.unit.image\" [alt]=\"troop.unit.name | translate\">\r\n                </div>\r\n                <div mat-line>{{ troop.unit.name | translate }}</div>\r\n                <div mat-line class=\"mat-card-subtitle\">\r\n                  <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of troop.unit.families\" [src]=\"family.image\" [alt]=\"family.name | translate\">\r\n                  <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of troop.unit.skills\" [src]=\"skill.image\" [alt]=\"skill.name | translate\">\r\n                  <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of troop.unit.categories\" [src]=\"category.image\" [alt]=\"category.name | translate\">\r\n                  <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"troop.unit.legendary\" src=\"/assets/images/icons/legendary.png\" [alt]=\"'category.legendary.name' | translate\">\r\n                </div>\r\n                <div mat-line class=\"mat-card-subtitle\" *ngIf=\"troop.unit.resistances && troop.unit.resistances.length\">\r\n                  <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of troop.unit.resistances\" [src]=\"category.image\" [alt]=\"'category.resistance.name' | translate\">\r\n                </div>\r\n                <mat-icon>open_with</mat-icon>\r\n              </mat-list-item>\r\n            </mat-list>\r\n          </mat-card-content>\r\n          <mat-card-content>\r\n            <p [innerHTML]=\"'kingdom.attack.help' | translate | icon\"></p>\r\n          </mat-card-content>\r\n        </mat-card>\r\n\r\n      </div>\r\n\r\n      <div fxFlex.xl=\"50\" fxFlex.lg=\"50\" fxFlex.md=\"100\" fxFlex.sm=\"100\" fxFlex.xs=\"100\">\r\n\r\n        <mat-card>\r\n          <mat-card-header>\r\n            <img mat-card-avatar src=\"/assets/images/cards/defense.png\" [alt]=\"'kingdom.defense.name' | translate\">\r\n            <mat-card-title>{{ 'kingdom.defense.name' | translate }}</mat-card-title>\r\n            <mat-card-subtitle>{{ 'kingdom.defense.description' | translate }}</mat-card-subtitle>\r\n            <div class=\"mat-card-extras\">\r\n              <button mat-icon-button (click)=\"this.tutorialService.start('tour.defense')\"><mat-icon>help</mat-icon></button>\r\n              <mat-chip-list><mat-chip color=\"primary\"><mat-icon>filter_5</mat-icon>{{ 'kingdom.defense.max' | translate }}</mat-chip></mat-chip-list>\r\n            </div>\r\n          </mat-card-header>\r\n\r\n          <mat-card-content>\r\n            <div matSubheader>{{ 'card.list.troops' | translate }}:</div>\r\n            <mat-list dense class=\"dotted\" id=\"2\" tourAnchor=\"tour.defense\" cdkDropList cdkDropListOrientation=\"vertical\" (cdkDropListDropped)=\"assignTroop($event)\" [cdkDropListData]=\"defenseTroops\">\r\n              <mat-list-item *ngFor=\"let troop of defenseTroops\" cdkDrag class=\"handle\" [id]=\"troop.fid\" [ngClass]=\"troop.unit.faction.id\">\r\n                <div mat-list-avatar [matBadge]=\"troop.quantity | short\" matBadgePosition=\"above before\">\r\n                  <img mat-list-avatar class=\"animated pulse infinite\" [src]=\"troop.unit.image\" [alt]=\"troop.unit.name | translate\">\r\n                </div>\r\n                <div mat-line>{{ troop.unit.name | translate }}</div>\r\n                <div mat-line class=\"mat-card-subtitle\">\r\n                  <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of troop.unit.families\" [src]=\"family.image\" [alt]=\"family.name | translate\">\r\n                  <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of troop.unit.skills\" [src]=\"skill.image\" [alt]=\"skill.name | translate\">\r\n                  <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of troop.unit.categories\" [src]=\"category.image\" [alt]=\"category.name | translate\">\r\n                  <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"troop.unit.legendary\" src=\"/assets/images/icons/legendary.png\" [alt]=\"'category.legendary.name' | translate\">\r\n                </div>\r\n                <div mat-line class=\"mat-card-subtitle\" *ngIf=\"troop.unit.resistances && troop.unit.resistances.length\">\r\n                  <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of troop.unit.resistances\" [src]=\"category.image\" [alt]=\"'category.resistance.name' | translate\">\r\n                </div>\r\n                <mat-icon>open_with</mat-icon>\r\n              </mat-list-item>\r\n            </mat-list>\r\n          </mat-card-content>\r\n          <mat-card-content>\r\n            <p [innerHTML]=\"'kingdom.defense.help' | translate | icon\"></p>\r\n          </mat-card-content>\r\n        </mat-card>\r\n      </div>\r\n\r\n      <div fxFlex.xl=\"50\" fxFlex.lg=\"50\" fxFlex.md=\"100\" fxFlex.sm=\"100\" fxFlex.xs=\"100\">\r\n\r\n        <mat-card>\r\n          <mat-card-header>\r\n            <img mat-card-avatar src=\"/assets/images/cards/recruit.png\" [alt]=\"'kingdom.recruit.name' | translate\">\r\n            <mat-card-title>{{ 'kingdom.recruit.name' | translate }}</mat-card-title>\r\n            <mat-card-subtitle>{{ 'kingdom.recruit.description' | translate }}</mat-card-subtitle>\r\n            <div class=\"mat-card-extras\">\r\n              <button mat-icon-button (click)=\"this.tutorialService.start('tour.recruit')\"><mat-icon>help</mat-icon></button>\r\n              <mat-chip-list><mat-chip color=\"primary\"><mat-icon>list</mat-icon>{{ recruitUnits.length | long }}</mat-chip></mat-chip-list>\r\n            </div>\r\n          </mat-card-header>\r\n\r\n          <mat-card-content>\r\n            <div matSubheader>{{ 'card.list.troops' | translate }}:</div>\r\n            <mat-action-list dense tourAnchor=\"tour.recruit\">\r\n              <button mat-list-item *ngFor=\"let unit of recruitUnits\" (click)=\"openRecruitDialog(unit)\" class=\"common\">\r\n                <div mat-list-avatar matBadge=\"?\" matBadgePosition=\"above before\">\r\n                  <img mat-list-avatar class=\"animated pulse infinite\" [src]=\"unit.image\" [alt]=\"unit.name | translate\">\r\n                </div>\r\n                <div mat-line>{{ unit.name | translate }}</div>\r\n                <div mat-line class=\"mat-card-subtitle\">\r\n                  <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of unit.families\" [src]=\"family.image\" [alt]=\"family.name | translate\">\r\n                  <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of unit.skills\" [src]=\"skill.image\" [alt]=\"skill.name | translate\">\r\n                  <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of unit.categories\" [src]=\"category.image\" [alt]=\"category.name | translate\">\r\n                  <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"unit.legendary\" src=\"/assets/images/icons/legendary.png\" [alt]=\"'category.legendary.name' | translate\">\r\n                </div>\r\n                <div mat-line class=\"mat-card-subtitle\" *ngIf=\"unit.resistances && unit.resistances.length\">\r\n                  <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of unit.resistances\" [src]=\"category.image\" [alt]=\"'category.resistance.name' | translate\">\r\n                </div>\r\n                <div mat-list-avatar [matBadge]=\"unit.gold | long\" matBadgePosition=\"above after\">\r\n                  <img mat-list-avatar src=\"/assets/images/resources/gold.png\" [alt]=\"'resource.gold.name' | translate\"> [alt]=\"'resource.gold.name' | translate\">\r\n                </div>\r\n              </button>\r\n            </mat-action-list>\r\n          </mat-card-content>\r\n          <mat-card-content>\r\n            <p [innerHTML]=\"'kingdom.recruit.help' | translate | icon\"></p>\r\n          </mat-card-content>\r\n        </mat-card>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\r\nimport { CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { fadeInOnEnterAnimation } from 'angular-animations';\r\nimport { Store } from '@ngxs/store';\r\nimport { AuthState } from 'src/app/shared/auth/auth.state';\r\nimport { RecruitComponent } from './recruit.component';\r\nimport { DisbandComponent } from './disband.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { LoadingService } from 'src/app/services/loading.service';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { combineLatest } from 'rxjs';\r\nimport { TutorialService } from 'src/app/services/tutorial.service';\r\n\r\nexport enum TroopAssignmentType {\r\n  NONE,\r\n  ATTACK,\r\n  DEFENSE,\r\n}\r\n\r\nconst MAXIMUM_TROOPS = 5;\r\n\r\n@Component({\r\n  selector: 'app-army',\r\n  templateUrl: './army.component.html',\r\n  styleUrls: ['./army.component.scss'],\r\n  animations: [fadeInOnEnterAnimation({ duration: 250, delay: 250 })],\r\n})\r\n@UntilDestroy()\r\nexport class ArmyComponent implements OnInit {\r\n\r\n  uid: string = this.store.selectSnapshot(AuthState.getUserUID);\r\n  kingdomTroops: any[] = [];\r\n  attackTroops: any[] = [];\r\n  defenseTroops: any[] = [];\r\n  recruitUnits: any[] = [];\r\n\r\n  constructor(\r\n    private angularFirestore: AngularFirestore,\r\n    private notificationService: NotificationService,\r\n    private store: Store,\r\n    private dialog: MatDialog,\r\n    private apiService: ApiService,\r\n    private loadingService: LoadingService,\r\n    public tutorialService: TutorialService,\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    combineLatest([\r\n      this.angularFirestore.collection<any>(`kingdoms/${this.uid}/troops`).valueChanges({ idField: 'fid' }),\r\n      this.angularFirestore.collection<any>(`units`, ref => ref.where('recruitable', '==', true)).valueChanges({ idField: 'fid' }),\r\n    ])\r\n    .pipe(untilDestroyed(this))\r\n    .subscribe(([troops, units]) => {\r\n      this.kingdomTroops = troops.filter(troop => troop.assignment === TroopAssignmentType.NONE || !troop.assignment).sort((a, b) => a.sort - b.sort);\r\n      this.attackTroops = troops.filter(troop => troop.assignment === TroopAssignmentType.ATTACK).sort((a, b) => a.sort - b.sort);\r\n      this.defenseTroops = troops.filter(troop => troop.assignment === TroopAssignmentType.DEFENSE).sort((a, b) => a.sort - b.sort);\r\n      this.recruitUnits = units.sort((a, b) => a.gold - b.gold);\r\n    });\r\n  }\r\n\r\n  async assignTroop($event: CdkDragDrop<any>) {\r\n    if ($event.container && (Number($event.container.id) === 0 || $event.previousContainer === $event.container || $event.container.data.length < MAXIMUM_TROOPS)) {\r\n      if ($event.previousContainer === $event.container) {\r\n        moveItemInArray($event.container.data, $event.previousIndex, $event.currentIndex);\r\n      } else {\r\n        transferArrayItem($event.previousContainer.data, $event.container.data, $event.previousIndex, $event.currentIndex);\r\n      }\r\n      await this.updateArmy();\r\n    } else {\r\n      this.notificationService.warning('kingdom.army.maximum');\r\n    }\r\n  }\r\n\r\n  async updateArmy() {\r\n    this.loadingService.startLoading();\r\n    try {\r\n      const army = [];\r\n      this.kingdomTroops.forEach((kingdomTroop, index) => {\r\n        army.push({ troopId: kingdomTroop.fid, sort: 1000 + index, assignment: TroopAssignmentType.NONE });\r\n      });\r\n      this.attackTroops.forEach((attackTroop, index) => {\r\n        army.push({ troopId: attackTroop.fid, sort: 2000 + index, assignment: TroopAssignmentType.ATTACK });\r\n      });\r\n      this.defenseTroops.forEach((defenseTroop, index) => {\r\n        army.push({ troopId: defenseTroop.fid, sort: 3000 + index, assignment: TroopAssignmentType.DEFENSE });\r\n      });\r\n      const assigned = await this.apiService.assignArmy(this.uid, army);\r\n      this.notificationService.success('kingdom.army.success');\r\n    } catch (error) {\r\n      console.error(error);\r\n      this.notificationService.error('kingdom.army.error');\r\n    }\r\n    this.loadingService.stopLoading();\r\n  }\r\n\r\n  openRecruitDialog(unit: any): void {\r\n    const dialogRef = this.dialog.open(RecruitComponent, {\r\n      panelClass: 'dialog-responsive',\r\n      data: unit,\r\n    });\r\n  }\r\n\r\n  openDisbandDialog(troop: any): void {\r\n    const dialogRef = this.dialog.open(DisbandComponent, {\r\n      panelClass: 'dialog-responsive',\r\n      data: troop,\r\n    });\r\n  }\r\n\r\n}\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { Store } from '@ngxs/store';\r\nimport { AuthState } from 'src/app/shared/auth/auth.state';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { LoadingService } from 'src/app/services/loading.service';\r\n\r\n@Component({\r\n  selector: 'app-disband',\r\n  template: `\r\n    <h1 mat-dialog-title>{{ 'kingdom.disband.name' | translate }}</h1>\r\n    <div mat-dialog-content>\r\n      <p [innerHTML]=\"'kingdom.disband.description' | translate | icon\"></p>\r\n      <div matSubheader>{{ 'kingdom.disband.troop' | translate }}:</div>\r\n      <mat-list dense>\r\n        <mat-list-item [ngClass]=\"[troop.unit.faction.id, troop.unit.legendary ? 'legendary' : 'common']\">\r\n          <div mat-list-avatar [matBadge]=\"troop.quantity | long\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar [src]=\"troop.unit.image\">\r\n          </div>\r\n          <div mat-line>{{ troop.unit.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\">\r\n            <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of troop.unit.families\" [src]=\"family.image\">\r\n            <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of troop.unit.skills\" [src]=\"skill.image\">\r\n            <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of troop.unit.categories\" [src]=\"category.image\">\r\n            <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"troop.unit.legendary\" src=\"/assets/images/icons/legendary.png\">\r\n          </div>\r\n          <div mat-line class=\"mat-card-subtitle\" *ngIf=\"troop.unit.resistances && troop.unit.resistances.length\">\r\n            <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of troop.unit.resistances\" [src]=\"category.image\">\r\n          </div>\r\n          <div mat-list-avatar [matBadge]=\"0\" matBadgePosition=\"above after\">\r\n            <img mat-list-avatar src=\"/assets/images/resources/turn.png\">\r\n          </div>\r\n        </mat-list-item>\r\n      </mat-list>\r\n    </div>\r\n    <div mat-dialog-content>\r\n      <div matSubheader>{{ 'kingdom.disband.platoon' | translate }}:</div>\r\n      <form [formGroup]=\"form\">\r\n        <mat-form-field>\r\n          <mat-label>{{ 'kingdom.disband.quantity' | translate }}</mat-label>\r\n          <input currencyMask placeholder=\"{{ 'kingdom.disband.quantity' | translate }}\" matInput formControlName=\"quantity\">\r\n          <mat-hint>{{ 'kingdom.disband.hint' | translate }}</mat-hint>\r\n          <mat-error>{{ 'kingdom.disband.invalid' | translate }}</mat-error>\r\n        </mat-form-field>\r\n      </form>\r\n    </div>\r\n    <div mat-dialog-content>\r\n      <div matSubheader>{{ 'kingdom.disband.maintenances' | translate }}:</div>\r\n      <mat-chip-list>\r\n        <mat-chip color=\"primary\" selected *ngIf=\"troop.unit.goldMaintenance > 0\"><img class=\"icon\" src=\"/assets/images/resources/gold.png\">{{ 'user.tome.goldMaintenance' | translate:{ number: (troop.unit.goldMaintenance * troop.quantity) | long } }}</mat-chip>\r\n        <mat-chip color=\"primary\" selected *ngIf=\"troop.unit.manaMaintenance > 0\"><img class=\"icon\" src=\"/assets/images/resources/mana.png\">{{ 'user.tome.manaMaintenance' | translate:{ number: (troop.unit.manaMaintenance * troop.quantity) | long } }}</mat-chip>\r\n        <mat-chip color=\"primary\" selected *ngIf=\"troop.unit.populationMaintenance > 0\"><img class=\"icon\" src=\"/assets/images/resources/population.png\">{{ 'user.tome.populationMaintenance' | translate:{ number: (troop.unit.populationMaintenance * troop.quantity) | long } }}</mat-chip>\r\n      </mat-chip-list>\r\n    </div>\r\n    <div mat-dialog-actions>\r\n      <button mat-button (click)=\"close()\">{{ 'kingdom.disband.cancel' | translate }}</button>\r\n      <button mat-raised-button color=\"primary\" [disabled]=\"form.invalid || troop.unit.populationMaintenance > 0\" (click)=\"disband()\">{{ 'kingdom.disband.disband' | translate }}</button>\r\n    </div>\r\n  `,\r\n  styles: [`\r\n    .mat-form-field {\r\n      width: 100%;\r\n    }\r\n  `],\r\n})\r\nexport class DisbandComponent implements OnInit {\r\n\r\n  form: FormGroup = null;\r\n  uid = this.store.selectSnapshot(AuthState.getUserUID);\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public troop: any,\r\n    private dialogRef: MatDialogRef<DisbandComponent>,\r\n    private formBuilder: FormBuilder,\r\n    private notificationService: NotificationService,\r\n    private store: Store,\r\n    private apiService: ApiService,\r\n    private loadingService: LoadingService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.formBuilder.group({\r\n      quantity: [this.troop.quantity, [Validators.required, Validators.min(1), Validators.max(this.troop.quantity)]],\r\n    });\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  async disband() {\r\n    if (this.form.valid) {\r\n      this.loadingService.startLoading();\r\n      try {\r\n        const disbanded = await this.apiService.disbandTroop(this.uid, this.troop.fid, this.form.value.quantity);\r\n        this.notificationService.success('kingdom.disband.success', disbanded);\r\n        this.close();\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.notificationService.error('kingdom.disband.error');\r\n      }\r\n      this.loadingService.stopLoading();\r\n    } else {\r\n      this.notificationService.error('kingdom.disband.error');\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { Store } from '@ngxs/store';\r\nimport { AuthState } from 'src/app/shared/auth/auth.state';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { LoadingService } from 'src/app/services/loading.service';\r\n\r\n@Component({\r\n  selector: 'app-recruit',\r\n  template: `\r\n    <h1 mat-dialog-title>{{ 'kingdom.recruit.name' | translate }}</h1>\r\n    <div mat-dialog-content>\r\n      <p [innerHTML]=\"'kingdom.recruit.help' | translate | icon\"></p>\r\n      <div matSubheader>{{ 'kingdom.recruit.troop' | translate }}:</div>\r\n      <mat-list dense>\r\n        <mat-list-item [ngClass]=\"[unit.faction.id, unit.legendary ? 'legendary' : 'common']\">\r\n          <div mat-list-avatar matBadge=\"?\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar [src]=\"unit.image\">\r\n          </div>\r\n          <div mat-line>{{ unit.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\">\r\n            <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of unit.families\" [src]=\"family.image\">\r\n            <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of unit.skills\" [src]=\"skill.image\">\r\n            <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of unit.categories\" [src]=\"category.image\">\r\n            <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"unit.legendary\" src=\"/assets/images/icons/legendary.png\">\r\n          </div>\r\n          <div mat-line class=\"mat-card-subtitle\" *ngIf=\"unit.resistances && unit.resistances.length\">\r\n            <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of unit.resistances\" [src]=\"category.image\">\r\n          </div>\r\n          <div mat-list-avatar [matBadge]=\"unit.gold | long\" matBadgePosition=\"above after\">\r\n            <img mat-list-avatar src=\"/assets/images/resources/gold.png\">\r\n          </div>\r\n        </mat-list-item>\r\n      </mat-list>\r\n    </div>\r\n    <div mat-dialog-content>\r\n      <div matSubheader>{{ 'kingdom.recruit.platoon' | translate }}:</div>\r\n      <form [formGroup]=\"form\">\r\n        <mat-form-field>\r\n          <mat-label>{{ 'kingdom.recruit.quantity' | translate }}</mat-label>\r\n          <input currencyMask placeholder=\"{{ 'kingdom.recruit.quantity' | translate }}\" matInput formControlName=\"quantity\">\r\n          <mat-hint>{{ 'kingdom.recruit.hint' | translate }}</mat-hint>\r\n          <mat-error>{{ 'kingdom.recruit.invalid' | translate }}</mat-error>\r\n        </mat-form-field>\r\n      </form>\r\n    </div>\r\n    <div mat-dialog-content>\r\n      <div matSubheader>{{ 'kingdom.recruit.costs' | translate }}:</div>\r\n      <mat-chip-list>\r\n        <mat-chip color=\"primary\" selected><img class=\"icon\" src=\"/assets/images/resources/gold.png\">{{ gold() | long}}</mat-chip>\r\n      </mat-chip-list>\r\n    </div>\r\n    <div mat-dialog-actions>\r\n      <button mat-button (click)=\"close()\">{{ 'kingdom.recruit.cancel' | translate }}</button>\r\n      <button mat-raised-button color=\"primary\" [disabled]=\"form.invalid\" (click)=\"recruit()\">{{ 'kingdom.recruit.recruit' | translate }}</button>\r\n    </div>\r\n  `,\r\n  styles: [`\r\n    .mat-form-field {\r\n      width: 100%;\r\n    }\r\n  `],\r\n})\r\nexport class RecruitComponent implements OnInit {\r\n\r\n  form: FormGroup = null;\r\n  uid: string = this.store.selectSnapshot(AuthState.getUserUID);\r\n  kingdomGold: any = this.store.selectSnapshot(AuthState.getKingdomGold);\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public unit: any,\r\n    private dialogRef: MatDialogRef<RecruitComponent>,\r\n    private formBuilder: FormBuilder,\r\n    private notificationService: NotificationService,\r\n    private store: Store,\r\n    private apiService: ApiService,\r\n    private loadingService: LoadingService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.formBuilder.group({\r\n      quantity: [null, [Validators.required, Validators.min(1), Validators.max(Math.floor(this.kingdomGold.quantity / this.unit.gold))]],\r\n    });\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  gold(): number {\r\n    return this.form.value.quantity * this.unit.gold;\r\n  }\r\n\r\n  async recruit() {\r\n    if (this.form.valid && this.gold() <= this.kingdomGold.quantity) {\r\n      this.loadingService.startLoading();\r\n      try {\r\n        const recruited = await this.apiService.recruitUnit(this.uid, this.unit.id, this.form.value.quantity);\r\n        this.notificationService.success('kingdom.recruit.success', recruited);\r\n        this.close();\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.notificationService.error('kingdom.recruit.error');\r\n      }\r\n      this.loadingService.stopLoading();\r\n    } else {\r\n      this.notificationService.error('kingdom.recruit.error');\r\n    }\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Pipe({\r\n  name: 'icon',\r\n})\r\nexport class IconPipe implements PipeTransform {\r\n\r\n  constructor(\r\n    private domSanitizer: DomSanitizer,\r\n    private translateService: TranslateService,\r\n  ) {}\r\n\r\n  transform(text: string = '', object?: any): SafeHtml {\r\n    if (text && object) {\r\n      const terms = [object.skills || [], object.families || [], object.categories || [], object.units || [], object.resources || [], object.spells || [], object.adjacents || [], object.opposites || [], object.resistances || []].reduce((a, b) => a.concat(b), []);\r\n      terms.forEach((term: any) => text = text.replace(`<${term.id}>`, `<img class=\"icon\" title=\"${this.translateService.instant(term.name)}\" src=\"${term.image}\">`));\r\n    }\r\n    text = (text || '')\r\n    .replace(/<gold>/g, `<img class=\"icon\" title=\"${this.translateService.instant('resource.gold.name')}\" src=\"/assets/images/resources/gold.png\">`)\r\n    .replace(/<mana>/g, `<img class=\"icon\" title=\"${this.translateService.instant('resource.mana.name')}\" src=\"/assets/images/resources/mana.png\">`)\r\n    .replace(/<population>/g, `<img class=\"icon\" title=\"${this.translateService.instant('resource.population.name')}\" src=\"/assets/images/resources/population.png\">`)\r\n    .replace(/<land>/g, `<img class=\"icon\" title=\"${this.translateService.instant('resource.land.name')}\" src=\"/assets/images/resources/land.png\">`)\r\n    .replace(/<turn>/g, `<img class=\"icon\" title=\"${this.translateService.instant('resource.turn.name')}\" src=\"/assets/images/resources/turn.png\">`)\r\n    .replace(/<gem>/g, `<img class=\"icon\" title=\"${this.translateService.instant('resource.gem.name')}\" src=\"/assets/images/resources/gem.png\">`)\r\n    .replace(/<power>/g, `<img class=\"icon\" title=\"${this.translateService.instant('icon.power.name')}\" src=\"/assets/images/icons/power.png\">`)\r\n    .replace(/<attack>/g, `<img class=\"icon\" title=\"${this.translateService.instant('type.attack.name')}\" src=\"/assets/images/icons/attack.png\">`)\r\n    .replace(/<defense>/g, `<img class=\"icon\" title=\"${this.translateService.instant('type.defense.name')}\" src=\"/assets/images/icons/defense.png\">`)\r\n    .replace(/<health>/g, `<img class=\"icon\" title=\"${this.translateService.instant('type.health.name')}\" src=\"/assets/images/icons/health.png\">`)\r\n    .replace(/<initiative>/g, `<img class=\"icon\" title=\"${this.translateService.instant('type.initiative.name')}\" src=\"/assets/images/icons/initiative.png\">`)\r\n    .replace(/<skeleton>/g, `<img class=\"icon\" title=\"${this.translateService.instant('unit.skeleton.name')}\" src=\"/assets/images/units/black/skeleton.png\">`)\r\n    .replace(/<sheep>/g, `<img class=\"icon\" title=\"${this.translateService.instant('unit.sheep.name')}\" src=\"/assets/images/units/grey/sheep.png\">`);\r\n    return this.domSanitizer.bypassSecurityTrustHtml(text);\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'legendary',\r\n})\r\nexport class LegendaryPipe implements PipeTransform {\r\n\r\n  transform(object: any): boolean {\r\n    // return object && object.categories && object.categories.length && object.categories.find((category: any) => category.id === 'legendary') !== undefined;\r\n    return object && object.legendary;\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'long',\r\n})\r\nexport class LongPipe implements PipeTransform {\r\n\r\n  constructor() {}\r\n\r\n  transform(value: number, decimals: number = 2): string {\r\n    return value !== undefined && value !== null\r\n      ? value.toLocaleString('de-DE', { // de-DE is the only locale that allows showing a thousand separator under 10.000\r\n          useGrouping: true,\r\n          minimumIntegerDigits: 1,\r\n          minimumFractionDigits: value % 1 !== 0 ? decimals : 0,\r\n          maximumFractionDigits: value % 1 !== 0 ? decimals : 0,\r\n        })\r\n      : '';\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'short',\r\n})\r\nexport class ShortPipe implements PipeTransform {\r\n\r\n  transform(value: number, decimals: number = 1): string {\r\n    if (Number.isNaN(value)) return null;\r\n    if (value < 1000) return value.toString();\r\n    const suffixes = ['K', 'M', 'G', 'T', 'P', 'E'];\r\n    const exp = Math.floor(Math.log(value) / Math.log(1000));\r\n    return (value / Math.pow(1000, exp)).toFixed(decimals) + suffixes[exp - 1];\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { Select } from '@ngxs/store';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Pipe({\r\n  name: 'turn',\r\n})\r\nexport class TurnPipe implements PipeTransform {\r\n\r\n  @Select((state: any) => state.auth.clock) clock$: Observable<Date>;\r\n\r\n  transform(timestamp: any, max: number, ratio: number): Observable<number> {\r\n    return this.clock$.pipe(\r\n      map(time => {\r\n        return calculate(timestamp.toMillis(), time, max, ratio);\r\n      }),\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport const calculate = (from: any, to: any, max: number, ratio: number): number => {\r\n  const start = moment(from);\r\n  const end = moment(to);\r\n  const minutes = moment.duration(end.diff(start)).asMinutes();\r\n  return max\r\n    ? Math.min(max, Math.floor(minutes / ratio))\r\n    : Math.floor(minutes / ratio);\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport { StoreType, LocationType, FactionType } from 'src/app/shared/type/common.type';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ApiService {\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n  ) { }\r\n\r\n  createKingdom(kingdomId: string, factionId: string, name: string, latitude: number, longitude: number): Promise<any> {\r\n    return this.httpClient.post(`${environment.functions.url}/world/kingdom`, {\r\n      kingdomId: kingdomId,\r\n      name: name,\r\n      factionId: factionId,\r\n      latitude: latitude,\r\n      longitude: longitude,\r\n    }).toPromise();\r\n  }\r\n\r\n  exploreLand(kingdomId: string, turns: number): Promise<any> {\r\n    return this.httpClient.get(`${environment.functions.url}/kingdom/${kingdomId}/explore/${turns}`).toPromise();\r\n  }\r\n\r\n  chargeMana(kingdomId: string, turns: number): Promise<any> {\r\n    return this.httpClient.get(`${environment.functions.url}/kingdom/${kingdomId}/charge/${turns}`).toPromise();\r\n  }\r\n\r\n  taxGold(kingdomId: string, turns: number): Promise<any> {\r\n    return this.httpClient.get(`${environment.functions.url}/kingdom/${kingdomId}/tax/${turns}`).toPromise();\r\n  }\r\n\r\n  recruitUnit(kingdomId: string, unitId: string, quantity: number): Promise<any> {\r\n    return this.httpClient.get(`${environment.functions.url}/kingdom/${kingdomId}/army/${unitId}/recruit/${quantity}`).toPromise();\r\n  }\r\n\r\n  disbandTroop(kingdomId: string, troopId: string, quantity: number): Promise<any> {\r\n    return this.httpClient.delete(`${environment.functions.url}/kingdom/${kingdomId}/army/${troopId}/disband/${quantity}`, undefined).toPromise();\r\n  }\r\n\r\n  dischargeContract(kingdomId: string, contractId: string): Promise<any> {\r\n    return this.httpClient.delete(`${environment.functions.url}/kingdom/${kingdomId}/tavern/${contractId}/discharge`, undefined).toPromise();\r\n  }\r\n\r\n  researchCharm(kingdomId: string, charmId: string, turns: number): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/sorcery/${charmId}/research/${turns}`, undefined).toPromise();\r\n  }\r\n\r\n  conjureCharm(kingdomId: string, charmId: string, targetId: string): Promise<any> {\r\n    return this.httpClient.post(`${environment.functions.url}/kingdom/${kingdomId}/sorcery/${charmId}/conjure/${targetId}`, undefined).toPromise();\r\n  }\r\n\r\n  activateArtifact(kingdomId: string, artifactId: string, targetId: string): Promise<any> {\r\n    return this.httpClient.request('delete', `${environment.functions.url}/kingdom/${kingdomId}/sorcery/${artifactId}/activate/${targetId}`, undefined).toPromise();\r\n  }\r\n\r\n  bidAuction(kingdomId: string, auctionId: string, gold: number): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/auction/${auctionId}/bid/${gold}`, undefined).toPromise();\r\n  }\r\n\r\n  offerGod(kingdomId: string, godId: string, gold: number): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/temple/${godId}/offer/${gold}`, undefined).toPromise();\r\n  }\r\n\r\n  buildStructure(kingdomId: string, buildingId: string, quantity: number): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/city/${buildingId}/build/${quantity}`, undefined).toPromise();\r\n  }\r\n\r\n  demolishStructure(kingdomId: string, buildingId: string, quantity: number): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/city/${buildingId}/demolish/${quantity}`, undefined).toPromise();\r\n  }\r\n\r\n  assignContract(kingdomId: string, contractId: string, assignmentId: number): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/tavern/${contractId}/assign/${assignmentId}`, undefined).toPromise();\r\n  }\r\n\r\n  assignArmy(kingdomId: string, army: any[]): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/army`, {\r\n      army: army,\r\n    }).toPromise();\r\n  }\r\n\r\n  buyEmporium(kingdomId: string, itemId: string): Promise<any> {\r\n    return this.httpClient.get(`${environment.functions.url}/kingdom/${kingdomId}/emporium/${itemId}`).toPromise();\r\n  }\r\n\r\n  battleKingdom(kingdomId: string, targetId: string, battleId: number ): Promise<any> {\r\n    return this.httpClient.post(`${environment.functions.url}/kingdom/${kingdomId}/battle/${battleId}/target/${targetId}`, undefined).toPromise();\r\n  }\r\n\r\n  populateMap(latitude: number, longitude: number): Promise<any> {\r\n    return this.httpClient.post(`${environment.functions.url}/world/map`, {\r\n      latitude: latitude,\r\n      longitude: longitude,\r\n    }).toPromise();\r\n  }\r\n\r\n  addKingdom(kingdomId: string, factionId: FactionType, latitude: number, longitude: number, name: string): Promise<any> {\r\n    return this.httpClient.post(`${environment.functions.url}/world/kingdom`, {\r\n      kingdomId: kingdomId,\r\n      factionId: factionId,\r\n      latitude: latitude,\r\n      longitude: longitude,\r\n      name: name,\r\n    }).toPromise();\r\n  }\r\n\r\n  addShop(fid: string, storeType: StoreType, latitude?: number, longitude?: number, name?: string): Promise<any> {\r\n    return this.httpClient.put(`${environment.functions.url}/world/shop`, {\r\n      fid: fid,\r\n      storeType: storeType,\r\n      latitude: latitude,\r\n      longitude: longitude,\r\n      name: name,\r\n    }).toPromise();\r\n  }\r\n\r\n  addQuest(fid: string, locationType: LocationType, latitude?: number, longitude?: number, name?: string): Promise<any> {\r\n    return this.httpClient.put(`${environment.functions.url}/world/quest`, {\r\n      fid: fid,\r\n      locationType: locationType,\r\n      latitude: latitude,\r\n      longitude: longitude,\r\n      name: name,\r\n    }).toPromise();\r\n  }\r\n\r\n  refreshAuction(): Promise<any> {\r\n    return this.httpClient.put(`${environment.functions.url}/world/auction`, undefined).toPromise();\r\n  }\r\n\r\n  sendLetter(kingdomId: string, subject: string, message: string, fromId: string): Promise<any> {\r\n    return this.httpClient.post(`${environment.functions.url}/kingdom/${kingdomId}/archive`, {\r\n      subject: subject,\r\n      message: message,\r\n      fromId: fromId,\r\n    }).toPromise();\r\n  }\r\n\r\n  readLetter(kingdomId: string, letterId: string): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/archive/${letterId}`, undefined).toPromise();\r\n  }\r\n\r\n  removeLetters(kingdomId: string, letterIds: string[]): Promise<any> {\r\n    return this.httpClient.delete(`${environment.functions.url}/kingdom/${kingdomId}/archive`, {\r\n      body: {\r\n        letterIds: letterIds,\r\n      },\r\n    }).toPromise();\r\n  }\r\n\r\n  favorGuild(kingdomId: string, guildId: string): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/guild/${guildId}`, undefined).toPromise();\r\n  }\r\n\r\n  foundateClan(kingdomId: string, name: string, description: string, image: string): Promise<any> {\r\n    return this.httpClient.put(`${environment.functions.url}/world/clan`, {\r\n      kingdomId: kingdomId,\r\n      name: name,\r\n      description: description,\r\n      image: image,\r\n    }).toPromise();\r\n  }\r\n\r\n  joinClan(kingdomId: string, clanId: string): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/clan/${clanId}/join`, undefined).toPromise();\r\n  }\r\n\r\n  leaveClan(kingdomId: string, clanId: string): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/clan/${clanId}/leave`, undefined).toPromise();\r\n  }\r\n\r\n  assignCharm(kingdomId: string, charmId: string, assignmentId: number): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/sorcery/charm/${charmId}/assign/${assignmentId}`, undefined).toPromise();\r\n  }\r\n\r\n  assignArtifact(kingdomId: string, artifactId: string, assignmentId: number): Promise<any> {\r\n    return this.httpClient.patch(`${environment.functions.url}/kingdom/${kingdomId}/sorcery/artifact/${artifactId}/assign/${assignmentId}`, undefined).toPromise();\r\n  }\r\n\r\n  dispelIncantation(kingdomId: string, incantationId: string): Promise<any> {\r\n    return this.httpClient.delete(`${environment.functions.url}/kingdom/${kingdomId}/temple/${incantationId}/dispel`, undefined).toPromise();\r\n  }\r\n\r\n  breakEnchantment(kingdomId: string, enchantmentId: string): Promise<any> {\r\n    return this.httpClient.delete(`${environment.functions.url}/kingdom/${kingdomId}/temple/${enchantmentId}/break`, undefined).toPromise();\r\n  }\r\n\r\n  tradeDeal(kingdomId: string, shopId: string, collectionId: string, dealId: string): Promise<any> {\r\n    return this.httpClient.get(`${environment.functions.url}/kingdom/${kingdomId}/world/shop/${shopId}/${collectionId}/${dealId}`).toPromise();\r\n  }\r\n\r\n  adventureQuest(kingdomId: string, questId: string): Promise<any> {\r\n    return this.httpClient.post(`${environment.functions.url}/kingdom/${kingdomId}/world/quest/${questId}`, undefined).toPromise();\r\n  }\r\n\r\n  plantTree(kingdomId: string, tree: any, gems: number): Promise<any> {\r\n    return this.httpClient.put(`${environment.functions.url}/kingdom/${kingdomId}/tree`, {\r\n      tree: tree,\r\n      gems: gems,\r\n    }).toPromise();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\n\r\nexport enum CollectionType {\r\n  'SKILLS' = 'skills',\r\n  'FACTIONS' = 'factions',\r\n  'UNITS' = 'units',\r\n  'FAMILIES' = 'families',\r\n  'SPELLS' = 'spells',\r\n  'STRUCTURES' = 'structures',\r\n  'CATEGORIES' = 'categories',\r\n  'GODS' = 'gods',\r\n  'HEROES' = 'heroes',\r\n  'RESOURCES' = 'resources',\r\n  'ITEMS' = 'items',\r\n  'STORES' = 'stores',\r\n  'LOCATIONS' = 'locations',\r\n  'PACKS' = 'packs',\r\n  'GUILDS' = 'guilds',\r\n  'ATTACKS' = 'attacks',\r\n  'LEGENDS' = 'legends',\r\n  'PERKS' = 'perks',\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CacheService {\r\n\r\n  constructor(\r\n    private angularFirestore: AngularFirestore,\r\n  ) { }\r\n\r\n  get(collection: string) {\r\n    switch (collection) {\r\n      case CollectionType.PACKS:\r\n        return this.getPacks();\r\n      case CollectionType.GUILDS:\r\n        return this.getGuilds();\r\n      case CollectionType.ATTACKS:\r\n        return this.getAttacks();\r\n      case CollectionType.SKILLS:\r\n        return this.getSkills();\r\n      case CollectionType.FACTIONS:\r\n        return this.getFactions();\r\n      case CollectionType.UNITS:\r\n        return this.getUnits();\r\n      case CollectionType.FAMILIES:\r\n        return this.getFamilies();\r\n      case CollectionType.SPELLS:\r\n        return this.getSpells();\r\n      case CollectionType.STRUCTURES:\r\n        return this.getStructures();\r\n      case CollectionType.CATEGORIES:\r\n        return this.getCategories();\r\n      case CollectionType.GODS:\r\n        return this.getGods();\r\n      case CollectionType.HEROES:\r\n        return this.getHeroes();\r\n      case CollectionType.RESOURCES:\r\n        return this.getResources();\r\n      case CollectionType.ITEMS:\r\n        return this.getItems();\r\n      case CollectionType.STORES:\r\n        return this.getStores();\r\n      case CollectionType.LOCATIONS:\r\n        return this.getLocations();\r\n      case CollectionType.PERKS:\r\n        return this.getPerks();\r\n    }\r\n  }\r\n\r\n  async getFactions(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.FACTIONS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.FACTIONS).get().toPromise();\r\n      const factions = snapshot.docs.map((faction: any) => faction.data());\r\n      localStorage.setItem(CollectionType.FACTIONS, JSON.stringify([...factions]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.FACTIONS));\r\n  }\r\n\r\n  async getPacks(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.PACKS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.PACKS).get().toPromise();\r\n      const packs = snapshot.docs.map((faction: any) => faction.data());\r\n      localStorage.setItem(CollectionType.PACKS, JSON.stringify([...packs]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.PACKS));\r\n  }\r\n\r\n  async getAttacks(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.ATTACKS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.ATTACKS).get().toPromise();\r\n      const attacks = snapshot.docs.map((attack: any) => attack.data());\r\n      localStorage.setItem(CollectionType.ATTACKS, JSON.stringify([...attacks]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.ATTACKS));\r\n  }\r\n\r\n  async getGuilds(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.GUILDS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.GUILDS).get().toPromise();\r\n      const guilds = snapshot.docs.map((guild: any) => guild.data());\r\n      localStorage.setItem(CollectionType.GUILDS, JSON.stringify([...guilds]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.GUILDS));\r\n  }\r\n\r\n  async getStores(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.STORES)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.STORES).get().toPromise();\r\n      const stores = snapshot.docs.map((store: any) => store.data());\r\n      localStorage.setItem(CollectionType.STORES, JSON.stringify([...stores]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.STORES));\r\n  }\r\n\r\n  async getResources(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.RESOURCES)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.RESOURCES).get().toPromise();\r\n      const resources = snapshot.docs.map((resource: any) => resource.data());\r\n      localStorage.setItem(CollectionType.RESOURCES, JSON.stringify([...resources]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.RESOURCES));\r\n  }\r\n\r\n  async getStructures(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.STRUCTURES)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.STRUCTURES).get().toPromise();\r\n      const structures = snapshot.docs.map((structure: any) => structure.data());\r\n      localStorage.setItem(CollectionType.STRUCTURES, JSON.stringify([...structures]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.STRUCTURES));\r\n  }\r\n\r\n  async getHeroes(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.HEROES)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.HEROES).get().toPromise();\r\n      const heroes = snapshot.docs.map((hero: any) => hero.data());\r\n      localStorage.setItem(CollectionType.HEROES, JSON.stringify([...heroes]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.HEROES));\r\n  }\r\n\r\n  async getGods(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.GODS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.GODS).get().toPromise();\r\n      const gods = snapshot.docs.map((god: any) => god.data());\r\n      localStorage.setItem(CollectionType.GODS, JSON.stringify([...gods]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.GODS));\r\n  }\r\n\r\n  async getSkills(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.SKILLS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.SKILLS).get().toPromise();\r\n      const skills = snapshot.docs.map((skill: any) => skill.data());\r\n      localStorage.setItem(CollectionType.SKILLS, JSON.stringify([...skills]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.SKILLS));\r\n  }\r\n\r\n  async getCategories(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.CATEGORIES)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.CATEGORIES).get().toPromise();\r\n      const categories = snapshot.docs.map((category: any) => category.data());\r\n      localStorage.setItem(CollectionType.CATEGORIES, JSON.stringify([...categories]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.CATEGORIES));\r\n  }\r\n\r\n  async getFamilies(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.FAMILIES)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.FAMILIES).get().toPromise();\r\n      const families = snapshot.docs.map((family: any) => family.data());\r\n      localStorage.setItem(CollectionType.FAMILIES, JSON.stringify([...families]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.FAMILIES));\r\n  }\r\n\r\n  async getLocations(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.LOCATIONS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.LOCATIONS).get().toPromise();\r\n      const locations = snapshot.docs.map((location: any) => location.data());\r\n      localStorage.setItem(CollectionType.LOCATIONS, JSON.stringify([...locations]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.LOCATIONS));\r\n  }\r\n\r\n  async getUnits(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.UNITS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.UNITS).get().toPromise();\r\n      const units = snapshot.docs.map((unit: any) => unit.data());\r\n      localStorage.setItem(CollectionType.UNITS, JSON.stringify([...units]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.UNITS));\r\n  }\r\n\r\n  async getSpells(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.SPELLS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.SPELLS).get().toPromise();\r\n      const spells = snapshot.docs.map((spell: any) => spell.data());\r\n      localStorage.setItem(CollectionType.SPELLS, JSON.stringify([...spells]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.SPELLS));\r\n  }\r\n\r\n  async getItems(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.ITEMS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.ITEMS).get().toPromise();\r\n      const items = snapshot.docs.map((item: any) => item.data());\r\n      localStorage.setItem(CollectionType.ITEMS, JSON.stringify([...items]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.ITEMS));\r\n  }\r\n\r\n  async getPerks(): Promise<any[]> {\r\n    if (!localStorage.getItem(CollectionType.PERKS)) {\r\n      const snapshot = await this.angularFirestore.collection<any>(CollectionType.PERKS).get().toPromise();\r\n      const perks = snapshot.docs.map((perk: any) => perk.data());\r\n      localStorage.setItem(CollectionType.PERKS, JSON.stringify([...perks]));\r\n    }\r\n    return JSON.parse(localStorage.getItem(CollectionType.PERKS));\r\n  }\r\n}\r\n","import { Injectable, Injector, ApplicationRef, ComponentFactoryResolver, ComponentRef, Type } from '@angular/core';\r\nimport { UntilDestroy } from '@ngneat/until-destroy';\r\n\r\nexport interface InjectableHTML {\r\n  html: HTMLDivElement;\r\n  ref: ComponentRef<any>;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ComponentService {\r\n\r\n  private componentRef: ComponentRef<any>;\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private applicationRef: ApplicationRef,\r\n  ) { }\r\n\r\n  public injectComponent<T>(component: Type<T>, propertySetter?: (type: T) => void): InjectableHTML {\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(component);\r\n    UntilDestroy()(component);\r\n    this.componentRef = componentFactory.create(this.injector);\r\n    if (propertySetter) propertySetter(this.componentRef.instance);\r\n    this.applicationRef.attachView(this.componentRef.hostView);\r\n    const div = document.createElement('div');\r\n    div.appendChild(this.componentRef.location.nativeElement);\r\n    return {\r\n      html: div,\r\n      ref: this.componentRef,\r\n    };\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class DomService {\r\n\r\n  constructor() { }\r\n\r\n  public scrollToElement($element: HTMLElement) {\r\n    $element.scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'nearest' });\r\n  }\r\n\r\n  public scrollToTop($element: HTMLElement = null) {\r\n    if ($element) {\r\n      $element.scroll(0, 0);\r\n    } else {\r\n      window.scroll(0, 0);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport * as firebase from 'firebase';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport * as moment from 'moment';\r\nimport { CollectionType } from './cache.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class FirebaseService {\r\n\r\n  attacks: any[] = [];\r\n  factions: any[] = [];\r\n  families: any[] = [];\r\n  categories: any[] = [];\r\n  gods: any[] = [];\r\n  resources: any[] = [];\r\n  skills: any[] = [];\r\n  structures: any[] = [];\r\n  guilds: any[] = [];\r\n  units: any[] = [];\r\n  items: any[] = [];\r\n  stores: any[] = [];\r\n  locations: any[] = [];\r\n  spells: any[] = [];\r\n  heroes: any[] = [];\r\n  kingdoms: any[] = [];\r\n  legends: any[] = [];\r\n  perks: any[] = [];\r\n  packs: any[] = [];\r\n\r\n  joinedAttacks: any[] = [];\r\n  joinedFactions: any[] = [];\r\n  joinedFamilies: any[] = [];\r\n  joinedCategories: any[] = [];\r\n  joinedGods: any[] = [];\r\n  joinedResources: any[] = [];\r\n  joinedSkills: any[] = [];\r\n  joinedStructures: any[] = [];\r\n  joinedGuilds: any[] = [];\r\n  joinedUnits: any[] = [];\r\n  joinedItems: any[] = [];\r\n  joinedStores: any[] = [];\r\n  joinedLocations: any[] = [];\r\n  joinedSpells: any[] = [];\r\n  joinedHeroes: any[] = [];\r\n  joinedLegends: any[] = [];\r\n  joinedPerks: any[] = [];\r\n  joinedPacks: any[] = [];\r\n\r\n  constructor(\r\n    private angularFirestore: AngularFirestore,\r\n    private angularFireAuth: AngularFireAuth,\r\n    private httpClient: HttpClient,\r\n  ) { }\r\n\r\n  async joinFixtures(element: any) {\r\n    // if (element.store) this.joinObject(element, 'store', await this.cacheService.getStores());\r\n    if (element.faction) this.joinObject(element, 'faction', this.joinedFactions);\r\n    if (element.adjacents) this.joinObject(element, 'adjacents', this.factions);\r\n    if (element.opposites) this.joinObject(element, 'opposites', this.factions);\r\n    // if (element.location) this.joinObject(element, 'location', await this.cacheService.getLocations());\r\n    if (element.skills) this.joinObject(element, 'skills', this.skills);\r\n    if (element.unit) this.joinObject(element, 'unit', this.joinedUnits);\r\n    if (element.units) this.joinObject(element, 'units', this.joinedUnits);\r\n    if (element.categories) this.joinObject(element, 'categories', this.categories);\r\n    if (element.resistances) this.joinObject(element, 'resistances', this.categories);\r\n    if (element.families) this.joinObject(element, 'families', this.families);\r\n    if (element.spell) this.joinObject(element, 'spell', this.joinedSpells);\r\n    if (element.spells) this.joinObject(element, 'spells', this.joinedSpells);\r\n    // if (element.hero) this.joinObject(element, 'hero', await this.cacheService.getHeroes());\r\n    // if (element.item) this.joinObject(element, 'item', await this.cacheService.getItems());\r\n    // if (element.items) this.joinObject(element, 'items', await this.cacheService.getItems());\r\n    if (element.resources) this.joinObject(element, 'resources', this.resources);\r\n    if (element.perks) this.joinObject(element, 'perks', this.perks, true);\r\n  }\r\n\r\n  joinObject(element: any, subCollection: string, collection: any[], recursive: boolean = false) {\r\n    if (element[subCollection] instanceof Array) {\r\n      element[subCollection].forEach((subElement: any, subElementIndex: number, subElementArray: any[]) => {\r\n        if (typeof subElement === 'string') {\r\n          element[subCollection][subElementIndex] = JSON.parse(JSON.stringify(collection.find(el => el['id'] === subElement.replace(/^\\+|^\\-|^\\//g, ''))));\r\n          if (recursive) {\r\n            this.joinObject(element[subCollection][subElementIndex], 'perks', this.perks, true);\r\n          }\r\n        }\r\n      });\r\n      element[subCollection] = recursive\r\n        ? element[subCollection].slice().sort((a: any, b: any) => a?.sort - b?.sort)\r\n        : element[subCollection].slice().sort((a: any, b: any) => a?.name.localeCompare(b?.name));\r\n    }\r\n    if (typeof element[subCollection] === 'string') {\r\n      element[subCollection] = JSON.parse(JSON.stringify(collection.find(el => el['id'] === element[subCollection].replace(/^\\+|^\\-|^\\//g, ''))));\r\n    }\r\n  }\r\n\r\n  async readFixtures() {\r\n    this.attacks = await this.httpClient.get<any[]>('assets/fixtures/attacks.json').toPromise();\r\n    this.factions = await this.httpClient.get<any[]>('assets/fixtures/factions.json').toPromise();\r\n    this.families = await this.httpClient.get<any[]>('assets/fixtures/families.json').toPromise();\r\n    this.categories = await this.httpClient.get<any[]>('assets/fixtures/categories.json').toPromise();\r\n    this.gods = await this.httpClient.get<any[]>('assets/fixtures/gods.json').toPromise();\r\n    this.resources = await this.httpClient.get<any[]>('assets/fixtures/resources.json').toPromise();\r\n    this.skills = await this.httpClient.get<any[]>('assets/fixtures/skills.json').toPromise();\r\n    this.structures = await this.httpClient.get<any[]>('assets/fixtures/structures.json').toPromise();\r\n    this.guilds = await this.httpClient.get<any[]>('assets/fixtures/guilds.json').toPromise();\r\n    this.units = await this.httpClient.get<any[]>('assets/fixtures/units.json').toPromise();\r\n    this.items = await this.httpClient.get<any[]>('assets/fixtures/items.json').toPromise();\r\n    this.stores = await this.httpClient.get<any[]>('assets/fixtures/stores.json').toPromise();\r\n    this.locations = await this.httpClient.get<any[]>('assets/fixtures/locations.json').toPromise();\r\n    this.spells = await this.httpClient.get<any[]>('assets/fixtures/spells.json').toPromise();\r\n    this.heroes = await this.httpClient.get<any[]>('assets/fixtures/heroes.json').toPromise();\r\n    this.legends = await this.httpClient.get<any[]>('assets/fixtures/legends.json').toPromise();\r\n    this.perks = await this.httpClient.get<any[]>('assets/fixtures/perks.json').toPromise();\r\n    this.packs = await this.httpClient.get<any[]>('assets/fixtures/packs.json').toPromise();\r\n  }\r\n\r\n  async importFixtures(collection: string, elements: any[], batch: firebase.firestore.WriteBatch) {\r\n    elements.forEach((element: any, index: number) => {\r\n      element.random = index;\r\n      if (element.timestamp) {\r\n        element.timestamp = moment(element.timestamp, 'DD/MM/YYYY', true).toDate();\r\n      }\r\n      batch.set(this.angularFirestore.collection(collection).doc(element.id).ref, element);\r\n    });\r\n  }\r\n\r\n  loadFixtures(fixtures: CollectionType[]) {\r\n    this.angularFireAuth.authState.subscribe(async user => {\r\n      if (user && fixtures.length) {\r\n        const batch = this.angularFirestore.firestore.batch();\r\n        await this.readFixtures();\r\n        this.joinedFactions = JSON.parse(JSON.stringify(this.factions));\r\n        this.joinedFactions.forEach(faction => this.joinFixtures(faction));\r\n        if (fixtures.includes(CollectionType.FACTIONS)) {\r\n          console.log(`Loading ${CollectionType.FACTIONS}...`);\r\n          this.importFixtures(CollectionType.FACTIONS, this.joinedFactions, batch);\r\n        }\r\n        this.joinedAttacks = JSON.parse(JSON.stringify(this.attacks));\r\n        this.joinedAttacks.forEach(attack => this.joinFixtures(attack));\r\n        if (fixtures.includes(CollectionType.ATTACKS)) {\r\n          console.log(`Loading ${CollectionType.ATTACKS}...`);\r\n          this.importFixtures(CollectionType.ATTACKS, this.joinedAttacks, batch);\r\n        }\r\n        this.joinedGuilds = JSON.parse(JSON.stringify(this.guilds));\r\n        this.joinedGuilds.forEach(guild => this.joinFixtures(guild));\r\n        if (fixtures.includes(CollectionType.GUILDS)) {\r\n          console.log(`Loading ${CollectionType.GUILDS}...`);\r\n          this.importFixtures(CollectionType.GUILDS, this.joinedGuilds, batch);\r\n        }\r\n        this.joinedFamilies = JSON.parse(JSON.stringify(this.families));\r\n        this.joinedFamilies.forEach(family => this.joinFixtures(family));\r\n        if (fixtures.includes(CollectionType.FAMILIES)) {\r\n          console.log(`Loading ${CollectionType.FAMILIES}...`);\r\n          this.importFixtures(CollectionType.FAMILIES, this.joinedFamilies, batch);\r\n        }\r\n        this.joinedCategories = JSON.parse(JSON.stringify(this.categories));\r\n        this.joinedCategories.forEach(category => this.joinFixtures(category));\r\n        if (fixtures.includes(CollectionType.CATEGORIES)) {\r\n          console.log(`Loading ${CollectionType.CATEGORIES}...`);\r\n          this.importFixtures(CollectionType.CATEGORIES, this.joinedCategories, batch);\r\n        }\r\n        this.joinedGods = JSON.parse(JSON.stringify(this.gods));\r\n        this.joinedGods.forEach(god => this.joinFixtures(god));\r\n        if (fixtures.includes(CollectionType.GODS)) {\r\n          console.log(`Loading ${CollectionType.GODS}...`);\r\n          this.importFixtures(CollectionType.GODS, this.joinedGods, batch);\r\n        }\r\n        this.joinedResources = JSON.parse(JSON.stringify(this.resources));\r\n        this.joinedResources.forEach(resource => this.joinFixtures(resource));\r\n        if (fixtures.includes(CollectionType.RESOURCES)) {\r\n          console.log(`Loading ${CollectionType.RESOURCES}...`);\r\n          this.importFixtures(CollectionType.RESOURCES, this.joinedResources, batch);\r\n        }\r\n        this.joinedStructures = JSON.parse(JSON.stringify(this.structures));\r\n        this.joinedStructures.forEach(structure => this.joinFixtures(structure));\r\n        if (fixtures.includes(CollectionType.STRUCTURES)) {\r\n          console.log(`Loading ${CollectionType.STRUCTURES}...`);\r\n          this.importFixtures(CollectionType.STRUCTURES, this.joinedStructures, batch);\r\n        }\r\n        this.joinedSkills = JSON.parse(JSON.stringify(this.skills));\r\n        this.joinedSkills.forEach(skill => this.joinFixtures(skill));\r\n        if (fixtures.includes(CollectionType.SKILLS)) {\r\n          console.log(`Loading ${CollectionType.SKILLS}...`);\r\n          this.importFixtures(CollectionType.SKILLS, this.joinedSkills, batch);\r\n        }\r\n        this.joinedUnits = JSON.parse(JSON.stringify(this.units));\r\n        this.joinedUnits.forEach(unit => this.joinFixtures(unit));\r\n        if (fixtures.includes(CollectionType.UNITS)) {\r\n          console.log(`Loading ${CollectionType.UNITS}...`);\r\n          this.importFixtures(CollectionType.UNITS, this.joinedUnits, batch);\r\n        }\r\n        this.joinedSpells = JSON.parse(JSON.stringify(this.spells));\r\n        this.joinedSpells.forEach(spell => this.joinFixtures(spell));\r\n        if (fixtures.includes(CollectionType.SPELLS)) {\r\n          console.log(`Loading ${CollectionType.SPELLS}...`);\r\n          this.importFixtures(CollectionType.SPELLS, this.joinedSpells, batch);\r\n        }\r\n        this.joinedItems = JSON.parse(JSON.stringify(this.items));\r\n        this.joinedItems.forEach(item => this.joinFixtures(item));\r\n        if (fixtures.includes(CollectionType.ITEMS)) {\r\n          console.log(`Loading ${CollectionType.ITEMS}...`);\r\n          this.importFixtures(CollectionType.ITEMS, this.joinedItems, batch);\r\n        }\r\n        this.joinedHeroes = JSON.parse(JSON.stringify(this.heroes));\r\n        this.joinedHeroes.forEach(hero => this.joinFixtures(hero));\r\n        if (fixtures.includes(CollectionType.HEROES)) {\r\n          console.log(`Loading ${CollectionType.HEROES}...`);\r\n          this.importFixtures(CollectionType.HEROES, this.joinedHeroes, batch);\r\n        }\r\n        this.joinedStores = JSON.parse(JSON.stringify(this.stores));\r\n        this.joinedStores.forEach(store => this.joinFixtures(store));\r\n        if (fixtures.includes(CollectionType.STORES)) {\r\n          console.log(`Loading ${CollectionType.STORES}...`);\r\n          this.importFixtures(CollectionType.STORES, this.joinedStores, batch);\r\n        }\r\n        this.joinedLocations = JSON.parse(JSON.stringify(this.locations));\r\n        this.joinedLocations.forEach(quest => this.joinFixtures(quest));\r\n        if (fixtures.includes(CollectionType.LOCATIONS)) {\r\n          console.log(`Loading ${CollectionType.LOCATIONS}...`);\r\n          this.importFixtures(CollectionType.LOCATIONS, this.joinedLocations, batch);\r\n        }\r\n        this.joinedLegends = JSON.parse(JSON.stringify(this.legends));\r\n        this.joinedLegends.forEach(legend => this.joinFixtures(legend));\r\n        if (fixtures.includes(CollectionType.LEGENDS)) {\r\n          console.log(`Loading ${CollectionType.LEGENDS}...`);\r\n          this.importFixtures(CollectionType.LEGENDS, this.joinedLegends, batch);\r\n        }\r\n        this.joinedPerks = JSON.parse(JSON.stringify(this.perks));\r\n        this.joinedPerks.forEach(perk => this.joinFixtures(perk));\r\n        if (fixtures.includes(CollectionType.PERKS)) {\r\n          console.log(`Loading ${CollectionType.PERKS}...`);\r\n          this.importFixtures(CollectionType.PERKS, this.joinedPerks, batch);\r\n        }\r\n        this.joinedPacks = JSON.parse(JSON.stringify(this.packs));\r\n        this.joinedPacks.forEach(pack => this.joinFixtures(pack));\r\n        if (fixtures.includes(CollectionType.PACKS)) {\r\n          console.log(`Loading ${CollectionType.PACKS}...`);\r\n          this.importFixtures(CollectionType.PACKS, this.joinedPacks, batch);\r\n        }\r\n        await batch.commit();\r\n        console.log('Fixtures loaded!');\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class LoadingService {\r\n\r\n  public loading: boolean = false; // spinner\r\n\r\n  constructor() { }\r\n\r\n  startLoading(): void {\r\n    this.loading = true;\r\n  }\r\n\r\n  stopLoading(): void {\r\n    this.loading = false;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { environment } from '../../environments/environment';\r\nimport * as mapboxgl from 'mapbox-gl';\r\nimport { ComponentService, InjectableHTML } from '../services/component.service';\r\nimport MapboxCircle from 'mapbox-gl-circle';\r\nimport { MarkerComponent } from '../world/marker/marker.component';\r\nimport { PopupComponent } from '../world/popup/popup.component';\r\nimport { Store } from '@ngxs/store';\r\nimport { AuthState } from '../shared/auth/auth.state';\r\nimport { ApiService } from './api.service';\r\nimport * as _ from 'lodash';\r\nimport { MarkerType, FactionType, StoreType, LocationType } from '../shared/type/common.type';\r\nimport { NotificationService } from './notification.service';\r\nimport { distinctUntilChanged } from 'rxjs/operators';\r\nimport { Subscription } from 'rxjs';\r\n\r\nexport interface Marker {\r\n  id: string;\r\n  type: MarkerType;\r\n  marker: mapboxgl.Marker;\r\n  circle: MapboxCircle;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MapboxService {\r\n\r\n  private mapbox = (mapboxgl as typeof mapboxgl);\r\n  public map: mapboxgl.Map = null;\r\n  public markers: Marker[] = [];\r\n  private offset: number = 10;\r\n  private uid: string = this.store.selectSnapshot(AuthState.getUserUID);\r\n  private primaryColor: string = null;\r\n\r\n  constructor(\r\n    private componentService: ComponentService,\r\n    private store: Store,\r\n    private apiService: ApiService,\r\n    private notificationService: NotificationService,\r\n  ) {\r\n    this.mapbox.accessToken = environment.mapbox.token;\r\n  }\r\n\r\n  initialize(container: string | HTMLElement) {\r\n    this.primaryColor = window.getComputedStyle(document.body).getPropertyValue('--primary-color');\r\n    this.map = new mapboxgl.Map({\r\n      container: container,\r\n      style: environment.mapbox.style + '?optimize=true',\r\n      center: [environment.mapbox.lng, environment.mapbox.lat],\r\n      pitch: environment.mapbox.pitch,\r\n      zoom: environment.mapbox.zoom,\r\n      antialias: false,\r\n      dragPan: true,\r\n      dragRotate: true,\r\n      attributionControl: true,\r\n      interactive: true,\r\n    });\r\n    this.map.once('load', () => {\r\n      // add fog https://docs.mapbox.com/mapbox-gl-js/example/add-fog/\r\n      this.map.setFog({\r\n        range: [0.5, 10.0],\r\n        color: '#FFFFFF',\r\n        'horizon-blend': 0.1,\r\n      });\r\n      // add the DEM source as a terrain layer\r\n      this.map.addSource('mapbox-dem', {\r\n        type: 'raster-dem',\r\n        url: 'mapbox://mapbox.terrain-rgb',\r\n        tileSize: 512,\r\n        maxzoom: environment.mapbox.zoom,\r\n      });\r\n      // add the DEM source as a terrain layer with exaggerated height\r\n      this.map.setTerrain({\r\n        source: 'mapbox-dem',\r\n        exaggeration: 3,\r\n      });\r\n      // add a sky layer that will show when the map is highly pitched\r\n      this.map.addLayer({\r\n        id: 'sky-day',\r\n        type: 'sky',\r\n        paint: {\r\n          'sky-type': 'gradient',\r\n        },\r\n      });\r\n    });\r\n    this.map.on('moveend', () => this.refreshMarkers());\r\n  }\r\n\r\n  markerVisible(marker: Marker): boolean {\r\n    const lngLat: mapboxgl.LngLat = marker.marker.getLngLat();\r\n    return lngLat && lngLat.lat && lngLat.lng\r\n      ? this.map.getBounds().contains(lngLat)\r\n      : false;\r\n  }\r\n\r\n  refreshMarkers(): void {\r\n    this.markers.forEach((marker: Marker) => {\r\n      console.log(marker, this.uid)\r\n      if (marker.id !== this.uid && (this.map.getZoom() < environment.mapbox.zoom || !this.markerVisible(marker))) {\r\n        marker.marker.getElement().style.display = 'none';\r\n      } else {\r\n        marker.marker.getElement().style.display = 'block';\r\n      }\r\n    });\r\n  }\r\n\r\n  addMarker(data: any, type: MarkerType, radius: boolean = false, fly: boolean = false): mapboxgl.Marker {\r\n    // remove the old one\r\n    this.removeMarker(data.id);\r\n    // size\r\n    const size = type === MarkerType.KINGDOM ? 70 : 44;\r\n    // marker\r\n    const m: InjectableHTML = this.componentService.injectComponent(MarkerComponent, component => component.data = { ...data, size: size, type: type });\r\n    let marker = new mapboxgl.Marker(m.html, { anchor: 'bottom' })\r\n    .setLngLat({ lat: data.coordinates.latitude, lng: data.coordinates.longitude })\r\n    .addTo(this.map);\r\n    // popup\r\n    let p: InjectableHTML = null;\r\n    let s: Subscription = null;\r\n    marker = marker.setPopup(new mapboxgl.Popup({\r\n      offset: [0, -(size + this.offset)],\r\n      anchor: 'bottom',\r\n      closeButton: false,\r\n      closeOnClick: true,\r\n      closeOnMove: false,\r\n      maxWidth: 'none',\r\n      className: 'dialog-responsive',\r\n    })\r\n    .setDOMContent(document.createElement('div') as HTMLDivElement)\r\n    // open\r\n    .on('open', ($event: any) => {\r\n      p = this.componentService.injectComponent(PopupComponent, component => component.data = { ...data, type: type });\r\n      p.ref.changeDetectorRef.detectChanges();\r\n      marker.getPopup().setDOMContent(p.html);\r\n      s = (p.ref.instance as PopupComponent).opened\r\n      .asObservable()\r\n      .pipe(distinctUntilChanged())\r\n      .subscribe(async (open: boolean) => {\r\n        if (open) {\r\n          await new Promise(resolve => setTimeout(resolve, 500));\r\n          this.map.easeTo({\r\n            center: $event.target.getLngLat(),\r\n            offset: [0, ($event.target.getElement().clientHeight / 2) + this.offset],\r\n          });\r\n        }\r\n      });\r\n    })\r\n    // close\r\n    .on('close', () => {\r\n      marker.getPopup().setDOMContent(document.createElement('div') as HTMLDivElement);\r\n      if (p && p.ref) {\r\n        p.ref.destroy();\r\n        p = null;\r\n      }\r\n      if (s) {\r\n        s.unsubscribe();\r\n        s = null;\r\n      }\r\n    }));\r\n    // radius\r\n    let circle = null;\r\n    if (radius) {\r\n      circle = new MapboxCircle({ lat: data.coordinates.latitude, lng: data.coordinates.longitude }, Math.max(1000, data.power), {\r\n        editable: false,\r\n        fillColor: this.primaryColor,\r\n        fillOpacity: 0.2,\r\n        strokeColor: this.primaryColor,\r\n        strokeWeight: 1,\r\n        strokeOpacity: 1,\r\n        refineStroke : false,\r\n      });\r\n      circle.addTo(this.map);\r\n    }\r\n    // center\r\n    if (fly) {\r\n      this.goTo(data.coordinates.latitude, data.coordinates.longitude, true);\r\n    }\r\n    // add to list for future disposal\r\n    this.markers.push({ id: data.id, marker: marker, circle: circle, type: type });\r\n    // return\r\n    return marker;\r\n  }\r\n\r\n  goTo(lat: number, lng: number, fly: boolean = false): void {\r\n    if (fly) {\r\n      this.map.flyTo({\r\n        center: [lng, lat],\r\n        essential: true,\r\n      });\r\n    } else {\r\n      this.map.easeTo({\r\n        center: [lng, lat],\r\n        essential: true,\r\n      });\r\n    }\r\n  }\r\n\r\n  removeMarker(id: string): void {\r\n    const index = this.markers.findIndex(item => item.id === id);\r\n    if (index !== -1) {\r\n      const found = this.markers[index];\r\n      if (found.marker) found.marker.remove();\r\n      if (found.circle) found.circle.remove();\r\n      this.markers.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  clearMarkers(type: MarkerType = null): void {\r\n    if (type) {\r\n      this.markers.filter((marker: Marker) => marker.type === type).slice(0).forEach((marker: Marker) => this.removeMarker(marker.id));\r\n    } else {\r\n      this.markers.slice(0).forEach((marker: Marker) => this.removeMarker(marker.id));\r\n    }\r\n  }\r\n\r\n  resizeMap() {\r\n    if (this.map) {\r\n      this.map.resize();\r\n    }\r\n  }\r\n\r\n  addKingdomByClick(type: FactionType): void {\r\n    this.map.once('click', async ($event: mapboxgl.MapMouseEvent) => {\r\n      await this.apiService.addKingdom(null, type, $event.lngLat.lat, $event.lngLat.lng, 'bot-' + (Math.random() + 1).toString(36).substring(7));\r\n      this.notificationService.warning('world.map.update');\r\n    });\r\n  }\r\n\r\n  addShopByClick(type: StoreType): void {\r\n    this.map.once('click', async ($event: mapboxgl.MapMouseEvent) => {\r\n      await this.apiService.addShop(null, type, $event.lngLat.lat, $event.lngLat.lng, 'shop-' + (Math.random() + 1).toString(36).substring(7));\r\n      this.notificationService.warning('world.map.update');\r\n    });\r\n  }\r\n\r\n  addQuestByClick(type: LocationType): void {\r\n    this.map.once('click', async ($event: mapboxgl.MapMouseEvent) => {\r\n      await this.apiService.addQuest(null, type, $event.lngLat.lat, $event.lngLat.lng, 'quest-' + (Math.random() + 1).toString(36).substring(7));\r\n      this.notificationService.warning('world.map.update');\r\n    });\r\n  }\r\n\r\n  populateMapByClick(): void {\r\n    this.map.once('click', async ($event: mapboxgl.MapMouseEvent) => {\r\n      await this.apiService.populateMap($event.lngLat.lat, $event.lngLat.lng);\r\n      this.notificationService.warning('world.map.update');\r\n    });\r\n  }\r\n\r\n  terminalize(): void {\r\n    this.clearMarkers();\r\n    this.map.remove();\r\n    this.map = null;\r\n    this.markers = [];\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MatSnackBar, MatSnackBarConfig, MatSnackBarDismiss, MatSnackBarRef } from '@angular/material/snack-bar';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { LongPipe } from '../pipes/long.pipe';\r\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\r\nimport { filter, tap, map, takeUntil, delay, take } from 'rxjs/operators';\r\n\r\nenum SnackBarType {\r\n  SUCCESS = 'success',\r\n  WARNING = 'warning',\r\n  ERROR = 'error',\r\n}\r\n\r\ninterface SnackBarQueueItem {\r\n  message: string;\r\n  showing: boolean;\r\n  type: SnackBarType;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class NotificationService {\r\n\r\n  private options: MatSnackBarConfig = {\r\n    duration: 2500,\r\n    horizontalPosition: 'right',\r\n    verticalPosition: 'top',\r\n  };\r\n  private readonly snackBarQueue = new BehaviorSubject<SnackBarQueueItem[]>([]);\r\n  private readonly snackBarQueue$ = this.snackBarQueue.asObservable();\r\n  private readonly ngDestroy = new Subject();\r\n\r\n  constructor(\r\n    private snackBar: MatSnackBar,\r\n    private translateService: TranslateService,\r\n  ) {\r\n    this.snackBarQueue$\r\n    .pipe(\r\n      filter((queue: SnackBarQueueItem[]) => queue.length > 0 && !queue[0].showing),\r\n      tap(() => {\r\n        const updatedQueue = this.snackBarQueue.value;\r\n        updatedQueue[0].showing = true;\r\n        this.snackBarQueue.next(updatedQueue);\r\n      }),\r\n      map(queue => queue[0]),\r\n      takeUntil(this.ngDestroy),\r\n    ).subscribe((notification: SnackBarQueueItem) => this.showSnackbar(notification.message, notification.type));\r\n  }\r\n\r\n  private showSnackbar(message: string, type: SnackBarType): void {\r\n    let matSnackBarRef: MatSnackBarRef<any> = null;\r\n    switch (type) {\r\n      case SnackBarType.SUCCESS:\r\n        matSnackBarRef = this.snackBar.open(message, '✔️', {...this.options, panelClass: ['mat-toolbar', 'mat-accent']});\r\n        break;\r\n      case SnackBarType.WARNING:\r\n        matSnackBarRef = this.snackBar.open(message, '⚠️', {...this.options, panelClass: ['mat-toolbar', 'mat-primary']});\r\n        break;\r\n      case SnackBarType.ERROR:\r\n        matSnackBarRef = this.snackBar.open(message, '❌', {...this.options, panelClass: ['mat-toolbar', 'mat-warn']});\r\n        break;\r\n    }\r\n    if (matSnackBarRef) this.removeDismissedSnackBar(matSnackBarRef.afterDismissed());\r\n  }\r\n\r\n  private removeDismissedSnackBar(snackBar: Observable<MatSnackBarDismiss>): void {\r\n    snackBar\r\n    .pipe(\r\n      delay(50),\r\n      take(1),\r\n    )\r\n    .subscribe(() => {\r\n      const updatedQueue = this.snackBarQueue.value;\r\n      if (updatedQueue[0].showing) updatedQueue.shift();\r\n      this.snackBarQueue.next(updatedQueue);\r\n    });\r\n  }\r\n\r\n  success(text: string, variable?: any): void {\r\n    if (variable) {\r\n      Object.keys(variable).forEach((key, index) => {\r\n        if (typeof variable[key] === 'number') variable[key] = new LongPipe().transform(variable[key]);\r\n        if (typeof variable[key] === 'string' && variable[key].includes('.')) variable[key] = this.translateService.instant(variable[key]);\r\n      });\r\n    }\r\n    const message = this.translateService.instant(text, variable);\r\n    const type = SnackBarType.SUCCESS;\r\n    this.snackBarQueue.next(this.snackBarQueue.value.concat([{ message, type, showing: false }]));\r\n  }\r\n\r\n  warning(text: string): void {\r\n    const message = this.translateService.instant(text);\r\n    const type = SnackBarType.WARNING;\r\n    this.snackBarQueue.next(this.snackBarQueue.value.concat([{ message, type, showing: false }]));\r\n  }\r\n\r\n  error(text: string): void {\r\n    const message = this.translateService.instant(text);\r\n    const type = SnackBarType.ERROR;\r\n    this.snackBarQueue.next(this.snackBarQueue.value.concat([{ message, type, showing: false }]));\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TourService } from 'ngx-ui-tour-md-menu';\r\nimport { ReplaySubject } from 'rxjs';\r\nimport { IStepOption } from 'ngx-ui-tour-core';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TutorialService {\r\n\r\n  constructor(\r\n    private tourService: TourService,\r\n  ) { }\r\n\r\n  ready(route: string) {\r\n    const waitingSteps = this.tourService.steps.filter(step => (step.route as string).includes(route));\r\n    waitingSteps.forEach(waitingStep => (waitingStep.waitFor as ReplaySubject<void>).next());\r\n  }\r\n\r\n  start(step?: string | undefined) {\r\n    if (step) this.tourService.startAt(step);\r\n    else this.tourService.start();\r\n  }\r\n\r\n  initialize() {\r\n    const options: IStepOption = {\r\n      preventScrolling: false,\r\n      enableBackdrop: true,\r\n      // waitFor: new ReplaySubject<void>(),\r\n    };\r\n    this.tourService.disableHotkeys();\r\n    this.tourService.initialize([\r\n      { route: '/kingdom/city', stepId: 'tour.supplies', anchorId: 'tour.supplies', title: 'kingdom.supplies.name', content: 'kingdom.supplies.tour' },\r\n      { route: '/kingdom/city', stepId: 'tour.city', anchorId: 'tour.city', title: 'kingdom.city.name', content: 'kingdom.city.tour' },\r\n      { route: '/kingdom/city', stepId: 'tour.tax', anchorId: 'tour.tax', title: 'kingdom.tax.name', content: 'kingdom.tax.tour' },\r\n      { route: '/kingdom/city', stepId: 'tour.charge', anchorId: 'tour.charge', title: 'kingdom.charge.name', content: 'kingdom.charge.tour' },\r\n      { route: '/kingdom/city', stepId: 'tour.explore', anchorId: 'tour.explore', title: 'kingdom.explore.name', content: 'kingdom.explore.tour' },\r\n      { route: '/kingdom/auction', stepId: 'tour.auction', anchorId: 'tour.auction', title: 'kingdom.auction.name', content: 'kingdom.auction.tour' },\r\n      { route: '/kingdom/auction', stepId: 'tour.bid', anchorId: 'tour.bid', title: 'kingdom.bid.name', content: 'kingdom.bid.tour' },\r\n      { route: '/kingdom/emporium', stepId: 'tour.emporium', anchorId: 'tour.emporium', title: 'kingdom.emporium.name', content: 'kingdom.emporium.tour' },\r\n      { route: '/kingdom/emporium', stepId: 'tour.tree', anchorId: 'tour.tree', title: 'kingdom.tree.name', content: 'kingdom.tree.tour' },\r\n      { route: '/kingdom/emporium', stepId: 'tour.mining', anchorId: 'tour.mining', title: 'kingdom.mining.name', content: 'kingdom.mining.tour' },\r\n      { route: '/kingdom/army', stepId: 'tour.army', anchorId: 'tour.army', title: 'kingdom.army.name', content: 'kingdom.army.tour' },\r\n      { route: '/kingdom/army', stepId: 'tour.attack', anchorId: 'tour.attack', title: 'kingdom.attack.name', content: 'kingdom.attack.tour' },\r\n      { route: '/kingdom/army', stepId: 'tour.defense', anchorId: 'tour.defense', title: 'kingdom.defense.name', content: 'kingdom.defense.tour' },\r\n      { route: '/kingdom/army', stepId: 'tour.recruit', anchorId: 'tour.recruit', title: 'kingdom.recruit.name', content: 'kingdom.recruit.tour' },\r\n      { route: '/kingdom/tavern', stepId: 'tour.tavern', anchorId: 'tour.tavern', title: 'kingdom.tavern.name', content: 'kingdom.tavern.tour' },\r\n      { route: '/kingdom/tavern', stepId: 'tour.leadership', anchorId: 'tour.leadership', title: 'kingdom.leadership.name', content: 'kingdom.leadership.tour' },\r\n      { route: '/kingdom/tavern', stepId: 'tour.guard', anchorId: 'tour.guard', title: 'kingdom.guard.name', content: 'kingdom.guard.tour' },\r\n      { route: '/kingdom/census', stepId: 'tour.census', anchorId: 'tour.census', title: 'kingdom.census.name', content: 'kingdom.census.tour' },\r\n      { route: '/kingdom/census', stepId: 'tour.kingdom', anchorId: 'tour.kingdom', title: 'kingdom.kingdom.name', content: 'kingdom.kingdom.tour' },\r\n      { route: '/kingdom/archive', stepId: 'tour.archive', anchorId: 'tour.archive', title: 'kingdom.archive.name', content: 'kingdom.archive.tour' },\r\n      { route: '/kingdom/clan', stepId: 'tour.clan', anchorId: 'tour.clan', title: 'kingdom.clan.name', content: 'kingdom.clan.tour' },\r\n      { route: '/kingdom/clan', stepId: 'tour.guild', anchorId: 'tour.guild', title: 'kingdom.guild.name', content: 'kingdom.guild.tour' },\r\n      { route: '/kingdom/sorcery', stepId: 'tour.sorcery', anchorId: 'tour.sorcery', title: 'kingdom.sorcery.name', content: 'kingdom.sorcery.tour' },\r\n      { route: '/kingdom/sorcery', stepId: 'tour.arcanism', anchorId: 'tour.arcanism', title: 'kingdom.arcanism.name', content: 'kingdom.arcanism.tour' },\r\n      { route: '/kingdom/sorcery', stepId: 'tour.protection', anchorId: 'tour.protection', title: 'kingdom.protection.name', content: 'kingdom.protection.tour' },\r\n      { route: '/kingdom/temple', stepId: 'tour.temple', anchorId: 'tour.temple', title: 'kingdom.temple.name', content: 'kingdom.temple.tour' },\r\n      { route: '/kingdom/temple', stepId: 'tour.break', anchorId: 'tour.break', title: 'kingdom.break.name', content: 'kingdom.break.tour' },\r\n      { route: '/kingdom/temple', stepId: 'tour.dispel', anchorId: 'tour.dispel', title: 'kingdom.dispel.name', content: 'kingdom.dispel.tour' },\r\n      { route: '/user/encyclopedia', stepId: 'tour.encyclopedia', anchorId: 'tour.encyclopedia', title: 'user.encyclopedia.name', content: 'user.encyclopedia.tour' },\r\n    ], options);\r\n  }\r\n}\r\n","export class SetUserAction {\r\n  public static readonly type = '[User] Set User';\r\n  constructor(public uid: string) {}\r\n}\r\n\r\nexport class SetKingdomAction {\r\n  public static readonly type = '[User] Set Kingdom';\r\n  constructor(public uid: string) {}\r\n}\r\n\r\nexport class SetKingdomSuppliesAction {\r\n  public static readonly type = '[User] Set Kingdom supplies';\r\n  constructor(public uid: string) {}\r\n}\r\n\r\nexport class SetKingdomBuildingsAction {\r\n  public static readonly type = '[User] Set Kingdom buildings';\r\n  constructor(public uid: string) {}\r\n}\r\n\r\nexport class LoginWithGoogleAction {\r\n  public static readonly type = '[User] Login with google';\r\n  constructor() {}\r\n}\r\n\r\nexport class LogoutAction {\r\n  public static readonly type = '[User] Logout user';\r\n  constructor() {}\r\n}\r\n","import { State, Action, Selector, StateContext, NgxsOnInit } from '@ngxs/store';\r\nimport { SetUserAction, SetKingdomAction, SetKingdomSuppliesAction, SetKingdomBuildingsAction, LoginWithGoogleAction, LogoutAction } from './auth.actions';\r\nimport { auth } from 'firebase/app';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { tap } from 'rxjs/operators';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { calculate } from 'src/app/pipes/turn.pipe';\r\n\r\nexport interface AuthStateModel {\r\n  kingdom: any;\r\n  uid: string | null;\r\n  supplies: any[];\r\n  buildings: any[];\r\n  logged: boolean;\r\n  clock: Date | null;\r\n  popup: string | null;\r\n}\r\n\r\nexport const initial: AuthStateModel = {\r\n  uid: null,\r\n  kingdom: null,\r\n  supplies: [],\r\n  buildings: [],\r\n  logged: false,\r\n  clock: null,\r\n  popup: null,\r\n};\r\n\r\n@State<AuthStateModel>({\r\n  name: 'auth',\r\n  defaults: initial,\r\n})\r\n@Injectable()\r\nexport class AuthState implements NgxsOnInit {\r\n\r\n  @Selector()\r\n  public static getUserUID(state: AuthStateModel): string {\r\n    return state && state.uid;\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomSupplies(state: AuthStateModel): any[] {\r\n    return state && state.supplies;\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomGem(state: AuthStateModel): any {\r\n    return state && state.supplies.find(supply => supply.id === 'gem');\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomTurn(state: AuthStateModel): any {\r\n    const turns = state.supplies.find(supply => supply.id === 'turn');\r\n    if (state && turns) {\r\n      const kingdomTurn = JSON.parse(JSON.stringify(turns));\r\n      kingdomTurn.quantity = calculate(kingdomTurn.timestamp.seconds * 1000, Date.now(), kingdomTurn.resource.max, kingdomTurn.resource.ratio);\r\n      return kingdomTurn;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomLand(state: AuthStateModel): any {\r\n    return state && state.supplies.find(supply => supply.id === 'land');\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomGold(state: AuthStateModel): any {\r\n    return state && state.supplies.find(supply => supply.id === 'gold');\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomMana(state: AuthStateModel): any {\r\n    return state && state.supplies.find(supply => supply.id === 'mana');\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomPopulation(state: AuthStateModel): any {\r\n    return state && state.supplies.find(supply => supply.id === 'population');\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomBuildings(state: AuthStateModel): any[] {\r\n    return state && state.buildings;\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomVillage(state: AuthStateModel): any {\r\n    return state && state.buildings.find(building => building.id === 'village');\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomNode(state: AuthStateModel): any {\r\n    return state && state.buildings.find(building => building.id === 'node');\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomWorkshop(state: AuthStateModel): any {\r\n    return state && state.buildings.find(building => building.id === 'workshop');\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomAcademy(state: AuthStateModel): any {\r\n    return state && state.buildings.find(building => building.id === 'academy');\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomGuild(state: AuthStateModel): string | boolean {\r\n    return state && state.kingdom && JSON.stringify({ guild: state.kingdom.guild, guilded: state.kingdom.guilded.toMillis() });\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomClan(state: AuthStateModel): any {\r\n    return state && state.kingdom && state.kingdom.clan;\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdomTree(state: AuthStateModel): any {\r\n    return state && state.kingdom && state.kingdom.tree;\r\n  }\r\n\r\n  @Selector()\r\n  public static getKingdom(state: AuthStateModel): any {\r\n    return state && state.kingdom;\r\n  }\r\n\r\n  @Selector()\r\n  public static getUserLoggedIn(state: AuthStateModel): boolean {\r\n    return state && state.logged;\r\n  }\r\n\r\n  @Selector()\r\n  public static getAuthState(state: AuthStateModel): AuthStateModel {\r\n    return state;\r\n  }\r\n\r\n  @Selector()\r\n  public static getClock(state: AuthStateModel): Date {\r\n    return state && state.clock;\r\n  }\r\n\r\n  constructor(\r\n    private angularFireAuth: AngularFireAuth,\r\n    private angularFirestore: AngularFirestore,\r\n    private router: Router,\r\n    private notificationService: NotificationService,\r\n  ) { }\r\n\r\n  ngxsOnInit(ctx: StateContext<AuthStateModel>) {\r\n    setInterval(() => {\r\n      ctx.patchState({\r\n        clock: new Date(),\r\n      });\r\n    }, 1000);\r\n    this.angularFireAuth.authState.subscribe((user: any) => {\r\n      if (user) {\r\n        ctx.dispatch(new SetUserAction(user.uid));\r\n        ctx.dispatch(new SetKingdomAction(user.uid));\r\n        ctx.dispatch(new SetKingdomSuppliesAction(user.uid));\r\n        ctx.dispatch(new SetKingdomBuildingsAction(user.uid));\r\n        this.notificationService.success('user.auth.authorized');\r\n        const route = localStorage.getItem('route') || '/kingdom/city';\r\n        // fix to use #fragments\r\n        const tree = this.router.parseUrl(route);\r\n        const fragment = tree.fragment;\r\n        tree.queryParams = {};\r\n        tree.fragment = null;\r\n        this.router.navigate([tree.toString()], { fragment: fragment });\r\n      } else {\r\n        this.router.navigate(['/user/landing']);\r\n      }\r\n    });\r\n  }\r\n\r\n  @Action(LoginWithGoogleAction)\r\n  async loginWithGoogle(ctx: StateContext<AuthStateModel>) {\r\n    await this.angularFireAuth.signInWithPopup(new auth.GoogleAuthProvider());\r\n  }\r\n\r\n  @Action(LogoutAction)\r\n  async logout(ctx: StateContext<AuthStateModel>) {\r\n    await this.angularFireAuth.signOut();\r\n    const state = ctx.getState();\r\n    ctx.setState({\r\n      ...state,\r\n      uid: null,\r\n      kingdom: null,\r\n      supplies: [],\r\n      buildings: [],\r\n      logged: false,\r\n      clock: null,\r\n    });\r\n  }\r\n\r\n  @Action(SetUserAction)\r\n  setUser(ctx: StateContext<AuthStateModel>, payload: SetUserAction) {\r\n    const state = ctx.getState();\r\n    ctx.setState({\r\n      ...state,\r\n      uid: payload.uid,\r\n      logged: true,\r\n    });\r\n  }\r\n\r\n  @Action(SetKingdomAction)\r\n  setKingdom(ctx: StateContext<AuthStateModel>, payload: SetKingdomAction) {\r\n    return this.angularFirestore.doc<any>(`kingdoms/${payload.uid}`).valueChanges().pipe(\r\n      tap((kingdom: any) => {\r\n        const state = ctx.getState();\r\n        ctx.setState({\r\n          ...state,\r\n          kingdom: kingdom,\r\n        });\r\n      }),\r\n    );\r\n  }\r\n\r\n  @Action(SetKingdomSuppliesAction)\r\n  setKingdomSupplies(ctx: StateContext<AuthStateModel>, payload: SetKingdomSuppliesAction) {\r\n    return this.angularFirestore.collection<any>(`kingdoms/${payload.uid}/supplies`).valueChanges({ idField: 'fid' }).pipe(\r\n      tap((supplies: any[]) => {\r\n        const state = ctx.getState();\r\n        ctx.setState({\r\n          ...state,\r\n          supplies: supplies.sort((a, b) => a.resource.sort - b.resource.sort),\r\n        });\r\n      }),\r\n    );\r\n  }\r\n\r\n  @Action(SetKingdomBuildingsAction)\r\n  setKingdomBuildings(ctx: StateContext<AuthStateModel>, payload: SetKingdomBuildingsAction) {\r\n    return this.angularFirestore.collection<any>(`kingdoms/${payload.uid}/buildings`).valueChanges({ idField: 'fid' }).pipe(\r\n      tap((buildings: any[]) => {\r\n        const state = ctx.getState();\r\n        ctx.setState({\r\n          ...state,\r\n          buildings: buildings,\r\n        });\r\n      }),\r\n    );\r\n  }\r\n\r\n}\r\n","import { MatPaginatorIntl } from '@angular/material/paginator';\r\nimport { TranslateParser, TranslateService } from '@ngx-translate/core';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class PaginatorIntl extends MatPaginatorIntl {\r\n\r\n  private rangeLabelIntl: string;\r\n\r\n  constructor(\r\n    private translateService: TranslateService,\r\n    private translateParser: TranslateParser,\r\n  ) {\r\n    super();\r\n    this.translateService.onLangChange.subscribe((e: Event) => this.getTranslations());\r\n    this.getTranslations();\r\n  }\r\n\r\n  getTranslations() {\r\n    this.translateService.get([\r\n      'paginator.itemsPerPageLabel',\r\n      'paginator.nextPageLabel',\r\n      'paginator.previousPageLabel',\r\n      'paginator.firstPageLabel',\r\n      'paginator.lastPageLabel',\r\n      'paginator.rangeLabelIntl',\r\n    ]).subscribe((translation: any) => {\r\n      this.itemsPerPageLabel = translation['paginator.itemsPerPageLabel'];\r\n      this.nextPageLabel = translation['paginator.nextPageLabel'];\r\n      this.previousPageLabel = translation['paginator.previousPageLabel'];\r\n      this.firstPageLabel = translation['paginator.firstPageLabel'];\r\n      this.lastPageLabel = translation['paginator.lastPageLabel'];\r\n      this.rangeLabelIntl = translation['paginator.rangeLabelIntl'];\r\n      this.changes.next();\r\n    });\r\n  }\r\n\r\n  getRangeLabel = (page: number, pageSize: number, length: number) => {\r\n    const total = Math.max(length, 0);\r\n    const start = page * pageSize;\r\n    const end = start < length\r\n      ? Math.min(start + pageSize, length)\r\n      : start + pageSize;\r\n    return this.translateParser.interpolate(this.rangeLabelIntl, { start: start, end: end, length: total });\r\n  }\r\n\r\n}\r\n","// angular\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { LayoutModule } from '@angular/cdk/layout';\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { TranslateLoader, TranslateModule } from '@ngx-translate/core';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { HttpClient, HttpClientModule } from '@angular/common/http';\r\n// material\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatChipsModule } from '@angular/material/chips';\r\nimport { MatTableModule } from '@angular/material/table';\r\nimport { MatPaginatorModule } from '@angular/material/paginator';\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatNativeDateModule } from '@angular/material/core';\r\nimport { MatBottomSheetModule } from '@angular/material/bottom-sheet';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\n// plugins\r\nimport { TourMatMenuModule } from 'ngx-ui-tour-md-menu';\r\nimport { NgxCurrencyModule, CurrencyMaskInputMode } from 'ngx-currency';\r\n// components\r\nimport { ShellComponent } from './shell/shell.component';\r\n// pipes\r\nimport { ShortPipe } from '../pipes/short.pipe';\r\nimport { IconPipe } from '../pipes/icon.pipe';\r\nimport { LongPipe } from '../pipes/long.pipe';\r\nimport { LegendaryPipe } from '../pipes/legendary.pipe';\r\nimport { TurnPipe } from '../pipes/turn.pipe';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { StatusComponent } from './shell/status.component';\r\nimport { TourComponent } from './tour/tour.component';\r\n\r\n// AOT compilation support\r\nexport function httpTranslateLoader(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}\r\n\r\nconst components = [\r\n  ShellComponent,\r\n  ShortPipe,\r\n  IconPipe,\r\n  LongPipe,\r\n  LegendaryPipe,\r\n  TurnPipe,\r\n  TourComponent,\r\n];\r\nconst modules = [\r\n  CommonModule,\r\n  RouterModule,\r\n  MatToolbarModule,\r\n  MatIconModule,\r\n  LayoutModule,\r\n  MatButtonModule,\r\n  MatSidenavModule,\r\n  MatListModule,\r\n  MatMenuModule,\r\n  MatIconModule,\r\n  MatCardModule,\r\n  MatFormFieldModule,\r\n  MatInputModule,\r\n  MatSnackBarModule,\r\n  FlexLayoutModule,\r\n  MatChipsModule,\r\n  MatTableModule,\r\n  MatPaginatorModule,\r\n  MatSortModule,\r\n  HttpClientModule,\r\n  MatSelectModule,\r\n  MatTabsModule,\r\n  MatBadgeModule,\r\n  DragDropModule,\r\n  MatProgressBarModule,\r\n  MatDialogModule,\r\n  FormsModule,\r\n  MatCheckboxModule,\r\n  MatFormFieldModule,\r\n  ReactiveFormsModule,\r\n  MatDatepickerModule,\r\n  MatNativeDateModule,\r\n  MatProgressSpinnerModule,\r\n  MatBottomSheetModule,\r\n  MatExpansionModule,\r\n  MatTooltipModule,\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ...components,\r\n    StatusComponent,\r\n  ],\r\n  imports: [\r\n    ...modules,\r\n    TranslateModule.forChild({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: httpTranslateLoader,\r\n        deps: [HttpClient],\r\n      },\r\n      isolate: false,\r\n    }),\r\n    TourMatMenuModule,\r\n    NgxCurrencyModule.forRoot({\r\n      align: 'right',\r\n      allowNegative: false,\r\n      allowZero: true,\r\n      decimal: ',',\r\n      precision: 0,\r\n      prefix: '',\r\n      suffix: '',\r\n      thousands: '.',\r\n      nullable: true,\r\n      min: null,\r\n      max: null,\r\n      inputMode: CurrencyMaskInputMode.FINANCIAL,\r\n    }),\r\n    ScrollingModule,\r\n  ],\r\n  exports: [\r\n    ...components,\r\n    ...modules,\r\n    TranslateModule,\r\n  ],\r\n})\r\nexport class SharedModule { }\r\n","<mat-sidenav-container class=\"app-shell sidenav-container\" autosize [hasBackdrop]=\"(isHandset$ | async)\">\r\n  <!-- sidenav -->\r\n  <mat-sidenav\r\n    #drawer\r\n    class=\"sidenav\"\r\n    fixedInViewport\r\n    [attr.role]=\"(isHandset$ | async) ? 'dialog' : 'navigation'\"\r\n    [mode]=\"(isHandset$ | async) ? 'over' : 'side'\"\r\n    [opened]=\"(angularFireAuth.authState | async)\">\r\n    <mat-toolbar>\r\n      <!-- toggler -->\r\n      <button type=\"button\" aria-label=\"toggle\" mat-icon-button (click)=\"toggle()\">\r\n        <mat-icon aria-label=\"menu\">menu</mat-icon>\r\n      </button>\r\n      <!-- title -->\r\n      <span class=\"fill-space\"></span>\r\n      <span class=\"logo\">{{ ((link$ | async)?.name || 'landing.title.name') | translate }}</span>\r\n      <span class=\"fill-space\"></span>\r\n      <!-- language -->\r\n      <button mat-icon-button [matMenuTriggerFor]=\"language\">\r\n        <img [src]=\"getLang()?.image\" [alt]=\"getLang()?.lang\">\r\n      </button>\r\n      <mat-menu #language=\"matMenu\">\r\n        <a mat-menu-item *ngFor=\"let l of langs\" [ngClass]=\"{ 'active': translateService.currentLang === l.lang }\" (click)=\"translateService.use(l.lang)\" class=\"flag-menu\">\r\n          <img [src]=\"l.image\" [alt]=\"l.lang\">\r\n          <span>{{ l.lang.toString().toUpperCase() }}</span>\r\n        </a>\r\n      </mat-menu>\r\n    </mat-toolbar>\r\n    <!-- scroll container -->\r\n    <div class=\"scroll-container\" [ngStyle]=\"{ height: (isHandset$ | async) === false ? 'calc(100% - 64px)' : 'calc(100% - 56px)' }\">\r\n      <!-- links -->\r\n      <mat-nav-list dense class=\"router-list\">\r\n        <ng-container *ngFor=\"let group of groups\">\r\n          <div matSubheader>\r\n            <img [src]=\"group.image\" [alt]=\"group.name | translate\">\r\n            <span>{{ group.name | translate }}</span>\r\n          </div>\r\n          <ng-container *ngFor=\"let link of group.links\">\r\n            <a mat-list-item\r\n              [disabled]=\"(angularFireAuth.authState | async) === (false || null || undefined)\"\r\n              (click)=\"close()\"\r\n              [routerLink]=\"link.url ? link.url : null\"\r\n              [routerLinkActive]=\"link.url ? ['active'] : []\"\r\n              [routerLinkActiveOptions]=\"{ exact: true }\">\r\n              <div mat-list-avatar [matBadge]=\"link.name === 'kingdom.archive.name' && reports ? reports : undefined\">\r\n                <img mat-list-avatar [src]=\"link.image\" [alt]=\"link.name | translate\">\r\n              </div>\r\n              <div mat-line>{{ link.name | translate }}</div>\r\n              <div mat-line class=\"mat-card-subtitle\">{{ link.description | translate }}</div>\r\n            </a>\r\n          </ng-container>\r\n        </ng-container>\r\n      </mat-nav-list>\r\n    </div>\r\n  </mat-sidenav>\r\n  <!-- sidenav content -->\r\n  <mat-sidenav-content>\r\n    <mat-toolbar class=\"mat-elevation-z8\">\r\n      <!-- toggler -->\r\n      <button type=\"button\" aria-label=\"toggle\" mat-icon-button (click)=\"toggle()\">\r\n        <mat-icon aria-label=\"menu\">{{ drawer.opened ? 'first_page' : 'last_page' }}</mat-icon>\r\n      </button>\r\n      <span class=\"fill-space\"></span>\r\n      <!-- title -->\r\n      <span class=\"logo\" *ngIf=\"!(angularFireAuth.authState | async)\">{{ 'landing.title.name' | translate }}</span>\r\n      <!-- supply list -->\r\n      <mat-nav-list dense class=\"supply-list\" role=\"navigation\" *ngIf=\"(angularFireAuth.authState | async)\" tourAnchor=\"tour.supplies\">\r\n        <mat-list-item *ngFor=\"let supply of kingdomSupplies$ | async; let i = index\" (click)=\"openStatusSheet()\">\r\n          <div mat-list-avatar\r\n            [matTooltip]=\"supply.resource.name | translate\"\r\n            matTooltipPosition=\"below\"\r\n            [matBadge]=\"supply.timestamp ? (supply.timestamp | turn:supply.resource.max:supply.resource.ratio | async) : (supply.quantity | short)\"\r\n            [matBadgeColor]=\"supply.balance === 0 ? 'primary' : supply.balance > 0 ? 'accent' : 'warn'\"\r\n            [matBadgePosition]=\"i % 2 === 0 ? 'below before' : 'above before'\"\r\n            matBadgeOverlap=\"true\">\r\n            <img mat-list-avatar [src]=\"supply.resource.image\" [alt]=\"supply.resource.name | translate\">\r\n          </div>\r\n        </mat-list-item>\r\n      </mat-nav-list>\r\n      <!-- auth -->\r\n      <span class=\"fill-space\"></span>\r\n      <button mat-icon-button [matMenuTriggerFor]=\"auth\">\r\n        <mat-icon>account_circle</mat-icon>\r\n      </button>\r\n      <mat-menu #auth=\"matMenu\">\r\n        <ng-container *ngIf=\"(angularFireAuth.authState | async); else notLogged\">\r\n          <a mat-menu-item routerLink=\"/user/encyclopedia\" fragment=\"help\"><mat-icon>help</mat-icon>{{ 'user.menu.help' | translate }}</a>\r\n          <a mat-menu-item (click)=\"tour()\"><mat-icon>map</mat-icon>{{ 'user.menu.tour' | translate }}</a>\r\n          <a mat-menu-item routerLink=\"/kingdom/emporium\"><mat-icon>local_mall</mat-icon>{{ 'user.menu.store' | translate }}</a>\r\n          <a mat-menu-item routerLink=\"/user/encyclopedia\" fragment=\"changelog\"><mat-icon>description</mat-icon>{{ 'user.menu.changelog' | translate }}</a>\r\n          <a mat-menu-item routerLink=\"/user/encyclopedia\" fragment=\"bonfire\"><mat-icon>question_answer</mat-icon>{{ 'user.menu.bonfire' | translate }}</a>\r\n          <a mat-menu-item routerLink=\"/user/landing\" fragment=\"legend\"><mat-icon>equalizer</mat-icon>{{ 'user.menu.legend' | translate }}</a>\r\n          <a mat-menu-item (click)=\"logout()\"><mat-icon>lock</mat-icon>{{ 'user.menu.logout' | translate }}</a>\r\n        </ng-container>\r\n        <ng-template #notLogged>\r\n          <a mat-menu-item (click)=\"login(main)\"><mat-icon>lock_open</mat-icon>{{ 'user.menu.login' | translate }}</a>\r\n        </ng-template>\r\n      </mat-menu>\r\n    </mat-toolbar>\r\n    <!-- main content -->\r\n    <main\r\n      #main\r\n      class=\"main-content\"\r\n      id=\"scroll\"\r\n      cdkScrollable\r\n      [ngStyle]=\"{ height: (isHandset$ | async) === false ? 'calc(100vh - 64px)' : 'calc(100vh - 56px)', width: (isHandset$ | async) === false && drawer.opened ? 'calc(100vw - 300px)' : '100vw' }\">\r\n      <ng-content></ng-content>\r\n    </main>\r\n  </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n","import { Component, ViewChild, OnInit } from '@angular/core';\r\nimport { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\r\nimport { Observable } from 'rxjs';\r\nimport { map, shareReplay, filter } from 'rxjs/operators';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { Router, NavigationEnd, RouterEvent } from '@angular/router';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { MapboxService } from 'src/app/services/mapbox.service';\r\nimport { Store, Select } from '@ngxs/store';\r\nimport { LogoutAction } from '../auth/auth.actions';\r\nimport { DomService } from 'src/app/services/dom.service';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AuthState } from '../auth/auth.state';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { MatBottomSheet } from '@angular/material/bottom-sheet';\r\nimport { StatusComponent } from './status.component';\r\nimport { TutorialService } from 'src/app/services/tutorial.service';\r\n\r\n@Component({\r\n  selector: 'app-shell',\r\n  templateUrl: './shell.component.html',\r\n  styleUrls: ['./shell.component.scss'],\r\n})\r\nexport class ShellComponent implements OnInit {\r\n\r\n  langs: any[] = [\r\n    { lang: 'es', image: '/assets/images/languages/es.png' },\r\n    { lang: 'en', image: '/assets/images/languages/en.png' },\r\n    { lang: 'fr', image: '/assets/images/languages/fr.png' },\r\n  ];\r\n  groups: any[] = [\r\n    { name: 'shell.group.merchant', image: '/assets/images/cards/merchant.png', links: [\r\n        { url: '/kingdom/city', name: 'kingdom.city.name', description: 'kingdom.city.description', image: '/assets/images/cards/city.png' },\r\n        { url: '/kingdom/auction', name: 'kingdom.auction.name', description: 'kingdom.auction.description', image: '/assets/images/cards/auction.png' },\r\n        { url: '/kingdom/emporium', name: 'kingdom.emporium.name', description: 'kingdom.emporium.description', image: '/assets/images/cards/emporium.png' },\r\n      ],\r\n    },\r\n    { name: 'shell.group.militia', image: '/assets/images/cards/militia.png', links: [\r\n        { url: '/world/map', name: 'world.map.name', description: 'world.map.description', image: '/assets/images/cards/map.png' },\r\n        { url: '/kingdom/army', name: 'kingdom.army.name', description: 'kingdom.army.description', image: '/assets/images/cards/army.png' },\r\n        { url: '/kingdom/tavern', name: 'kingdom.tavern.name', description: 'kingdom.tavern.description', image: '/assets/images/cards/tavern.png' },\r\n      ],\r\n    },\r\n    { name: 'shell.group.spy', image: '/assets/images/cards/spy.png', links: [\r\n        { url: '/kingdom/census', name: 'kingdom.census.name', description: 'kingdom.census.description', image: '/assets/images/cards/census.png' },\r\n        { url: '/kingdom/archive', name: 'kingdom.archive.name', description: 'kingdom.archive.description', image: '/assets/images/cards/archive.png' },\r\n        { url: '/kingdom/clan', name: 'kingdom.clan.name', description: 'kingdom.clan.description', image: '/assets/images/cards/clan.png' },\r\n      ],\r\n    },\r\n    { name: 'shell.group.scholar', image: '/assets/images/cards/scholar.png', links: [\r\n        { url: '/kingdom/sorcery', name: 'kingdom.sorcery.name', description: 'kingdom.sorcery.description', image: '/assets/images/cards/sorcery.png' },\r\n        { url: '/kingdom/temple', name: 'kingdom.temple.name', description: 'kingdom.temple.description', image: '/assets/images/cards/temple.png' },\r\n        { url: '/user/encyclopedia', name: 'user.encyclopedia.name', description: 'user.encyclopedia.description', image: '/assets/images/cards/encyclopedia.png' },\r\n      ],\r\n    },\r\n  ];\r\n  @Select((state: any) => state.auth.supplies) kingdomSupplies$: Observable<any[]>;\r\n  link$: Observable<any> = this.router.events\r\n  .pipe(\r\n    filter((event: RouterEvent): event is NavigationEnd => event instanceof NavigationEnd),\r\n    map((event: NavigationEnd) => {\r\n      return this.groups.reduce((a, b) => a.concat(b.links), []).find((link: any) => event.url.includes(link.url));\r\n    }),\r\n  );\r\n  isHandset$: Observable<boolean> = this.breakpointObserver.observe([Breakpoints.Handset])\r\n  .pipe(\r\n    map((result: any) => result.matches),\r\n    shareReplay(),\r\n  );\r\n  public reports: number = 0;\r\n  @ViewChild(MatSidenav, {static: true}) drawer: MatSidenav;\r\n\r\n  constructor(\r\n    private breakpointObserver: BreakpointObserver,\r\n    public translateService: TranslateService,\r\n    public angularFireAuth: AngularFireAuth,\r\n    private router: Router,\r\n    private mapboxService: MapboxService,\r\n    private store: Store,\r\n    private tutorialService: TutorialService,\r\n    private domService: DomService,\r\n    private angularFirestore: AngularFirestore,\r\n    private notificationService: NotificationService,\r\n    private bottomSheet: MatBottomSheet,\r\n  ) {\r\n    // i18n\r\n    this.translateService.addLangs(this.langs.map(l => l.lang));\r\n    const browser = this.translateService.getBrowserLang();\r\n    this.translateService.use(this.langs.map(l => l.lang).includes(browser) ? browser : this.langs[0].lang);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.store.select(AuthState.getUserUID).subscribe(uid => {\r\n      if (uid) {\r\n        this.angularFirestore.collection<any>(`kingdoms/${uid}/letters`, x => x.where('read', '==', false)).valueChanges().subscribe(reports => {\r\n          const oldReports = this.reports;\r\n          this.reports = reports.length;\r\n          if (this.reports > oldReports) this.notificationService.warning('kingdom.archive.new');\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  async toggle() {\r\n    await this.drawer.toggle();\r\n    this.mapboxService.resizeMap();\r\n  }\r\n\r\n  close() {\r\n    this.isHandset$.subscribe(async isHandset => {\r\n      if (isHandset) {\r\n        await this.drawer.close();\r\n      }\r\n    });\r\n  }\r\n\r\n  getLang(): any {\r\n    return this.langs.find(l => l.lang === this.translateService.currentLang);\r\n  }\r\n\r\n  tour() {\r\n    this.tutorialService.start();\r\n  }\r\n\r\n  login($element: any) {\r\n    this.domService.scrollToTop($element);\r\n    this.router.navigate(['/user/landing']);\r\n  }\r\n\r\n  logout() {\r\n    this.store.dispatch(new LogoutAction());\r\n  }\r\n\r\n  openStatusSheet() {\r\n    const sheetRef = this.bottomSheet.open(StatusComponent, {\r\n      data: this.kingdomSupplies$,\r\n    });\r\n  }\r\n\r\n}\r\n","import { Component, Inject } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { MAT_BOTTOM_SHEET_DATA } from '@angular/material/bottom-sheet';\r\n\r\n@Component({\r\n  selector: 'app-status',\r\n  template: `\r\n    <div matSubheader>{{ 'card.list.resources' | translate }}:<span class=\"fill-space\"></span>{{ 'card.list.production' | translate }}:</div>\r\n    <mat-list dense class=\"app-status\">\r\n      <ng-container *ngFor=\"let supply of kingdomSupplies$ | async; let i = index\">\r\n        <mat-list-item>\r\n          <div mat-list-avatar\r\n            [matBadge]=\"supply.max ? (supply.timestamp ? (supply.timestamp | turn:supply.resource.max:supply.resource.ratio | async) : (supply.quantity | short)) + ' / ' + (supply.max | short) : supply.quantity | short\"\r\n            matBadgePosition=\"above before\">\r\n            <img mat-list-avatar [src]=\"supply.resource.image\">\r\n          </div>\r\n          <div mat-line>{{ supply.resource.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\">{{ supply.resource.description | translate }}</div>\r\n          <div mat-line *ngIf=\"supply.max\">\r\n            <mat-progress-bar [value]=\"(supply.timestamp ? (supply.timestamp | turn:supply.resource.max:supply.resource.ratio | async) : supply.quantity) * 100 / supply.max\"></mat-progress-bar>\r\n          </div>\r\n          <div mat-list-avatar\r\n            [matBadge]=\"(supply.balance | short) + ('resource.turn.ratio' | translate)\"\r\n            [matBadgeColor]=\"supply.balance === 0 ? 'primary' : supply.balance > 0 ? 'accent' : 'warn'\"\r\n            matBadgePosition=\"above after\">\r\n            <img mat-list-avatar [src]=\"supply.status\">\r\n          </div>\r\n        </mat-list-item>\r\n      </ng-container>\r\n    </mat-list>\r\n  `,\r\n  styles: [`\r\n    .app-status.mat-list.mat-list-base {\r\n      max-height: 100%;\r\n    }\r\n  `],\r\n})\r\nexport class StatusComponent {\r\n\r\n  constructor(\r\n    @Inject(MAT_BOTTOM_SHEET_DATA) public kingdomSupplies$: Observable<any[]>,\r\n  ) { }\r\n\r\n}\r\n","<tour-step-template>\r\n  <ng-template let-step=\"step\">\r\n    <mat-card (click)=\"$event.stopPropagation()\">\r\n      <mat-card-title>{{ step?.title | translate }}</mat-card-title>\r\n      <mat-card-content [innerHtml]=\"step?.content | translate | icon\"></mat-card-content>\r\n      <mat-card-actions>\r\n        <button mat-icon-button [disabled]=\"!tourService.hasPrev(step)\" (click)=\"tourService.prev()\"><mat-icon>chevron_left</mat-icon></button>\r\n        <button mat-icon-button [disabled]=\"!tourService.hasNext(step)\" (click)=\"tourService.next()\"><mat-icon>chevron_right</mat-icon></button>\r\n        <button mat-icon-button (click)=\"tourService.end()\"><mat-icon>close</mat-icon></button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  </ng-template>\r\n</tour-step-template>\r\n","import { Component, ViewEncapsulation } from '@angular/core';\r\nimport { TourService } from 'ngx-ui-tour-md-menu';\r\n\r\n@Component({\r\n  selector: 'app-tour',\r\n  templateUrl: './tour.component.html',\r\n  styleUrls: ['./tour.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class TourComponent {\r\n\r\n  constructor(\r\n    public tourService: TourService,\r\n  ) { }\r\n\r\n}\r\n","export enum MarkerType {\r\n  KINGDOM = 'kingdom',\r\n  SHOP = 'shop',\r\n  QUEST = 'quest',\r\n}\r\n\r\nexport enum PopupType {\r\n  KINGDOM = 'kingdom',\r\n  SHOP = 'shop',\r\n  QUEST = 'quest',\r\n}\r\n\r\nexport enum StoreType {\r\n  INN = 'inn',\r\n  MERCENARY = 'mercenary',\r\n  SORCERER = 'sorcerer',\r\n  MERCHANT = 'merchant',\r\n}\r\n\r\nexport enum LocationType {\r\n  CAVE = 'cave',\r\n  GRAVEYARD = 'graveyard',\r\n  DUNGEON = 'dungeon',\r\n  MINE = 'mine',\r\n  FOREST = 'forest',\r\n  CATHEDRAL = 'cathedral',\r\n  MOUNTAIN = 'mountain',\r\n  VOLCANO = 'volcano',\r\n  LAKE = 'lake',\r\n  NEST = 'nest',\r\n  CASTLE = 'castle',\r\n  BARRACK = 'barrack',\r\n  ISLAND = 'island',\r\n  MONOLITH = 'monolith',\r\n  RUIN = 'ruin',\r\n  SHIP = 'ship',\r\n  TOWN = 'town',\r\n  SHRINE = 'shrine',\r\n  TOTEM = 'totem',\r\n  PYRAMID = 'pyramid',\r\n}\r\n\r\nexport enum FactionType {\r\n  RED = 'red',\r\n  WHITE = 'white',\r\n  GREEN = 'green',\r\n  BLUE = 'blue',\r\n  BLACK = 'black',\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router, NavigationEnd } from '@angular/router';\r\nimport { NotificationService } from '../services/notification.service';\r\nimport { Store } from '@ngxs/store';\r\nimport { AuthState } from '../shared/auth/auth.state';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nconst LANDING_ROUTE: string = '/user/landing';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n\r\n  constructor(\r\n    private notificationService: NotificationService,\r\n    private store: Store,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\r\n    const logged = this.store.selectSnapshot(AuthState.getUserLoggedIn);\r\n    if (!logged) {\r\n      this.notificationService.error('user.auth.unauthorized');\r\n      this.router.navigate([LANDING_ROUTE]);\r\n    }\r\n    return logged;\r\n  }\r\n\r\n}\r\n","<div class=\"map-marker\">\r\n\r\n  <!-- kingdom -->\r\n  <button *ngIf=\"data.type === MarkerType.KINGDOM\" mat-fab color=\"primary\" class=\"marker animated bounceIn\">\r\n    <img [src]=\"data.faction.marker\" [alt]=\"data.name\">\r\n  </button>\r\n\r\n  <!-- shop -->\r\n  <button *ngIf=\"data.type === MarkerType.SHOP\" mat-mini-fab color=\"accent\" class=\"marker animated bounceIn\">\r\n    <img [src]=\"data.store.image\" [alt]=\"data.store.name | translate\">\r\n  </button>\r\n\r\n  <!-- quest -->\r\n  <button *ngIf=\"data.type === MarkerType.QUEST\" mat-mini-fab color=\"warn\" class=\"marker animated bounceIn\">\r\n    <img [src]=\"data.location.image\" [alt]=\"data.location.name | translate\">\r\n  </button>\r\n\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { MarkerType } from 'src/app/shared/type/common.type';\r\n\r\n@Component({\r\n  selector: 'app-marker',\r\n  templateUrl: './marker.component.html',\r\n  styleUrls: ['./marker.component.scss'],\r\n})\r\nexport class MarkerComponent {\r\n\r\n  data: any = null;\r\n  MarkerType: typeof MarkerType = MarkerType;\r\n\r\n}\r\n","import { Component, OnInit, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { Store } from '@ngxs/store';\r\nimport { AuthState } from 'src/app/shared/auth/auth.state';\r\nimport { LoadingService } from 'src/app/services/loading.service';\r\n\r\n@Component({\r\n  selector: 'app-adventure',\r\n  template: `\r\n    <h1 mat-dialog-title>{{ 'world.adventure.name' | translate }}</h1>\r\n    <div mat-dialog-content>\r\n      <p>{{ 'world.adventure.description' | translate }}</p>\r\n      <div matSubheader>{{ 'card.list.rewards' | translate }}:</div>\r\n      <mat-list dense>\r\n        <mat-list-item [ngClass]=\"[data.reward.item.faction.id, data.reward.item.legendary ? 'legendary' : 'common']\">\r\n          <div mat-list-avatar [matBadge]=\"data.reward.quantity | long\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar [src]=\"data.reward.item.image\">\r\n          </div>\r\n          <div mat-line>{{ data.reward.item.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\" [innerHTML]=\"data.reward.item.description | translate | icon:data.reward.item\"></div>\r\n          <div mat-list-avatar [matBadge]=\"data.quest.turns | long\" matBadgePosition=\"above after\">\r\n            <img mat-list-avatar src=\"/assets/images/resources/turn.png\">\r\n          </div>\r\n        </mat-list-item>\r\n      </mat-list>\r\n    </div>\r\n    <div mat-dialog-actions>\r\n      <button mat-button (click)=\"close()\">{{ 'world.adventure.cancel' | translate }}</button>\r\n      <button mat-raised-button color=\"primary\" (click)=\"adventure()\" cdkFocusInitial>{{ 'world.adventure.start' | translate }}</button>\r\n    </div>\r\n  `,\r\n  styles: [\r\n  ],\r\n})\r\nexport class AdventureComponent implements OnInit {\r\n\r\n  kingdomTurn: any = this.store.selectSnapshot(AuthState.getKingdomTurn);\r\n  uid: string = this.store.selectSnapshot(AuthState.getUserUID);\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: {\r\n      reward: any,\r\n      quest: any,\r\n    },\r\n    private dialogRef: MatDialogRef<AdventureComponent>,\r\n    private notificationService: NotificationService,\r\n    private apiService: ApiService,\r\n    private store: Store,\r\n    private loadingService: LoadingService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  async adventure() {\r\n    if (this.data.quest.turns <= this.kingdomTurn.quantity) {\r\n      this.loadingService.startLoading();\r\n      try {\r\n        const dealt = await this.apiService.adventureQuest(this.uid, this.data.quest.id);\r\n        this.notificationService.success('world.adventure.success');\r\n        this.close();\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.notificationService.error('world.adventure.error');\r\n      }\r\n      this.loadingService.stopLoading();\r\n    } else {\r\n      this.notificationService.error('world.adventure.error');\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { Store } from '@ngxs/store';\r\nimport { AuthState } from 'src/app/shared/auth/auth.state';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { LoadingService } from 'src/app/services/loading.service';\r\n\r\n@Component({\r\n  selector: 'app-deal',\r\n  template: `\r\n    <h1 mat-dialog-title>{{ 'world.deal.name' | translate }}</h1>\r\n    <div mat-dialog-content>\r\n      <p>{{ 'world.deal.description' | translate }}</p>\r\n      <div matSubheader>{{ 'card.list.goods' | translate }}:</div>\r\n      <mat-list dense>\r\n        <mat-list-item [ngClass]=\"[data.deal.join.faction.id, data.deal.join.legendary ? 'legendary' : 'common']\">\r\n          <div mat-list-avatar [matBadge]=\"data.deal.quantity | long\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar [src]=\"data.deal.join.image\">\r\n          </div>\r\n          <div mat-line>{{ data.deal.join.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\" *ngIf=\"['god', 'family', 'skill', 'resource', 'category'].includes(data.deal.join.type)\">{{ data.deal.join.description | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\" *ngIf=\"['spell', 'structure', 'location', 'hero', 'item'].includes(data.deal.join.type)\" [innerHTML]=\"data.deal.join.description | translate | icon:data.deal.join\"></div>\r\n          <div mat-line class=\"mat-card-subtitle\" *ngIf=\"['unit'].includes(data.deal.join.type)\">\r\n            <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of data.deal.join.families\" [src]=\"family.image\">\r\n            <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of data.deal.join.skills\" [src]=\"skill.image\">\r\n            <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of data.deal.join.categories\" [src]=\"category.image\">\r\n            <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"data.deal.join.legendary\" src=\"/assets/images/icons/legendary.png\">\r\n          </div>\r\n          <div mat-line class=\"mat-card-subtitle\" *ngIf=\"['unit'].includes(data.deal.join.type) && data.deal.join.categories && data.deal.join.categories.length\">\r\n            <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of data.deal.join.resistances\" [src]=\"category.image\">\r\n          </div>\r\n          <div mat-list-avatar [matBadge]=\"data.deal.gold | long\" matBadgePosition=\"above after\">\r\n            <img mat-list-avatar src=\"/assets/images/resources/gold.png\">\r\n          </div>\r\n        </mat-list-item>\r\n      </mat-list>\r\n    </div>\r\n    <div mat-dialog-actions>\r\n      <button mat-button (click)=\"close()\">{{ 'world.deal.cancel' | translate }}</button>\r\n      <button mat-raised-button color=\"primary\" (click)=\"deal()\" cdkFocusInitial>{{ 'world.deal.trade' | translate }}</button>\r\n    </div>\r\n  `,\r\n  styles: [\r\n  ],\r\n})\r\nexport class DealComponent implements OnInit {\r\n\r\n  kingdomGold: any = this.store.selectSnapshot(AuthState.getKingdomGold);\r\n  uid: string = this.store.selectSnapshot(AuthState.getUserUID);\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: {\r\n      deal: any,\r\n      shop: any,\r\n    },\r\n    private dialogRef: MatDialogRef<DealComponent>,\r\n    private notificationService: NotificationService,\r\n    private store: Store,\r\n    private apiService: ApiService,\r\n    private loadingService: LoadingService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  async deal(): Promise<void> {\r\n    if (this.data.deal.gold <= this.kingdomGold.quantity) {\r\n      this.loadingService.startLoading();\r\n      try {\r\n        const collection = this.data.shop.store.id === 'mercenary'\r\n          ? 'troops'\r\n          : this.data.shop.store.id === 'inn'\r\n            ? 'contracts'\r\n            : this.data.shop.store.id === 'merchant'\r\n              ? 'artifacts'\r\n              : 'charms';\r\n        const dealt = await this.apiService.tradeDeal(this.uid, this.data.shop.id, collection, this.data.deal.fid);\r\n        this.notificationService.success('world.deal.success');\r\n        this.close();\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.notificationService.error('world.deal.error');\r\n      }\r\n      this.loadingService.stopLoading();\r\n    } else {\r\n      this.notificationService.error('world.deal.error');\r\n    }\r\n  }\r\n\r\n}\r\n","<mat-card class=\"map-popup animated bounceIn mat-elevation-z4\">\r\n\r\n  <!-- kingdom -->\r\n  <mat-card-header *ngIf=\"data.type === PopupType.KINGDOM\">\r\n    <img mat-card-avatar [src]=\"data.faction.marker\" [alt]=\"data.faction.name | translate\">\r\n    <mat-card-title>{{ data.name }}</mat-card-title>\r\n    <mat-card-subtitle>{{ data.faction.name | translate }}</mat-card-subtitle>\r\n  </mat-card-header>\r\n\r\n  <!-- shop -->\r\n  <mat-card-header *ngIf=\"data.type === PopupType.SHOP\">\r\n    <img mat-card-avatar [src]=\"data.store.image\" [alt]=\"data.store.name | translate\">\r\n    <mat-card-title>{{ data.store.name | translate }}</mat-card-title>\r\n    <mat-card-subtitle>{{ data.name }}</mat-card-subtitle>\r\n    <mat-chip-list>\r\n      <mat-chip color=\"primary\" class=\"clock\" selected><mat-icon>update</mat-icon>{{ data.visited.toMillis() | date:('dateformat.short' | translate) }}</mat-chip>\r\n    </mat-chip-list>\r\n  </mat-card-header>\r\n\r\n  <!-- quest -->\r\n  <mat-card-header *ngIf=\"data.type === PopupType.QUEST\">\r\n    <img mat-card-avatar [src]=\"data.location.image\" [alt]=\"data.location.name | translate\">\r\n    <mat-card-title>{{ data.location.name | translate }}</mat-card-title>\r\n    <mat-card-subtitle>{{ data.name }}</mat-card-subtitle>\r\n    <mat-chip-list>\r\n      <mat-chip color=\"primary\" class=\"clock\" selected><mat-icon>update</mat-icon>{{ data.visited.toMillis() | date:('dateformat.short' | translate) }}</mat-chip>\r\n    </mat-chip-list>\r\n  </mat-card-header>\r\n\r\n  <mat-card-content>\r\n    <!-- kingdom troops -->\r\n    <ng-template [ngIf]=\"kingdomTroops.length\">\r\n      <div matSubheader>{{ 'card.list.troops' | translate }}:</div>\r\n      <mat-list dense>\r\n        <mat-list-item *ngFor=\"let troop of kingdomTroops\" [ngClass]=\"[troop.unit.faction.id, troop.unit.legendary ? 'legendary' : 'common']\">\r\n          <div mat-list-avatar matBadge=\"?\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar [src]=\"troop.unit.image\" [alt]=\"troop.unit.name | translate\">\r\n          </div>\r\n          <div mat-line>{{ troop.unit.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\">\r\n            <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of troop.unit.families\" [src]=\"family.image\" [alt]=\"family.name | translate\">\r\n            <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of troop.unit.skills\" [src]=\"skill.image\" [alt]=\"skill.name | translate\">\r\n            <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of troop.unit.categories\" [src]=\"category.image\" [alt]=\"category.name | translate\">\r\n            <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"troop.unit.legendary\" src=\"/assets/images/icons/legendary.png\" [alt]=\"'category.legendary.name' | translate\" [alt]=\"'category.legendary.name' | translate\">\r\n          </div>\r\n          <div mat-line class=\"mat-card-subtitle\" *ngIf=\"troop.unit.resistances && troop.unit.resistances.length\">\r\n            <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of troop.unit.resistances\" [src]=\"category.image\" [alt]=\"'category.resistance.name' | translate\">\r\n          </div>\r\n        </mat-list-item>\r\n      </mat-list>\r\n    </ng-template>\r\n\r\n    <!-- shop contracts -->\r\n    <ng-template [ngIf]=\"shopContracts.length\">\r\n      <div matSubheader>{{ 'card.list.contracts' | translate }}:</div>\r\n      <mat-action-list dense>\r\n        <button mat-list-item *ngFor=\"let contract of shopContracts\" [ngClass]=\"[contract.hero.faction.id, contract.hero.legendary ? 'legendary' : 'common']\" (click)=\"openDealDialog(contract)\">\r\n          <div mat-list-avatar [matBadge]=\"contract.level\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar class=\"animated pulse infinite\" [src]=\"contract.hero.image\" [alt]=\"contract.hero.name | translate\">\r\n          </div>\r\n          <div mat-line>{{ contract.hero.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\" [innerHTML]=\"contract.hero.description | translate | icon:contract.hero\"></div>\r\n          <div mat-list-avatar [matBadge]=\"contract.gold | long\" matBadgePosition=\"above after\">\r\n            <img mat-list-avatar src=\"/assets/images/resources/gold.png\" [alt]=\"'resource.gold.name' | translate\">\r\n          </div>\r\n        </button>\r\n      </mat-action-list>\r\n    </ng-template>\r\n\r\n    <!-- shop troops -->\r\n    <ng-template [ngIf]=\"shopTroops.length\">\r\n      <div matSubheader>{{ 'card.list.troops' | translate }}:</div>\r\n      <mat-action-list dense>\r\n        <button mat-list-item *ngFor=\"let troop of shopTroops\" [ngClass]=\"[troop.unit.faction.id, troop.unit.legendary ? 'legendary' : 'common']\" (click)=\"openDealDialog(troop)\">\r\n          <div mat-list-avatar [matBadge]=\"troop.quantity | long\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar class=\"animated pulse infinite\" [src]=\"troop.unit.image\" [alt]=\"troop.unit.name | translate\">\r\n          </div>\r\n          <div mat-line>{{ troop.unit.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\">\r\n            <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of troop.unit.families\" [src]=\"family.image\" [alt]=\"family.name | translate\">\r\n            <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of troop.unit.skills\" [src]=\"skill.image\" [alt]=\"skill.name | translate\">\r\n            <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of troop.unit.categories\" [src]=\"category.image\" [alt]=\"category.name | translate\">\r\n            <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"troop.unit.legendary\" src=\"/assets/images/icons/legendary.png\" [alt]=\"'category.legendary.name' | translate\" [alt]=\"'category.legendary.name' | translate\">\r\n          </div>\r\n          <div mat-line class=\"mat-card-subtitle\" *ngIf=\"troop.unit.resistances && troop.unit.resistances.length\">\r\n            <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of troop.unit.resistances\" [src]=\"category.image\" [alt]=\"'category.resistance.name' | translate\">\r\n          </div>\r\n          <div mat-list-avatar [matBadge]=\"troop.gold | long\" matBadgePosition=\"above after\">\r\n            <img mat-list-avatar src=\"/assets/images/resources/gold.png\" [alt]=\"'resource.gold.name' | translate\">\r\n          </div>\r\n        </button>\r\n      </mat-action-list>\r\n    </ng-template>\r\n\r\n    <!-- shop artifacts -->\r\n    <ng-template [ngIf]=\"shopArtifacts.length\">\r\n      <div matSubheader>{{ 'card.list.artifacts' | translate }}:</div>\r\n      <mat-action-list dense>\r\n        <button mat-list-item *ngFor=\"let artifact of shopArtifacts\" [ngClass]=\"[artifact.item.faction.id, artifact.item.legendary ? 'legendary' : 'common']\" (click)=\"openDealDialog(artifact)\">\r\n          <div mat-list-avatar [matBadge]=\"artifact.quantity\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar class=\"animated pulse infinite\" [src]=\"artifact.item.image\" [alt]=\"artifact.item.name | translate\">\r\n          </div>\r\n          <div mat-line>{{ artifact.item.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\" [innerHTML]=\"artifact.item.description | translate | icon:artifact.item\"></div>\r\n          <div mat-list-avatar [matBadge]=\"artifact.gold | long\" matBadgePosition=\"above after\">\r\n            <img mat-list-avatar src=\"/assets/images/resources/gold.png\" [alt]=\"'resource.gold.name' | translate\">\r\n          </div>\r\n        </button>\r\n      </mat-action-list>\r\n    </ng-template>\r\n\r\n    <!-- shop spells -->\r\n    <ng-template [ngIf]=\"shopCharms.length\">\r\n      <div matSubheader>{{ 'card.list.charms' | translate }}:</div>\r\n      <mat-action-list dense>\r\n        <button mat-list-item *ngFor=\"let charm of shopCharms\" [ngClass]=\"[charm.spell.faction.id, charm.spell.legendary ? 'legendary' : 'common']\" (click)=\"openDealDialog(charm)\">\r\n          <div mat-list-avatar [matBadge]=\"charm.level\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar class=\"animated pulse infinite\" [src]=\"charm.spell.image\" [alt]=\"charm.spell.name | translate\">\r\n          </div>\r\n          <div mat-line>{{ charm.spell.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\" [innerHTML]=\"charm.spell.description | translate | icon:charm.spell\"></div>\r\n          <div mat-list-avatar [matBadge]=\"charm.gold | long\" matBadgePosition=\"above after\">\r\n            <img mat-list-avatar src=\"/assets/images/resources/gold.png\" [alt]=\"'resource.gold.name' | translate\">\r\n          </div>\r\n        </button>\r\n      </mat-action-list>\r\n    </ng-template>\r\n\r\n    <!-- quest contracts -->\r\n    <ng-template [ngIf]=\"questContracts.length\">\r\n      <div matSubheader>{{ 'card.list.contracts' | translate }}:</div>\r\n      <mat-list dense>\r\n        <mat-list-item *ngFor=\"let contract of questContracts\" [ngClass]=\"[contract.hero.faction.id, contract.hero.legendary ? 'legendary' : 'common']\">\r\n          <div mat-list-avatar matBadge=\"?\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar [src]=\"contract.hero.image\" [alt]=\"contract.hero.name | translate\">\r\n          </div>\r\n          <div mat-line>{{ contract.hero.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\" [innerHTML]=\"contract.hero.description | translate | icon:contract.hero\"></div>\r\n        </mat-list-item>\r\n      </mat-list>\r\n    </ng-template>\r\n\r\n    <!-- quest troops -->\r\n    <ng-template [ngIf]=\"questTroops.length\">\r\n      <div matSubheader>{{ 'card.list.troops' | translate }}:</div>\r\n      <mat-list dense>\r\n        <mat-list-item *ngFor=\"let troop of questTroops\" [ngClass]=\"[troop.unit.faction.id, troop.unit.legendary ? 'legendary' : 'common']\">\r\n          <div mat-list-avatar matBadge=\"?\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar [src]=\"troop.unit.image\" [alt]=\"troop.unit.name | translate\">\r\n          </div>\r\n          <div mat-line>{{ troop.unit.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\">\r\n            <img [title]=\"family.name | translate\" class=\"icon\" *ngFor=\"let family of troop.unit.families\" [src]=\"family.image\" [alt]=\"family.name | translate\">\r\n            <img [title]=\"skill.name | translate\" class=\"icon\" *ngFor=\"let skill of troop.unit.skills\" [src]=\"skill.image\" [alt]=\"skill.name | translate\">\r\n            <img [title]=\"category.name | translate\" class=\"icon\" *ngFor=\"let category of troop.unit.categories\" [src]=\"category.image\" [alt]=\"category.name | translate\">\r\n            <img [title]=\"'category.legendary.name' | translate\" class=\"icon\" *ngIf=\"troop.unit.legendary\" src=\"/assets/images/icons/legendary.png\" [alt]=\"'category.legendary.name' | translate\">\r\n          </div>\r\n          <div mat-line class=\"mat-card-subtitle\" *ngIf=\"troop.unit.resistances && troop.unit.resistances.length\">\r\n            <img [title]=\"('category.resistance.name' | translate) + (category.name | translate)\" class=\"icon grayscale\" *ngFor=\"let category of troop.unit.resistances\" [src]=\"category.image\" [alt]=\"'category.resistance.name' | translate\">\r\n          </div>\r\n        </mat-list-item>\r\n      </mat-list>\r\n    </ng-template>\r\n\r\n    <!-- quest artifacts (rewards) -->\r\n    <ng-template [ngIf]=\"questArtifacts.length\">\r\n      <div matSubheader>{{ 'card.list.rewards' | translate }}:</div>\r\n      <mat-action-list dense>\r\n        <button mat-list-item *ngFor=\"let artifact of questArtifacts\" [ngClass]=\"[artifact.item.faction.id, artifact.item.legendary ? 'legendary' : 'common']\" (click)=\"openAdventureDialog(artifact)\" [disabled]=\"!canAttack\">\r\n          <div mat-list-avatar [matBadge]=\"artifact.quantity | long\" matBadgePosition=\"above before\">\r\n            <img mat-list-avatar class=\"animated pulse infinite\" [src]=\"artifact.item.image\" [alt]=\"artifact.item.name | translate\">\r\n          </div>\r\n          <div mat-line>{{ artifact.item.name | translate }}</div>\r\n          <div mat-line class=\"mat-card-subtitle\" [innerHTML]=\"artifact.item.description | translate | icon:artifact.item\"></div>\r\n          <div mat-list-avatar [matBadge]=\"data.turns | long\" matBadgePosition=\"above after\">\r\n            <img mat-list-avatar src=\"/assets/images/resources/turn.png\" [alt]=\"'resource.turn.name' | translate\">\r\n          </div>\r\n        </button>\r\n      </mat-action-list>\r\n    </ng-template>\r\n\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { PopupType } from 'src/app/shared/type/common.type';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AdventureComponent } from './adventure.component';\r\nimport { DealComponent } from './deal.component';\r\nimport { BehaviorSubject, combineLatest } from 'rxjs';\r\nimport * as moment from 'moment';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { TroopAssignmentType } from 'src/app/kingdom/army/army.component';\r\nimport { LoadingService } from 'src/app/services/loading.service';\r\nimport { Store } from '@ngxs/store';\r\nimport { AuthState } from 'src/app/shared/auth/auth.state';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'app-popup',\r\n  templateUrl: './popup.component.html',\r\n  styleUrls: ['./popup.component.scss'],\r\n})\r\nexport class PopupComponent implements OnInit {\r\n\r\n  uid: string = this.store.selectSnapshot(AuthState.getUserUID);\r\n  opened: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n  data: any = null;\r\n  shopContracts: any[] = [];\r\n  shopArtifacts: any[] = [];\r\n  shopTroops: any[] = [];\r\n  kingdomTroops: any[] = [];\r\n  shopCharms: any[] = [];\r\n  questContracts: any[] = [];\r\n  questTroops: any[] = [];\r\n  questArtifacts: any[] = [];\r\n  PopupType: typeof PopupType = PopupType;\r\n  canAttack: boolean = false;\r\n\r\n  constructor(\r\n    private angularFirestore: AngularFirestore,\r\n    private dialog: MatDialog,\r\n    private apiService: ApiService,\r\n    private loadingService: LoadingService,\r\n    private store: Store,\r\n  ) { }\r\n\r\n  async ngOnInit() {\r\n    // check refresh\r\n    await this.checkRefresh();\r\n    // attack enabled\r\n    this.canAttack = (await this.angularFirestore.collection<any>(`kingdoms/${this.uid}/troops`, ref => ref.where('assignment', '==', TroopAssignmentType.ATTACK)).get().toPromise()).docs.length !== 0;\r\n    // kingdoms\r\n    if (this.data.type === PopupType.KINGDOM) {\r\n      combineLatest([\r\n        this.angularFirestore.collection<any>(`kingdoms/${this.data.id}/troops`, ref => ref.where('assignment', '==', TroopAssignmentType.DEFENSE)).valueChanges({ idField: 'fid' }),\r\n      ])\r\n      .pipe(untilDestroyed(this))\r\n      .subscribe(([troops]) => {\r\n        this.kingdomTroops = troops.sort((a, b) => a.sort - b.sort);\r\n        this.opened.next(true);\r\n      });\r\n    }\r\n    // shop\r\n    if (this.data.type === PopupType.SHOP) {\r\n      combineLatest([\r\n        this.angularFirestore.collection<any>(`shops/${this.data.id}/contracts`).valueChanges({ idField: 'fid' }),\r\n        this.angularFirestore.collection<any>(`shops/${this.data.id}/troops`).valueChanges({ idField: 'fid' }),\r\n        this.angularFirestore.collection<any>(`shops/${this.data.id}/artifacts`).valueChanges({ idField: 'fid' }),\r\n        this.angularFirestore.collection<any>(`shops/${this.data.id}/charms`).valueChanges({ idField: 'fid' }),\r\n      ])\r\n      .pipe(untilDestroyed(this))\r\n      .subscribe(([contracts, troops, artifacts, charms]) => {\r\n        this.shopContracts = contracts;\r\n        this.shopTroops = troops;\r\n        this.shopArtifacts = artifacts;\r\n        this.shopCharms = charms;\r\n        this.opened.next(true);\r\n      });\r\n    }\r\n    // quest\r\n    if (this.data.type === PopupType.QUEST) {\r\n      combineLatest([\r\n        this.angularFirestore.collection<any>(`quests/${this.data.id}/troops`, ref => ref.where('assignment', '==', TroopAssignmentType.DEFENSE)).valueChanges({ idField: 'fid' }),\r\n        this.angularFirestore.collection<any>(`quests/${this.data.id}/contracts`).valueChanges({ idField: 'fid' }),\r\n        this.angularFirestore.collection<any>(`quests/${this.data.id}/artifacts`).valueChanges({ idField: 'fid' }),\r\n      ])\r\n      .pipe(untilDestroyed(this))\r\n      .subscribe(([troops, contracts, artifacts]) => {\r\n        this.questTroops = troops.sort((a, b) => a.sort - b.sort);\r\n        this.questContracts = contracts;\r\n        this.questArtifacts = artifacts;\r\n        this.opened.next(true);\r\n      });\r\n    }\r\n  }\r\n\r\n  async checkRefresh() {\r\n    if (this.data.type !== PopupType.KINGDOM && this.data.visited && moment().isAfter(moment(this.data.visited.toMillis()))) {\r\n      this.loadingService.startLoading();\r\n      try {\r\n        await this.data.type === PopupType.SHOP\r\n        ? this.apiService.addShop(this.data.id, this.data.store.id)\r\n        : this.apiService.addQuest(this.data.id, this.data.location.id);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n      this.loadingService.stopLoading();\r\n    }\r\n  }\r\n\r\n  openDealDialog(deal: any): void {\r\n    deal.join = deal.hero || deal.item || deal.spell || deal.unit;\r\n    const dialogRef = this.dialog.open(DealComponent, {\r\n      panelClass: 'dialog-responsive',\r\n      data: {\r\n        deal: deal,\r\n        shop: this.data,\r\n      },\r\n    });\r\n  }\r\n\r\n  openAdventureDialog(reward: any): void {\r\n    const dialogRef = this.dialog.open(AdventureComponent, {\r\n      panelClass: 'dialog-responsive',\r\n      data: {\r\n        reward: reward,\r\n        quest: this.data,\r\n      },\r\n    });\r\n  }\r\n\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  hmr: false,\r\n  firebase: {\r\n    apiKey: 'AIzaSyCSVr_n7Ced40pw2qHEhnr3G09UILvB_zc',\r\n    authDomain: 'mage-c4259.firebaseapp.com',\r\n    databaseURL: 'https://mage-c4259.firebaseio.com',\r\n    projectId: 'mage-c4259',\r\n    storageBucket: 'mage-c4259.appspot.com',\r\n    messagingSenderId: '210042498621',\r\n    appId: '1:210042498621:web:c4a21bc796b32d8bf40454',\r\n  },\r\n  mapbox: {\r\n    style: 'mapbox://styles/fergardi/ckacdomo73idr1is4dkj2kfil',\r\n    token: 'pk.eyJ1IjoiZmVyZ2FyZGkiLCJhIjoiY2lxdWl1enJiMDAzaWh4bTNwY3F6MnNwdiJ9.fPkJoOfrARPtZWCj1ehyCQ',\r\n    lat: 42.618060799999995,\r\n    lng: -5.5508992,\r\n    zoom: 12,\r\n    pitch: 80,\r\n  },\r\n  functions: {\r\n    url: 'http://localhost:5001/mage-c4259/europe-west1/api',\r\n  },\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { NgModuleRef, ApplicationRef } from '@angular/core';\r\nimport { createNewHosts } from '@angularclass/hmr';\r\n\r\nexport const hmrBootstrap = (module: any, bootstrap: () => Promise<NgModuleRef<any>>) => {\r\n  let ngModule: NgModuleRef<any>;\r\n  module.hot.accept();\r\n  bootstrap().then(mod => ngModule = mod);\r\n  module.hot.dispose(() => {\r\n    const appRef: ApplicationRef = ngModule.injector.get(ApplicationRef);\r\n    const elements = appRef.components.map(c => c.location.nativeElement);\r\n    const makeVisible = createNewHosts(elements);\r\n    ngModule.destroy();\r\n    makeVisible();\r\n  });\r\n};\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\nimport { hmrBootstrap } from './hmr';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nconst bootstrap = () => platformBrowserDynamic().bootstrapModule(AppModule);\r\n\r\nif (environment.hmr) {\r\n  if (module['hot']) {\r\n    hmrBootstrap(module, bootstrap);\r\n  } else {\r\n    console.error('HMR is not enabled for webpack-dev-server!');\r\n    console.log('Are you using the --hmr flag for ng serve?');\r\n  }\r\n} else {\r\n  bootstrap().catch(err => console.error(err));\r\n}\r\n\r\n","var map = {\n\t\"./af\": 62275,\n\t\"./af.js\": 62275,\n\t\"./ar\": 90857,\n\t\"./ar-dz\": 11218,\n\t\"./ar-dz.js\": 11218,\n\t\"./ar-kw\": 14754,\n\t\"./ar-kw.js\": 14754,\n\t\"./ar-ly\": 66680,\n\t\"./ar-ly.js\": 66680,\n\t\"./ar-ma\": 92178,\n\t\"./ar-ma.js\": 92178,\n\t\"./ar-sa\": 56522,\n\t\"./ar-sa.js\": 56522,\n\t\"./ar-tn\": 95682,\n\t\"./ar-tn.js\": 95682,\n\t\"./ar.js\": 90857,\n\t\"./az\": 70164,\n\t\"./az.js\": 70164,\n\t\"./be\": 79774,\n\t\"./be.js\": 79774,\n\t\"./bg\": 60947,\n\t\"./bg.js\": 60947,\n\t\"./bm\": 21832,\n\t\"./bm.js\": 21832,\n\t\"./bn\": 89650,\n\t\"./bn-bd\": 74477,\n\t\"./bn-bd.js\": 74477,\n\t\"./bn.js\": 89650,\n\t\"./bo\": 66005,\n\t\"./bo.js\": 66005,\n\t\"./br\": 98492,\n\t\"./br.js\": 98492,\n\t\"./bs\": 70534,\n\t\"./bs.js\": 70534,\n\t\"./ca\": 52061,\n\t\"./ca.js\": 52061,\n\t\"./cs\": 84737,\n\t\"./cs.js\": 84737,\n\t\"./cv\": 61167,\n\t\"./cv.js\": 61167,\n\t\"./cy\": 77996,\n\t\"./cy.js\": 77996,\n\t\"./da\": 9528,\n\t\"./da.js\": 9528,\n\t\"./de\": 14540,\n\t\"./de-at\": 49430,\n\t\"./de-at.js\": 49430,\n\t\"./de-ch\": 67978,\n\t\"./de-ch.js\": 67978,\n\t\"./de.js\": 14540,\n\t\"./dv\": 83426,\n\t\"./dv.js\": 83426,\n\t\"./el\": 6616,\n\t\"./el.js\": 6616,\n\t\"./en-au\": 63816,\n\t\"./en-au.js\": 63816,\n\t\"./en-ca\": 32162,\n\t\"./en-ca.js\": 32162,\n\t\"./en-gb\": 83305,\n\t\"./en-gb.js\": 83305,\n\t\"./en-ie\": 61954,\n\t\"./en-ie.js\": 61954,\n\t\"./en-il\": 43060,\n\t\"./en-il.js\": 43060,\n\t\"./en-in\": 59923,\n\t\"./en-in.js\": 59923,\n\t\"./en-nz\": 13540,\n\t\"./en-nz.js\": 13540,\n\t\"./en-sg\": 16505,\n\t\"./en-sg.js\": 16505,\n\t\"./eo\": 41907,\n\t\"./eo.js\": 41907,\n\t\"./es\": 86640,\n\t\"./es-do\": 41246,\n\t\"./es-do.js\": 41246,\n\t\"./es-mx\": 56131,\n\t\"./es-mx.js\": 56131,\n\t\"./es-us\": 36430,\n\t\"./es-us.js\": 36430,\n\t\"./es.js\": 86640,\n\t\"./et\": 62551,\n\t\"./et.js\": 62551,\n\t\"./eu\": 32711,\n\t\"./eu.js\": 32711,\n\t\"./fa\": 54572,\n\t\"./fa.js\": 54572,\n\t\"./fi\": 33390,\n\t\"./fi.js\": 33390,\n\t\"./fil\": 87860,\n\t\"./fil.js\": 87860,\n\t\"./fo\": 48216,\n\t\"./fo.js\": 48216,\n\t\"./fr\": 99291,\n\t\"./fr-ca\": 98527,\n\t\"./fr-ca.js\": 98527,\n\t\"./fr-ch\": 58407,\n\t\"./fr-ch.js\": 58407,\n\t\"./fr.js\": 99291,\n\t\"./fy\": 47054,\n\t\"./fy.js\": 47054,\n\t\"./ga\": 49540,\n\t\"./ga.js\": 49540,\n\t\"./gd\": 73917,\n\t\"./gd.js\": 73917,\n\t\"./gl\": 51486,\n\t\"./gl.js\": 51486,\n\t\"./gom-deva\": 56245,\n\t\"./gom-deva.js\": 56245,\n\t\"./gom-latn\": 48868,\n\t\"./gom-latn.js\": 48868,\n\t\"./gu\": 59652,\n\t\"./gu.js\": 59652,\n\t\"./he\": 89019,\n\t\"./he.js\": 89019,\n\t\"./hi\": 42040,\n\t\"./hi.js\": 42040,\n\t\"./hr\": 63402,\n\t\"./hr.js\": 63402,\n\t\"./hu\": 79322,\n\t\"./hu.js\": 79322,\n\t\"./hy-am\": 27609,\n\t\"./hy-am.js\": 27609,\n\t\"./id\": 57942,\n\t\"./id.js\": 57942,\n\t\"./is\": 98275,\n\t\"./is.js\": 98275,\n\t\"./it\": 73053,\n\t\"./it-ch\": 4378,\n\t\"./it-ch.js\": 4378,\n\t\"./it.js\": 73053,\n\t\"./ja\": 46176,\n\t\"./ja.js\": 46176,\n\t\"./jv\": 679,\n\t\"./jv.js\": 679,\n\t\"./ka\": 92726,\n\t\"./ka.js\": 92726,\n\t\"./kk\": 72953,\n\t\"./kk.js\": 72953,\n\t\"./km\": 86957,\n\t\"./km.js\": 86957,\n\t\"./kn\": 59181,\n\t\"./kn.js\": 59181,\n\t\"./ko\": 47148,\n\t\"./ko.js\": 47148,\n\t\"./ku\": 27752,\n\t\"./ku.js\": 27752,\n\t\"./ky\": 65675,\n\t\"./ky.js\": 65675,\n\t\"./lb\": 41263,\n\t\"./lb.js\": 41263,\n\t\"./lo\": 65746,\n\t\"./lo.js\": 65746,\n\t\"./lt\": 11143,\n\t\"./lt.js\": 11143,\n\t\"./lv\": 38753,\n\t\"./lv.js\": 38753,\n\t\"./me\": 44054,\n\t\"./me.js\": 44054,\n\t\"./mi\": 31573,\n\t\"./mi.js\": 31573,\n\t\"./mk\": 30202,\n\t\"./mk.js\": 30202,\n\t\"./ml\": 68523,\n\t\"./ml.js\": 68523,\n\t\"./mn\": 79794,\n\t\"./mn.js\": 79794,\n\t\"./mr\": 56681,\n\t\"./mr.js\": 56681,\n\t\"./ms\": 56975,\n\t\"./ms-my\": 39859,\n\t\"./ms-my.js\": 39859,\n\t\"./ms.js\": 56975,\n\t\"./mt\": 3691,\n\t\"./mt.js\": 3691,\n\t\"./my\": 5152,\n\t\"./my.js\": 5152,\n\t\"./nb\": 7607,\n\t\"./nb.js\": 7607,\n\t\"./ne\": 21526,\n\t\"./ne.js\": 21526,\n\t\"./nl\": 86368,\n\t\"./nl-be\": 40076,\n\t\"./nl-be.js\": 40076,\n\t\"./nl.js\": 86368,\n\t\"./nn\": 68420,\n\t\"./nn.js\": 68420,\n\t\"./oc-lnc\": 51906,\n\t\"./oc-lnc.js\": 51906,\n\t\"./pa-in\": 94504,\n\t\"./pa-in.js\": 94504,\n\t\"./pl\": 54721,\n\t\"./pl.js\": 54721,\n\t\"./pt\": 74645,\n\t\"./pt-br\": 54548,\n\t\"./pt-br.js\": 54548,\n\t\"./pt.js\": 74645,\n\t\"./ro\": 71977,\n\t\"./ro.js\": 71977,\n\t\"./ru\": 26042,\n\t\"./ru.js\": 26042,\n\t\"./sd\": 78849,\n\t\"./sd.js\": 78849,\n\t\"./se\": 27739,\n\t\"./se.js\": 27739,\n\t\"./si\": 50084,\n\t\"./si.js\": 50084,\n\t\"./sk\": 92449,\n\t\"./sk.js\": 92449,\n\t\"./sl\": 23086,\n\t\"./sl.js\": 23086,\n\t\"./sq\": 33139,\n\t\"./sq.js\": 33139,\n\t\"./sr\": 30607,\n\t\"./sr-cyrl\": 30063,\n\t\"./sr-cyrl.js\": 30063,\n\t\"./sr.js\": 30607,\n\t\"./ss\": 40131,\n\t\"./ss.js\": 40131,\n\t\"./sv\": 21665,\n\t\"./sv.js\": 21665,\n\t\"./sw\": 5642,\n\t\"./sw.js\": 5642,\n\t\"./ta\": 33622,\n\t\"./ta.js\": 33622,\n\t\"./te\": 74825,\n\t\"./te.js\": 74825,\n\t\"./tet\": 48336,\n\t\"./tet.js\": 48336,\n\t\"./tg\": 39238,\n\t\"./tg.js\": 39238,\n\t\"./th\": 99463,\n\t\"./th.js\": 99463,\n\t\"./tk\": 39986,\n\t\"./tk.js\": 39986,\n\t\"./tl-ph\": 29672,\n\t\"./tl-ph.js\": 29672,\n\t\"./tlh\": 40043,\n\t\"./tlh.js\": 40043,\n\t\"./tr\": 51212,\n\t\"./tr.js\": 51212,\n\t\"./tzl\": 50110,\n\t\"./tzl.js\": 50110,\n\t\"./tzm\": 80482,\n\t\"./tzm-latn\": 38309,\n\t\"./tzm-latn.js\": 38309,\n\t\"./tzm.js\": 80482,\n\t\"./ug-cn\": 42495,\n\t\"./ug-cn.js\": 42495,\n\t\"./uk\": 54157,\n\t\"./uk.js\": 54157,\n\t\"./ur\": 80984,\n\t\"./ur.js\": 80984,\n\t\"./uz\": 64141,\n\t\"./uz-latn\": 43662,\n\t\"./uz-latn.js\": 43662,\n\t\"./uz.js\": 64141,\n\t\"./vi\": 12607,\n\t\"./vi.js\": 12607,\n\t\"./x-pseudo\": 66460,\n\t\"./x-pseudo.js\": 66460,\n\t\"./yo\": 92948,\n\t\"./yo.js\": 92948,\n\t\"./zh-cn\": 62658,\n\t\"./zh-cn.js\": 62658,\n\t\"./zh-hk\": 39352,\n\t\"./zh-hk.js\": 39352,\n\t\"./zh-mo\": 38274,\n\t\"./zh-mo.js\": 38274,\n\t\"./zh-tw\": 98451,\n\t\"./zh-tw.js\": 98451\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;"]}